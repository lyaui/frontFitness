{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/CourseNewEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/CourseNewEdit.vue","mtime":1583929961761},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { required, maxLength, minValue, url } from \"vuelidate/lib/validators\";\nimport { VueEditor } from \"vue2-editor\";\n\nexport default {\n  components: { VueEditor },\n  data() {\n    return {\n      prevRoute: false,\n      updateCover: false,\n      week: [\n        \"星期一\",\n        \"星期二\",\n        \"星期三\",\n        \"星期四\",\n        \"星期五\",\n        \"星期六\",\n        \"星期日\"\n      ],\n      category: [\"有氧課程\", \"瑜珈課程\", \"游泳課程\", \"飛輪課程\", \"其他課程\"],\n      coaches: [\n        \"Amy珊珊\",\n        \"CICI\",\n        \"Danny\",\n        \"Papaya\",\n        \"Peco\",\n        \"Ryan\",\n        \"小惠\",\n        \"張三豐\",\n        \"強森\",\n        \"海德\",\n        \"阿Ni\",\n        \"阿壯\"\n      ],\n      courseNew: {\n        title: \"\",\n        intro: \"\",\n        tags: [],\n        categorySelected: \"\",\n        coach: \"\",\n        week: \"\",\n        time: \"\",\n        quantity: null,\n        remainQuantity: null,\n        originPrice: null,\n        price: null,\n        discount: false,\n        imageUrl: \"\",\n        avgRating: 0\n      },\n      course: null,\n      tag: null,\n      modal: null,\n      titleMax: 25,\n      introMax: 80\n    };\n  },\n  validations: {\n    course: {\n      title: {\n        required,\n        maxLength: maxLength(24)\n      },\n      intro: {\n        required,\n        maxLength: maxLength(79)\n      },\n      categorySelected: {\n        required\n      },\n      coach: {\n        required\n      },\n      week: { required },\n      time: {\n        required\n      },\n      originPrice: { required, minValue: minValue(0) },\n      price: { required, minValue: minValue(0) },\n      quantity: { required, minValue: minValue(0) },\n      remainQuantity: { required, minValue: minValue(0) },\n      imageUrl: { required, url }\n    }\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    status() {\n      return this.$store.state.courses.status;\n    },\n    getCourse() {\n      return this.$store.state.courses.course;\n    },\n    getDownloadURL() {\n      return this.$store.state.downloadURL;\n    }\n  },\n  watch: {\n    //從編輯狀態切到新增狀態的話\n    status() {\n      if (this.status === \"新增課程\") {\n        this.course = { ...this.courseNew };\n      }\n    },\n    getDownloadURL() {\n      if (this.getDownloadURL) {\n        this.course.imageUrl = this.getDownloadURL;\n        this.updateCover = false;\n      }\n    }\n  },\n  methods: {\n    //新增課程\n    addCourse() {\n      this.$v.$touch();\n\n      if (this.$v.$invalid) {\n        this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n      } else {\n        this.$store\n          .dispatch(\"courses/createCourse\", { ...this.course })\n          .then(_ => {\n            this.$toasted.success(\"成功新增課程\", {\n              duration: 2000\n            });\n            this.$router.push({ name: \"coursesAdmin\" });\n          })\n          .catch(e => console.error(e.message));\n      }\n    },\n\n    //更新課程\n    updateCourse(id) {\n      this.$v.$touch();\n      if (!this.updateCover) {\n        if (this.$v.$invalid) {\n          this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n        } else {\n          this.$store\n            .dispatch(\"courses/updateCourse\", { id: id, course: this.course })\n            .then(_ => {\n              this.$toasted.success(\"更新成功!!\", {\n                duration: 2000\n              });\n              this.$router.push({ name: \"coursesAdmin\" });\n            });\n        }\n      }\n    },\n\n    //新增課程tag\n    addTags() {\n      if (this.tag) {\n        this.course.tags.push(this.tag);\n      }\n      this.tag = \"\";\n    },\n\n    //刪除tag\n    deleteTag(key) {\n      this.course.tags.splice(key, 1);\n    },\n\n    //上傳圖片\n    uploadImage(e) {\n      let file = e.target.files[0];\n      if (!file.type.includes(\"image\")) {\n        this.$toasted.error(\"請上傳圖片檔案\", { duration: 3000 });\n      } else {\n        this.updateCover = true;\n        this.$store.dispatch(\"updateFile\", { file: file, place: \"courses/\" });\n      }\n    }\n  },\n  created() {\n    this.$store.commit(\"setDownloadUrl\", null);\n\n    if (this.status === \"編輯課程\") {\n      this.course = { ...this.getCourse };\n    } else {\n      this.course = { ...this.courseNew };\n    }\n  }\n};\n",{"version":3,"sources":["CourseNewEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAySA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseNewEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h2 class=\"heading-secondary\">{{status}}</h2>\n    <div class=\"admin-panel mb-md\">\n      <form>\n        <div class=\"edit-form\">\n          <!-- 課程封面 -->\n          <div class=\"cover-upload\">\n            <div>\n              <div class=\"form__row\">\n                <div class=\"form__group\">\n                  <label class=\"form__label\">輸入封面網址</label>\n                  <input\n                    class=\"form__input\"\n                    type=\"text\"\n                    placeholder=\"https://unsplash...\"\n                    :class=\"{'form__input--warning': $v.course.imageUrl.$error}\"\n                    v-model=\"course.imageUrl\"\n                  >\n                  <template v-if=\"$v.course.imageUrl.$dirty\">\n                    <span v-if=\"!$v.course.imageUrl.required\" class=\"text-warning\">封面網址為必填欄位</span>\n                    <span v-if=\"!$v.course.imageUrl.url\" class=\"text-warning\">請輸入正確格式網址</span>\n                  </template>\n                </div>\n              </div>\n              <div class=\"form__row\">\n                <div class=\"form__group\">\n                  <label class=\"form__label\">\n                    或 選擇封面檔案\n                    <i class=\"fas fa-spinner fa-spin\" v-if=\"updateCover\"></i>\n                  </label>\n                  <input @change=\"uploadImage\" class=\"form__input\" type=\"file\">\n                </div>\n              </div>\n            </div>\n            <img v-if=\"!!course.imageUrl\" class=\"form__img\" :src=\"course.imageUrl\">\n            <img\n              v-else\n              class=\"form__img\"\n              src=\"https://fakeimg.pl/250x150/?retina=1&text=請上傳封面&font=noto\"\n            >\n          </div>\n          <!-- 課程內容 -->\n          <div class=\"content-edit\">\n            <!-- 課程名稱 -->\n            <div class>\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程名稱（標題上限25字元）</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入課程名稱\"\n                  type=\"text\"\n                  v-model.trim=\"course.title\"\n                  :maxlength=\"titleMax\"\n                  :class=\"{'form__input--warning': $v.course.title.$error}\"\n                >\n                <div class=\"form__counter\">\n                  <span>{{titleMax-course.title.length}}</span>\n                </div>\n                <template v-if=\"$v.course.title.$dirty\">\n                  <span v-if=\"!$v.course.title.required\" class=\"text-warning\">課程名稱為必填欄位</span>\n                  <span v-if=\"!$v.course.title.maxLength\" class=\"text-warning\">超過上限25字元 請刪減標題長度</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 課程簡介 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程簡介（簡介上限80字元）</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入課程簡介\"\n                  type=\"textarea\"\n                  v-model.trim=\"course.intro\"\n                  style=\"padding-right:40px\"\n                  :maxlength=\"introMax\"\n                  :class=\"{'form__input--warning': $v.course.intro.$error}\"\n                >\n                <div class=\"form__counter\">\n                  <span>{{introMax-course.intro.length}}</span>\n                </div>\n                <template v-if=\"$v.course.intro.$dirty\">\n                  <span v-if=\"!$v.course.intro.required\" class=\"text-warning\">課程簡介為必填欄位</span>\n                  <span v-if=\"!$v.course.intro.maxLength\" class=\"text-warning\">超過上限80字元 請刪減簡介長度</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 課程標籤 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"form__tag-case\">\n                  <label class=\"form__label\">標籤</label>\n                  <div class=\"form__tag\" v-for=\"(tag,key) in course.tags\" :key=\"key\">\n                    {{tag}}\n                    <i class=\"fas fa-times-circle\" @click=\"deleteTag(key)\"></i>\n                  </div>\n                </div>\n                <input\n                  class=\"form__input\"\n                  type=\"text\"\n                  @keyup.enter=\"addTags()\"\n                  v-model.trim=\"tag\"\n                  placeholder=\"請填入標籤並以enter隔開\"\n                >\n              </div>\n            </div>\n\n            <!-- 課程類別、教練 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程類別</label>\n                <select\n                  class=\"form__input\"\n                  v-model=\"course.categorySelected\"\n                  :class=\"{'form__input--warning': $v.course.categorySelected.$error}\"\n                  required\n                >\n                  <option value disabled selected hidden>請選擇課程類別</option>\n                  <option :value=\"item\" v-for=\"(item,key) in category\" :key=\"key\">{{item}}</option>\n                </select>\n                <template v-if=\"$v.course.categorySelected.$dirty\">\n                  <span v-if=\"!$v.course.categorySelected.required\" class=\"text-warning\">課程類別為必選欄位</span>\n                </template>\n              </div>\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程教練</label>\n                <select\n                  class=\"form__input\"\n                  :class=\"{'form__input--warning': $v.course.coach.$error}\"\n                  v-model=\"course.coach\"\n                  required\n                >\n                  <option value disabled selected hidden>請選擇課程教練</option>\n                  <option :value=\"item\" v-for=\"(item,key) in coaches\" :key=\"key\">{{item}}</option>\n                </select>\n                <template v-if=\"$v.course.coach.$dirty\">\n                  <span v-if=\"!$v.course.coach.required\" class=\"text-warning\">課程教練為必選欄位</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 課程星期、時間 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程星期</label>\n                <select\n                  class=\"form__input\"\n                  :class=\"{'form__input--warning': $v.course.week.$error}\"\n                  v-model=\"course.week\"\n                  required\n                >\n                  <option value disabled selected hidden>請選擇課程星期</option>\n                  <option v-for=\"day in week\" :key=\"day\">{{day}}</option>\n                </select>\n                <template v-if=\"$v.course.week.$dirty\">\n                  <span v-if=\"!$v.course.week.required\" class=\"text-warning\">課程星期為必選欄位</span>\n                </template>\n              </div>\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程時間</label>\n                <select\n                  class=\"form__input\"\n                  :class=\"{'form__input--warning': $v.course.time.$error}\"\n                  v-model=\"course.time\"\n                  required\n                >\n                  <option value disabled selected hidden>請選擇課程時間</option>\n                  <optgroup label=\"上午\">\n                    <option value=\"上午09:00~10:00\" default selected>09:00~10:00</option>\n                    <option value=\"上午10:00~11:00\">10:00~11:00</option>\n                    <option value=\"上午11:00~12:00\">11:00~12:00</option>\n                  </optgroup>\n                  <optgroup label=\"中午\">\n                    <option value=\"中午14:00~15:00\">14:00~15:00</option>\n                    <option value=\"中午15:00~16:00\">15:00~16:00</option>\n                    <option value=\"中午16:00~17:00\">16:00~17:00</option>\n                  </optgroup>\n                  <optgroup label=\"晚上\">\n                    <option value=\"晚上18:00~19:00\">18:00~19:00</option>\n                    <option value=\"晚上19:00~20:00\">19:00~20:00</option>\n                    <option value=\"晚上20:00~21:00\">20:00~21:00</option>\n                  </optgroup>\n                </select>\n                <template v-if=\"$v.course.time.$dirty\">\n                  <span v-if=\"!$v.course.time.required\" class=\"text-warning\">課程時間為必選欄位</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 滿班人數、可報名人數 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">滿班人數</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入人數\"\n                  type=\"number\"\n                  v-model.number=\"course.quantity\"\n                  :class=\"{'form__input--warning': $v.course.quantity.$error}\"\n                >\n                <template v-if=\"$v.course.quantity.$dirty\">\n                  <span v-if=\"!$v.course.quantity.required\" class=\"text-warning\">滿班人數為必填欄位</span>\n                  <span v-if=\"!$v.course.quantity.minValue\" class=\"text-warning\">人數至少0人</span>\n                </template>\n              </div>\n              <div class=\"form__group\">\n                <label class=\"form__label\">可報名人數</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入人數\"\n                  type=\"number\"\n                  v-model.number=\"course.remainQuantity\"\n                  :class=\"{'form__input--warning': $v.course.remainQuantity.$error}\"\n                >\n                <template v-if=\"$v.course.remainQuantity.$dirty\">\n                  <span v-if=\"!$v.course.remainQuantity.required\" class=\"text-warning\">可報名人數為必填欄位</span>\n                  <span v-if=\"!$v.course.remainQuantity.minValue\" class=\"text-warning\">人數至少0人</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 課程原價、售價 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">原價</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入價格\"\n                  type=\"number\"\n                  v-model.number=\"course.originPrice\"\n                  :class=\"{'form__input--warning': $v.course.originPrice.$error}\"\n                >\n                <template v-if=\"$v.course.originPrice.$dirty\">\n                  <span v-if=\"!$v.course.originPrice.required\" class=\"text-warning\">原價為必填欄位</span>\n                  <span v-if=\"!$v.course.originPrice.minValue\" class=\"text-warning\">價格必大於0</span>\n                </template>\n              </div>\n              <div class=\"form__group\">\n                <label class=\"form__label\">售價</label>\n                <input\n                  class=\"form__input\"\n                  placeholder=\"請填入價格\"\n                  type=\"number\"\n                  v-model.number=\"course.price\"\n                  :class=\"{'form__input--warning': $v.course.price.$error}\"\n                >\n                <template v-if=\"$v.course.price.$dirty\">\n                  <span v-if=\"!$v.course.price.required\" class=\"text-warning\">售價為必填欄位</span>\n                  <span v-if=\"!$v.course.price.minValue\" class=\"text-warning\">價格必大於0</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 精選課程 -->\n            <div class=\"form__row\">\n              <div class=\"form__group d-flex\" style=\"align-items:center\">\n                <input class=\"form__checkbox\" type=\"checkbox\" v-model=\"course.discount\">\n                <label class=\"form__label\">精選課程（優惠）</label>\n              </div>\n            </div>\n            <!-- 詳細課程內容 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <label class=\"form__label\">課程內容</label>\n                <VueEditor id=\"editor\" v-model=\"course.desc\" :placeholder=\"'請填入詳細課程內容'\"></VueEditor>\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n\n      <!-- 送出按鈕 -->\n      <div class=\"form__row\">\n        <div class=\"form__group btn-footer\">\n          <button\n            style=\"width:100px\"\n            class=\"btn btn-primary\"\n            @click=\"addCourse\"\n            v-if=\"status==='新增課程'\"\n          >新增</button>\n          <button\n            style=\"width:100px\"\n            class=\"btn btn-primary\"\n            @click=\"updateCourse(course.id)\"\n            v-if=\"status==='編輯課程'\"\n          >修改</button>\n          <button style=\"width:100px\" class=\"btn btn-primary--cancel\" @click=\"$router.go(-1)\">取消</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport { required, maxLength, minValue, url } from \"vuelidate/lib/validators\";\nimport { VueEditor } from \"vue2-editor\";\n\nexport default {\n  components: { VueEditor },\n  data() {\n    return {\n      prevRoute: false,\n      updateCover: false,\n      week: [\n        \"星期一\",\n        \"星期二\",\n        \"星期三\",\n        \"星期四\",\n        \"星期五\",\n        \"星期六\",\n        \"星期日\"\n      ],\n      category: [\"有氧課程\", \"瑜珈課程\", \"游泳課程\", \"飛輪課程\", \"其他課程\"],\n      coaches: [\n        \"Amy珊珊\",\n        \"CICI\",\n        \"Danny\",\n        \"Papaya\",\n        \"Peco\",\n        \"Ryan\",\n        \"小惠\",\n        \"張三豐\",\n        \"強森\",\n        \"海德\",\n        \"阿Ni\",\n        \"阿壯\"\n      ],\n      courseNew: {\n        title: \"\",\n        intro: \"\",\n        tags: [],\n        categorySelected: \"\",\n        coach: \"\",\n        week: \"\",\n        time: \"\",\n        quantity: null,\n        remainQuantity: null,\n        originPrice: null,\n        price: null,\n        discount: false,\n        imageUrl: \"\",\n        avgRating: 0\n      },\n      course: null,\n      tag: null,\n      modal: null,\n      titleMax: 25,\n      introMax: 80\n    };\n  },\n  validations: {\n    course: {\n      title: {\n        required,\n        maxLength: maxLength(24)\n      },\n      intro: {\n        required,\n        maxLength: maxLength(79)\n      },\n      categorySelected: {\n        required\n      },\n      coach: {\n        required\n      },\n      week: { required },\n      time: {\n        required\n      },\n      originPrice: { required, minValue: minValue(0) },\n      price: { required, minValue: minValue(0) },\n      quantity: { required, minValue: minValue(0) },\n      remainQuantity: { required, minValue: minValue(0) },\n      imageUrl: { required, url }\n    }\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    status() {\n      return this.$store.state.courses.status;\n    },\n    getCourse() {\n      return this.$store.state.courses.course;\n    },\n    getDownloadURL() {\n      return this.$store.state.downloadURL;\n    }\n  },\n  watch: {\n    //從編輯狀態切到新增狀態的話\n    status() {\n      if (this.status === \"新增課程\") {\n        this.course = { ...this.courseNew };\n      }\n    },\n    getDownloadURL() {\n      if (this.getDownloadURL) {\n        this.course.imageUrl = this.getDownloadURL;\n        this.updateCover = false;\n      }\n    }\n  },\n  methods: {\n    //新增課程\n    addCourse() {\n      this.$v.$touch();\n\n      if (this.$v.$invalid) {\n        this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n      } else {\n        this.$store\n          .dispatch(\"courses/createCourse\", { ...this.course })\n          .then(_ => {\n            this.$toasted.success(\"成功新增課程\", {\n              duration: 2000\n            });\n            this.$router.push({ name: \"coursesAdmin\" });\n          })\n          .catch(e => console.error(e.message));\n      }\n    },\n\n    //更新課程\n    updateCourse(id) {\n      this.$v.$touch();\n      if (!this.updateCover) {\n        if (this.$v.$invalid) {\n          this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n        } else {\n          this.$store\n            .dispatch(\"courses/updateCourse\", { id: id, course: this.course })\n            .then(_ => {\n              this.$toasted.success(\"更新成功!!\", {\n                duration: 2000\n              });\n              this.$router.push({ name: \"coursesAdmin\" });\n            });\n        }\n      }\n    },\n\n    //新增課程tag\n    addTags() {\n      if (this.tag) {\n        this.course.tags.push(this.tag);\n      }\n      this.tag = \"\";\n    },\n\n    //刪除tag\n    deleteTag(key) {\n      this.course.tags.splice(key, 1);\n    },\n\n    //上傳圖片\n    uploadImage(e) {\n      let file = e.target.files[0];\n      if (!file.type.includes(\"image\")) {\n        this.$toasted.error(\"請上傳圖片檔案\", { duration: 3000 });\n      } else {\n        this.updateCover = true;\n        this.$store.dispatch(\"updateFile\", { file: file, place: \"courses/\" });\n      }\n    }\n  },\n  created() {\n    this.$store.commit(\"setDownloadUrl\", null);\n\n    if (this.status === \"編輯課程\") {\n      this.course = { ...this.getCourse };\n    } else {\n      this.course = { ...this.courseNew };\n    }\n  }\n};\n</script>\n\n<style>\n#editor {\n  height: 250px;\n}\n</style>"]}]}