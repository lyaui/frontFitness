{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/Cart.vue","mtime":1580813947683},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport $ from \"jquery\";\nimport { fb, db } from \"@/firebase/init\";\nimport Swal from \"sweetalert2\";\nimport StepBar from \"@/components/StepBar\";\n\nexport default {\n  components: {\n    StepBar\n  },\n  data() {\n    return {\n      user: null,\n      coupon: false,\n      couponCode: null,\n      feeddback: null,\n      couponCourse: null,\n      status: \"cart\"\n    };\n  },\n  computed: {\n    totalPrice() {\n      return this.coupon\n        ? (this.total =\n            this.$store.getters.totalOrigin - this.$store.getters.totalCoupon)\n        : (this.total = this.$store.getters.totalOrigin);\n    },\n    remainZero() {\n      return this.$store.state.cart.find(course => course.remainQuantity === 0);\n    }\n  },\n  methods: {\n    addCouponCode() {\n      if (this.couponCode === \"LOVEFITTING\") {\n        if (this.$store.state.totalDiscount > 0) {\n          this.feeddback = \"已成功套用優惠券\";\n          this.coupon = true;\n        } else {\n          this.feeddback = \"無符合活動優惠之課程\";\n        }\n      } else {\n        this.feeddback = \"代碼不存在，請再次確認\";\n      }\n      this.$store.commit(\"addCouponCode\", this.coupon);\n    },\n    checkOut() {\n      if (this.user && this.$store.state.cart.length > 0) {\n        this.$router.push(\"/checkout\");\n      } else {\n        if (this.$store.state.cart.length === 0) {\n          Swal.fire({\n            title: \"請至少選擇一門課程\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 800\n          });\n        } else {\n          Swal.fire({\n            title: \"請先登入或註冊會員\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 800\n          });\n        }\n      }\n    }\n  },\n  created() {\n    this.user = fb.auth().currentUser;\n    this.$store.commit(\"totalPrice\");\n  }\n};\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <main class=\"courses-main\">\n      <div class=\"container\">\n        <step-bar :status=\"status\"></step-bar>\n        <div class=\"checkout\">\n          <div class=\"checkout__items\">\n            <div class=\"heading-tertiary--dark mb-sm\">\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中有 {{this.$store.state.cart.length}} 門課程\n            </div>\n            <ul class=\"checkout__list\">\n              <li class=\"cart__item\" v-for=\"course in this.$store.state.cart\" :key=\"course.id\">\n                <div class=\"d-flex\">\n                  <img class=\"cart__img\" :src=\"course.imageUrl\" :alt=\"course.title\">\n                  <router-link\n                    class=\"cart__link d-block-phone\"\n                    :to=\"{name:'CourseDetails',params:{course_name:course.title}}\"\n                  >\n                    <div class=\"cart__tag-box\">\n                      <div v-if=\"course.discount\" class=\"cart__tag\">精選課程</div>\n                      <span class=\"text-warning\" v-if=\"coupon&&course.discount\">已成功套用優惠券</span>\n                      <span class=\"text-warning\" v-if=\"course.remainQuantity===0\">此課程已額滿，請移除並選擇其他課程</span>\n                    </div>\n\n                    <div class=\"cart__title\">{{course.title}}</div>\n                  </router-link>\n                </div>\n\n                <div class=\"cart__info\">\n                  <router-link\n                    class=\"cart__link\"\n                    :to=\"{name:'CourseDetails',params:{course_name:course.title}}\"\n                  >\n                    <div class=\"cart__tag-box d-none-phone\">\n                      <div v-if=\"course.discount\" class=\"cart__tag\">精選課程</div>\n                      <span class=\"text-warning\" v-if=\"coupon&&course.discount\">已成功套用優惠券</span>\n                      <span class=\"text-warning\" v-if=\"course.remainQuantity===0\">此課程已額滿，請移除並選擇其他課程</span>\n                    </div>\n\n                    <div class=\"cart__title d-none-phone\">{{course.title}}</div>\n                    <div class=\"d-flex\">\n                      <div class=\"cart__category\">{{course.categorySelected}}｜</div>\n                      <div class=\"cart__coach\">{{course.coach}}｜</div>\n                      <div class=\"cart__time\">{{course.week}} {{course.time}}</div>\n                    </div>\n                  </router-link>\n                  <div class=\"cart__handle\">\n                    <div class=\"cart__price\">\n                      <div\n                        v-if=\"!coupon||!course.discount\"\n                        class=\"cart__price--origin\"\n                      >{{course.price|currency}}</div>\n                      <div\n                        v-if=\"coupon&&course.discount\"\n                        class=\"cart__price--origin\"\n                      >{{course.price-100|currency}}</div>\n                      <div\n                        class=\"cart__price--discount\"\n                        v-if=\"coupon&&course.discount\"\n                      >{{course.price|currency}}</div>\n                    </div>\n                    <button class=\"cart__remove btn\" @click=\"$store.commit('removeItem',course)\">\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"checkout__summary\">\n            <div class=\"checkout__summary-title heading-tertiary--dark\">訂單明細</div>\n\n            <div class=\"checkout__summary-price\">\n              <div>原價</div>\n              <div>{{$store.state.totalOrigin|currency}}</div>\n            </div>\n            <div class=\"checkout__summary-price\" v-if=\"coupon\">\n              <div>優惠券折扣</div>\n              <div>-{{$store.state.totalDiscount|currency}}</div>\n            </div>\n            <div class=\"checkout__summary-total\">\n              <div>總計</div>\n              <h3>{{$store.state.total|currency}}</h3>\n            </div>\n\n            <div class=\"checkout__coupon\">\n              <div class=\"form__label\">使用折扣代碼</div>\n              <div class=\"d-flex\">\n                <input\n                  class=\"checkout__coupon-code\"\n                  type=\"text\"\n                  v-model.trim=\"couponCode\"\n                  placeholder=\"請輸入優惠券\"\n                  :disabled=\"coupon\"\n                >\n\n                <button\n                  class=\"swal2-confirm swal2-styled checkout__coupon-btn\"\n                  style=\"display: inline-block; background-color: rgb(255, 87, 33); border-left-color: rgb(255, 87, 33); border-right-color: rgb(255, 87, 33);\"\n                  @click.prevent=\"addCouponCode()\"\n                  :disabled=\"coupon\"\n                  :style=\"coupon?{backgroundColor:'#aaaaaa'}:{backgroundColor:'#ff5721'}\"\n                >確定</button>\n              </div>\n              <span class=\"text-warning\">{{feeddback}}</span>\n            </div>\n\n            <button\n              class=\"swal2-confirm swal2-styled\"\n              style=\"display: inline-block; background-color: rgb(255, 87, 33); border-left-color: rgb(255, 87, 33); border-right-color: rgb(255, 87, 33);\"\n              :disabled=\"remainZero\"\n              :style=\"remainZero?{backgroundColor:'#aaaaaa'}:{backgroundColor:'#ff5721'}\"\n              @click=\"checkOut()\"\n            >\n              <template v-if=\"!remainZero\">確定結帳</template>\n              <template v-if=\"remainZero\">請刪除額滿課程</template>\n            </button>\n          </div>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport { fb, db } from \"@/firebase/init\";\nimport Swal from \"sweetalert2\";\nimport StepBar from \"@/components/StepBar\";\n\nexport default {\n  components: {\n    StepBar\n  },\n  data() {\n    return {\n      user: null,\n      coupon: false,\n      couponCode: null,\n      feeddback: null,\n      couponCourse: null,\n      status: \"cart\"\n    };\n  },\n  computed: {\n    totalPrice() {\n      return this.coupon\n        ? (this.total =\n            this.$store.getters.totalOrigin - this.$store.getters.totalCoupon)\n        : (this.total = this.$store.getters.totalOrigin);\n    },\n    remainZero() {\n      return this.$store.state.cart.find(course => course.remainQuantity === 0);\n    }\n  },\n  methods: {\n    addCouponCode() {\n      if (this.couponCode === \"LOVEFITTING\") {\n        if (this.$store.state.totalDiscount > 0) {\n          this.feeddback = \"已成功套用優惠券\";\n          this.coupon = true;\n        } else {\n          this.feeddback = \"無符合活動優惠之課程\";\n        }\n      } else {\n        this.feeddback = \"代碼不存在，請再次確認\";\n      }\n      this.$store.commit(\"addCouponCode\", this.coupon);\n    },\n    checkOut() {\n      if (this.user && this.$store.state.cart.length > 0) {\n        this.$router.push(\"/checkout\");\n      } else {\n        if (this.$store.state.cart.length === 0) {\n          Swal.fire({\n            title: \"請至少選擇一門課程\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 800\n          });\n        } else {\n          Swal.fire({\n            title: \"請先登入或註冊會員\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 800\n          });\n        }\n      }\n    }\n  },\n  created() {\n    this.user = fb.auth().currentUser;\n    this.$store.commit(\"totalPrice\");\n  }\n};\n</script>"]}]}