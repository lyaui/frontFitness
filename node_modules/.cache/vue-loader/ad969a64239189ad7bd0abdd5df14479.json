{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/Courses.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/Courses.vue","mtime":1583262753977},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CourseCard from \"@/components/CourseCard\";\nimport CourseList from \"@/components/CourseList\";\n\nexport default {\n  components: {\n    CourseCard,\n    CourseList\n  },\n  data() {\n    return {\n      selectedCat: \"\",\n      priceOrder: true,\n      ratingOrder: true,\n      searchShow: false,\n      searchWord: null,\n      keyWord: null,\n      showNavbar: true,\n      lastScrollPosition: 0,\n      count: 0,\n      infiniteData: [],\n      busy: false,\n      intro: null,\n      headerIntro: [\n        {\n          cat: \"所有課程\",\n          intro:\n            \"最豐富的運動課程，有氧、瑜珈、游泳、飛輪等多元項目給注重健康的你！\"\n        },\n        {\n          cat: \"有氧課程\",\n          intro:\n            \"最多元的有氧課程，放鬆愉快的上課方式，隨著音樂一起動，減脂甩肉好easy！\"\n        },\n        {\n          cat: \"瑜珈課程\",\n          intro:\n            \"OL下班最愛的運動！增強肌力柔軟度、矯正姿態，瘦身舒壓，為妳找回沉靜心靈。\"\n        },\n\n        {\n          cat: \"游泳課程\",\n          intro:\n            \"專業小班授課，自由式、蛙式、仰式、蝶式手把手教到會，零基礎也能身如蛟龍。\"\n        },\n        {\n          cat: \"飛輪課程\",\n          intro:\n            \"高效燃脂極速飆汗，增強肌力與心肺耐力，忙碌現代人最有效率的減脂方式！\"\n        },\n        {\n          cat: \"其他課程\",\n          intro: \"精選各式特殊運動，重訓、武術、桌球等...這裡通通有！\"\n        }\n      ]\n    };\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    courses() {\n      return this.$store.state.courses.courses;\n    }\n  },\n  methods: {\n    reset() {\n      this.searchShow = false;\n      this.searchWord = null;\n      this.search = [];\n      this.count = 0;\n      this.infiniteData = [];\n      this.intro = this.headerIntro.filter(\n        item => item.cat == this.selectedCat || \"所有課程\"\n      );\n    },\n\n    //選擇分類\n    selectCat(cat) {\n      this.reset();\n      this.selectedCat = cat;\n      this.$store.dispatch(\"courses/getCourses\", cat);\n    },\n\n    //sub-nav滾動\n    onScroll() {\n      const currentScrollPosition =\n        window.pageYOffset || document.documentElement.scrollTop;\n      if (currentScrollPosition < 0) {\n        return;\n      }\n      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {\n        return;\n      }\n      this.showNavbar = currentScrollPosition < this.lastScrollPosition;\n      this.lastScrollPosition = currentScrollPosition;\n    },\n\n    //往下滾動出現課程\n    loadMore() {\n      let arrayShow = this.courses;\n      if (this.infiniteData.length <= arrayShow.length) {\n        this.busy = true;\n\n        setTimeout(() => {\n          for (var i = 0, j = 5; i < j; i++) {\n            if (this.count === arrayShow.length) {\n              break;\n            }\n            this.infiniteData.push(arrayShow[this.count++]);\n          }\n          this.busy = false;\n        }, 500);\n      }\n    },\n\n    // searchCourse() {\n    //   if (this.searchWord) {\n    //     this.keyWord = this.searchWord;\n    //     this.reset();\n    //     this.searchShow = true;\n    //     db.collection(\"courses\")\n    //       .get()\n    //       .then(snapshot => {\n    //         snapshot.forEach(doc => {\n    //           let course = doc.data();\n    //           course.id = doc.id;\n    //           this.courses.push(course);\n    //         });\n    //       })\n    //       .then(() => {\n    //         this.courses =\n    //           this.courses.filter(course => course.title.match(this.keyWord)) ||\n    //           [];\n    //         this.loadMore();\n    //       });\n    //   }\n    // },\n    orderCourse(property, order) {\n      this.courses = order\n        ? this.courses.sort((a, b) => b[property] - a[property])\n        : this.courses.sort((a, b) => a[property] - b[property]);\n      this.count = 0;\n      this.infiniteData = [];\n      this.loadMore();\n    }\n  },\n\n  created() {\n    this.reset();\n    if (this.$store.state.courses.courses.length===[]) {\n      this.$store.dispatch(\"courses/getCourses\");\n    }\n  },\n\n  //scroll特效\n  mounted() {\n    window.addEventListener(\"scroll\", this.onScroll);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n};\n",{"version":3,"sources":["Courses.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Courses.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <loading :active.sync=\"isLoading\" :opacity=\".8\" :background-color=\"'#000'\" :color=\"'#ff5722'\"></loading>\n    <nav class=\"sub-nav\" :class=\"{'sub-nav--hidden': !showNavbar}\">\n      <ul class=\"sub-nav__list\">\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat===false}\"\n          @click.prevent=\"selectCat(false)\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-th-large\"></i>\n            <p>所有課程</p>\n          </a>\n        </li>\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat==='有氧課程'}\"\n          @click.prevent=\"selectCat('有氧課程')\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-bowling-ball\"></i>\n            <p>有氧課程</p>\n          </a>\n        </li>\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat==='瑜珈課程'}\"\n          @click.prevent=\"selectCat('瑜珈課程')\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-pray\"></i>\n            <p>瑜珈課程</p>\n          </a>\n        </li>\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat==='游泳課程'}\"\n          @click.prevent=\"selectCat('游泳課程')\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-swimmer\"></i>\n            <p>游泳課程</p>\n          </a>\n        </li>\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat==='飛輪課程'}\"\n          @click.prevent=\"selectCat('飛輪課程')\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-bicycle\"></i>\n            <p>飛輪課程</p>\n          </a>\n        </li>\n        <li\n          class=\"sub-nav__item\"\n          :class=\"{'sub-nav__item--active':selectedCat==='其他課程'}\"\n          @click.prevent=\"selectCat('其他課程')\"\n        >\n          <a class=\"sub-nav__link\">\n            <i class=\"fas fa-dumbbell\"></i>\n            <p>其他課程</p>\n          </a>\n        </li>\n      </ul>\n    </nav>\n    <main class=\"courses-main\">\n      <header class=\"courses-header\" v-if=\"!searchShow\">\n        <div class=\"container\">\n          <h2 class=\"courses-header__title\">{{intro[0].course}}</h2>\n          <p class=\"courses-header__text\">{{intro[0].intro}}</p>\n        </div>\n      </header>\n      <div class=\"container\">\n        <!-- 精選課程 -->\n        <section v-if=\"!searchShow\">\n          <div class=\"section-title\">\n            <h2 class=\"section-title__name\">精選{{selectedCat?selectedCat:'所有課程'}}</h2>\n          </div>\n          <transition name=\"slide-fade\">\n            <course-card v-if=\"courses.length>0\" :selectedCat=\"selectedCat\" :course-card=\"courses\"></course-card>\n          </transition>\n        </section>\n        <!-- filter&search tool bar-->\n        <!-- <section>\n          <div class=\"search-result\" v-if=\"searchShow\">\n            <div v-if=\"courses.length===0\">\n              <p>\n                抱歉，我們找不到有關「{{keyWord}}」的任何結果\n                <br>請嘗試調整您的搜索。以下是幾點建議：\n              </p>\n              <ul>\n                <li>確保所有單詞拼寫正確。</li>\n                <li>嘗試不同的搜索詞。</li>\n                <li>嘗試更常見的搜索詞。</li>\n              </ul>\n            </div>\n            <div v-if=\"courses.length>0\">關於「{{keyWord}}」的 {{courses.length}} 筆结果：</div>\n          </div>\n          <div class=\"section-title\" v-if=\"!searchShow\">\n            <h2 class=\"section-title__name\">全部{{selectedCat?selectedCat:'課程'}}</h2>\n          </div>\n          <div class=\"courses-filter\">\n            <div class=\"courses-filter__list\">\n              <div class=\"search\">\n                <input\n                  type=\"text\"\n                  class=\"search__input\"\n                  v-model.trim=\"searchWord\"\n                  placeholder=\"搜尋課程\"\n                  @keyup.enter=\"searchCourse()\"\n                >\n                <button class=\"search__button\" @click=\"searchCourse()\">\n                  <div class=\"search__icon\">\n                    <i class=\"fas fa-search\"></i>\n                  </div>\n                </button>\n              </div>\n\n              <div class=\"courses-filter__btn-group d-flex\">\n                <div class=\"courses-filter__item\">\n                  <button\n                    @click=\"priceOrder=!priceOrder;orderCourse('price',priceOrder)\"\n                    class=\"courses-filter__btn btn\"\n                  >\n                    <i v-if=\"priceOrder\" class=\"fas fa-chevron-down\"></i>\n                    <i v-else class=\"fas fa-chevron-up\"></i>\n                    價格\n                  </button>\n                </div>\n                <div class=\"courses-filter__item\">\n                  <button\n                    @click=\"ratingOrder=!ratingOrder;orderCourse('avgRating',ratingOrder)\"\n                    class=\"courses-filter__btn btn\"\n                  >\n                    <i v-if=\"ratingOrder\" class=\"fas fa-chevron-down\"></i>\n                    <i v-else class=\"fas fa-chevron-up\"></i>\n                    評等\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>-->\n\n        <!-- 全部課程 -->\n        <section>\n          <course-list :courses-list=\"infiniteData\" v-if=\"infiniteData.length>0\"></course-list>\n          <div\n            class=\"ifinite-scroll\"\n            v-infinite-scroll=\"loadMore\"\n            infinite-scroll-disabled=\"busy\"\n            infinite-scroll-distance=\"15\"\n            infinite-scroll-immediate-check=\"false\"\n          >\n            <i v-if=\"busy\" class=\"fas fa-spinner fa-spin\"></i>\n          </div>\n        </section>\n      </div>\n    </main>\n    <add-to-cart-modal></add-to-cart-modal>\n  </div>\n</template>\n\n<script>\nimport CourseCard from \"@/components/CourseCard\";\nimport CourseList from \"@/components/CourseList\";\n\nexport default {\n  components: {\n    CourseCard,\n    CourseList\n  },\n  data() {\n    return {\n      selectedCat: \"\",\n      priceOrder: true,\n      ratingOrder: true,\n      searchShow: false,\n      searchWord: null,\n      keyWord: null,\n      showNavbar: true,\n      lastScrollPosition: 0,\n      count: 0,\n      infiniteData: [],\n      busy: false,\n      intro: null,\n      headerIntro: [\n        {\n          cat: \"所有課程\",\n          intro:\n            \"最豐富的運動課程，有氧、瑜珈、游泳、飛輪等多元項目給注重健康的你！\"\n        },\n        {\n          cat: \"有氧課程\",\n          intro:\n            \"最多元的有氧課程，放鬆愉快的上課方式，隨著音樂一起動，減脂甩肉好easy！\"\n        },\n        {\n          cat: \"瑜珈課程\",\n          intro:\n            \"OL下班最愛的運動！增強肌力柔軟度、矯正姿態，瘦身舒壓，為妳找回沉靜心靈。\"\n        },\n\n        {\n          cat: \"游泳課程\",\n          intro:\n            \"專業小班授課，自由式、蛙式、仰式、蝶式手把手教到會，零基礎也能身如蛟龍。\"\n        },\n        {\n          cat: \"飛輪課程\",\n          intro:\n            \"高效燃脂極速飆汗，增強肌力與心肺耐力，忙碌現代人最有效率的減脂方式！\"\n        },\n        {\n          cat: \"其他課程\",\n          intro: \"精選各式特殊運動，重訓、武術、桌球等...這裡通通有！\"\n        }\n      ]\n    };\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    courses() {\n      return this.$store.state.courses.courses;\n    }\n  },\n  methods: {\n    reset() {\n      this.searchShow = false;\n      this.searchWord = null;\n      this.search = [];\n      this.count = 0;\n      this.infiniteData = [];\n      this.intro = this.headerIntro.filter(\n        item => item.cat == this.selectedCat || \"所有課程\"\n      );\n    },\n\n    //選擇分類\n    selectCat(cat) {\n      this.reset();\n      this.selectedCat = cat;\n      this.$store.dispatch(\"courses/getCourses\", cat);\n    },\n\n    //sub-nav滾動\n    onScroll() {\n      const currentScrollPosition =\n        window.pageYOffset || document.documentElement.scrollTop;\n      if (currentScrollPosition < 0) {\n        return;\n      }\n      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {\n        return;\n      }\n      this.showNavbar = currentScrollPosition < this.lastScrollPosition;\n      this.lastScrollPosition = currentScrollPosition;\n    },\n\n    //往下滾動出現課程\n    loadMore() {\n      let arrayShow = this.courses;\n      if (this.infiniteData.length <= arrayShow.length) {\n        this.busy = true;\n\n        setTimeout(() => {\n          for (var i = 0, j = 5; i < j; i++) {\n            if (this.count === arrayShow.length) {\n              break;\n            }\n            this.infiniteData.push(arrayShow[this.count++]);\n          }\n          this.busy = false;\n        }, 500);\n      }\n    },\n\n    // searchCourse() {\n    //   if (this.searchWord) {\n    //     this.keyWord = this.searchWord;\n    //     this.reset();\n    //     this.searchShow = true;\n    //     db.collection(\"courses\")\n    //       .get()\n    //       .then(snapshot => {\n    //         snapshot.forEach(doc => {\n    //           let course = doc.data();\n    //           course.id = doc.id;\n    //           this.courses.push(course);\n    //         });\n    //       })\n    //       .then(() => {\n    //         this.courses =\n    //           this.courses.filter(course => course.title.match(this.keyWord)) ||\n    //           [];\n    //         this.loadMore();\n    //       });\n    //   }\n    // },\n    orderCourse(property, order) {\n      this.courses = order\n        ? this.courses.sort((a, b) => b[property] - a[property])\n        : this.courses.sort((a, b) => a[property] - b[property]);\n      this.count = 0;\n      this.infiniteData = [];\n      this.loadMore();\n    }\n  },\n\n  created() {\n    this.reset();\n    if (this.$store.state.courses.courses.length===[]) {\n      this.$store.dispatch(\"courses/getCourses\");\n    }\n  },\n\n  //scroll特效\n  mounted() {\n    window.addEventListener(\"scroll\", this.onScroll);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n};\n</script>\n"]}]}