{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/components/NavBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/components/NavBar.vue","mtime":1582626949352},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { db } from \"@/firebase/init\";\nimport \"firebase/auth\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\n\nconst Toast = Swal.mixin({\n  toast: true,\n  position: 'top-end',\n  showConfirmButton: true,\n  timer: 2000,\n  timerProgressBar: true,\n  onOpen: (toast) => {\n    toast.addEventListener('mouseenter', Swal.stopTimer)\n    toast.addEventListener('mouseleave', Swal.resumeTimer)\n  }\n})\n\nexport default {\n  data() {\n    return {\n      form: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        passwordComfirmation: \"\",\n        img: \"https://png2.pngtree.com/svg/20161215/9bc7bae28b.png\"\n      },\n      user: [],\n      status: \"\"\n    };\n  },\n  validations: {\n    form: {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      passwordComfirmation: \"\"\n    }\n  },\n  methods: {\n    reset() {\n      this.form.name = \"\";\n      this.form.email = \"\";\n      this.form.password = \"\";\n      this.form.passwordComfirmation = \"\";\n    },\n\n    //選擇類別\n    selectCat(cat) {\n      this.$store\n        .dispatch(\"courses/getCourses\", cat)\n        .then(_ => this.$router.push(\"/courses\"));\n    },\n\n    //註冊\n    handleRegister() {\n      this.$store\n        .dispatch(\"auth/signUp\", this.form)\n        .then(async user => {\n          await this.$store.dispatch(\"auth/createUserProfile\", {\n            uid: user.uid,\n            userProfile: {\n              fullName: this.form.fullName,\n              avatar: this.form.avatar,\n              user: user.uid,\n              credit: 50\n            }\n          });\n        })\n        .catch(errorMessage => {});\n    },\n\n    //登出\n    logOut() {\n      Toast.fire({\n            icon: \"success\",\n            title: \"成功登出\"\n          })\n      // this.$store\n      //   .dispatch(\"auth/signOut\")\n      //   .then(_ =>\n      //     Toast.fire({\n      //       icon: \"success\",\n      //       title: \"成功登出\"\n      //     })\n      //   )\n      //   .catch(err => {\n      //     console.error(err);\n      //     this.isLoggedOut = false;\n      //   });\n    },\n    //\n    signup() {\n      if (this.name && this.email && this.password) {\n        firebase\n          .auth()\n          .createUserWithEmailAndPassword(this.email, this.password)\n          .then(user => {\n            db.collection(\"users\")\n              .doc(user.user.uid)\n              .set({\n                //註冊資料\n                name: this.name,\n                email: this.email,\n                userId: user.user.uid,\n                userImg: this.img\n              });\n          })\n          .then(() => {\n            this.reset();\n            this.$modal.hide(\"logRegModal\");\n            Swal.fire({\n              type: \"success\",\n              title: `註冊成功！`,\n              showConfirmButton: false,\n              timer: 1500\n            });\n          })\n          .catch(err => {\n            console.log(err);\n            this.feedback = err.message;\n            //https://stackoverflow.com/questions/42439504/firebase-error-messages-in-different-languages\n          });\n      } else {\n        this.feedback = \"請輸入完整資料\";\n      }\n    },\n    login() {\n      if (this.password && this.email) {\n        firebase\n          .auth()\n          .signInWithEmailAndPassword(this.email, this.password)\n          .then(user => {\n            console.log(user);\n            this.reset();\n            this.$modal.hide(\"logRegModal\");\n            Swal.fire({\n              type: \"success\",\n              title: `登入成功！`,\n              showConfirmButton: false,\n              timer: 1500\n            });\n          })\n          .catch(err => {\n            // if ((err = \"auth/wrong-password\")) {\n            //   this.feedback = \"yoooo\";\n            // }\n\n            this.feedback = err.message;\n          });\n      } else {\n        this.feedback = \"請輸入完整資料\";\n      }\n    },\n\n    // logOut() {\n    //   firebase\n    //     .auth()\n    //     .signOut()\n    //     .then(() => {\n    //       this.$router.push({ name: \"home\" });\n    //     });\n    // },\n\n    show(status) {\n      this.$modal.show(\"logRegModal\");\n    },\n    hide() {\n      this.reset();\n      this.$modal.hide(\"logRegModal\");\n    }\n  },\n  created() {\n    // //確認登入狀態\n    // let user = fb.auth().currentUser;\n    // if (user) {\n    //   //登入時的user讀取資料中\n    //   this.user = user;\n    //   db.collection(\"users\")\n    //     .doc(user.uid)\n    //     .get()\n    //     .then(user => {\n    //       this.user = user.data();\n    //     });\n    // } else {\n    //   this.user = null;\n    // }\n  }\n};\n",{"version":3,"sources":["NavBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NavBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <nav class=\"navigation navigation-dark\">\n    <ul class=\"head-nav\">\n      <li class=\"head-nav__item\">\n        <router-link to=\"/\">\n          <div class=\"logo-box\">frontFitness</div>\n        </router-link>\n      </li>\n\n      <li class=\"head-nav__item d-none-phone\">\n        <div class=\"head-nav__link btn\" @click.prevent=\"selectCat(false);\">\n          <i class=\"fas fa-th-large\"></i> 探索課程\n        </div>\n      </li>\n    </ul>\n    <ul class=\"head-nav\">\n      <li class=\"head-nav__item d-none-phone\" v-if=\"!user\">\n        <div class=\"head-nav__link btn\" @click=\"show();status='註冊'\">註冊</div>\n      </li>\n      <li class=\"head-nav__item d-none-phone\" v-if=\"!user\">\n        <div class=\"head-nav__link btn\" @click=\"show();status='登入'\">登入</div>\n      </li>\n\n      <!-- <li class=\"head-nav__item cart-btn d-none-phone\">\n        <router-link to=\"/cart\" class=\"head-nav__link head-nav__user btn\">\n          <i class=\"fas fa-shopping-cart fa-lg\"></i>\n          <div class=\"cart-qty\">{{this.$store.state.cart.length}}</div>\n        </router-link>\n      </li>-->\n      <li class=\"head-nav__item d-none-phone cart-btn\" v-if=\"user\">\n        <router-link to=\"/admin/overview\" class=\"head-nav__link head-nav__user btn\">\n          <img class=\"head-nav__user-img\" :src=\"user.userImg\">\n          <span class=\"head-nav__user-name\">{{user.name}}</span>\n        </router-link>\n      </li>\n      <li class=\"head-nav__item d-none-phone\" v-if=\"user\">\n        <div class=\"head-nav__link btn\" @click=\"logOut()\">登出</div>\n      </li>\n      <li class=\"head-nav__item d-block-phone\">\n        <div class=\"res-nav\">\n          <input type=\"checkbox\" class=\"res-nav__checkbox\" id=\"navi-toggle\">\n          <label for=\"navi-toggle\" class=\"res-nav__button\">\n            <span class=\"res-nav__icon\"></span>\n          </label>\n          <div class=\"res-nav__background\"></div>\n\n          <nav class=\"res-nav__nav\">\n            <div class=\"res-nav__list\">\n              <div class=\"mb-sm d-flex\">\n                <div class=\"res-nav__item\" v-if=\"!user\">\n                  <div class=\"res-nav__link-logreg btn\" @click=\"show();status='註冊'\">\n                    <i class=\"fas fa-user-plus\"></i>\n                    <p>註冊</p>\n                  </div>\n                </div>\n                <div class=\"res-nav__item\" v-if=\"!user\">\n                  <div class=\"res-nav__link-logreg btn\" @click=\"show();status='登入'\">\n                    <i class=\"fas fa-sign-in-alt\"></i>\n                    <p>登入</p>\n                  </div>\n                </div>\n\n                <!-- <div class=\"cart-btn\" v-if=\"user\">\n                  <router-link to=\"/admin/overview\" class=\"head-nav__user btn\">\n                    <img class=\"res-nav__user-img\" :src=\"user.userImg\">\n                    <span class=\"res-nav__user-name\">{{user.name}}</span>\n                  </router-link>\n                </div>-->\n              </div>\n              <ul>\n                <!-- <li class=\"res-nav__item cart-btn\">\n                  <router-link to=\"/cart\" class=\"head-nav__user\">\n                    <i class=\"fas fa-shopping-cart fa-lg\"></i> 購物車\n                    <div class=\"cart-qty\">{{this.$store.state.cart.length}}</div>\n                  </router-link>\n                </li>-->\n\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('所有課程');\">\n                  <i class=\"fas fa-th-large\"></i>\n                  <p>所有課程 ALL COURSES</p>\n                </li>\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('有氧課程');\">\n                  <i class=\"fas fa-bowling-ball\"></i>\n                  <p>有氧課程 Aerobic course</p>\n                </li>\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('瑜珈課程');\">\n                  <i class=\"fas fa-pray\"></i>\n                  <p>瑜珈課程 yoga course</p>\n                </li>\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('游泳課程');\">\n                  <i class=\"fas fa-swimmer\"></i>\n                  <p>游泳課程 swimming course</p>\n                </li>\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('飛輪課程');\">\n                  <i class=\"fas fa-bicycle\"></i>\n                  <p>飛輪課程 spinning bike course</p>\n                </li>\n                <li class=\"res-nav__item\" @click.prevent=\"selectCat('其他課程');\">\n                  <i class=\"fas fa-dumbbell\"></i>\n                  <p>其他課程 others</p>\n                </li>\n              </ul>\n            </div>\n            <div class=\"res-nav__link-logout\" v-if=\"user\" @click=\"logOut()\">\n              <i class=\"fas fa-sign-out-alt\"></i>\n            </div>\n          </nav>\n        </div>\n      </li>\n    </ul>\n    <!-- modal -->\n    <modal name=\"logRegModal\" width=\"330px\" height=\"auto\">\n      <div class=\"log-reg-modal\">\n        <div class=\"log-reg-modal__tab\">\n          <button\n            class=\"btn log-reg-modal__tab-btn\"\n            @click=\"status='註冊';reset()\"\n            :class=\"{'log-reg-modal__tab-btn--active':status==='註冊'}\"\n          >\n            <i class=\"fas fa-user-plus\"></i> 註冊會員\n          </button>\n          <button\n            class=\"btn log-reg-modal__tab-btn\"\n            @click=\"status='登入';reset()\"\n            :class=\"{'log-reg-modal__tab-btn--active':status==='登入'}\"\n          >\n            <i class=\"fas fa-sign-in-alt\"></i> 登入會員\n          </button>\n        </div>\n\n        <div class=\"log-reg-panel mt-sm\">\n          <form class @submit.prevent=\"signup\">\n            <div class=\"form__group d-flex\" v-if=\"status==='註冊'\">\n              <label class=\"form__label\" for=\"reg-name\">\n                <i class=\"fas fa-user\"></i>\n              </label>\n              <input\n                class=\"form__input\"\n                type=\"text\"\n                placeholder=\"名稱 *\"\n                v-model=\"name\"\n                id=\"reg-name\"\n                required\n                @keydown.enter=\"signup\"\n              >\n            </div>\n            <div class=\"form__group d-flex\">\n              <label class=\"form__label\" for=\"reg-email\">\n                <i class=\"fas fa-envelope\"></i>\n              </label>\n              <input\n                class=\"contact-form__input form__input\"\n                type=\"text\"\n                placeholder=\"電子信箱 *\"\n                v-model=\"email\"\n                id=\"reg-email\"\n                required\n                @keydown.enter=\"signup\"\n              >\n            </div>\n\n            <div class=\"form__group d-flex\">\n              <label class=\"form__label\" for=\"reg-password\">\n                <i class=\"fas fa-lock\"></i>\n              </label>\n              <input\n                class=\"contact-form__input form__input\"\n                type=\"password\"\n                placeholder=\"密碼 *\"\n                v-model=\"password\"\n                id=\"reg-password\"\n                required\n                @keydown.enter=\"signup\"\n              >\n            </div>\n            <div class=\"form__group d-flex\">\n              <label class=\"form__label\" for=\"reg-password\">\n                <i class=\"fas fa-unlock-alt\"></i>\n              </label>\n              <input\n                class=\"contact-form__input form__input\"\n                type=\"password\"\n                placeholder=\"密碼確認 *\"\n                v-model=\"password\"\n                id=\"reg-password\"\n                required\n                @keydown.enter=\"signup\"\n              >\n            </div>\n\n            <p v-if=\"feedback\">{{feedback}}</p>\n            <div class=\"form__group\">\n              <button\n                v-if=\"status==='註冊'\"\n                @click=\"signup()\"\n                class=\"swal2-confirm swal2-styled\"\n                style=\"display: inline-block; background-color: rgb(255, 87, 33); border-left-color: rgb(255, 87, 33); border-right-color: rgb(255, 87, 33);\"\n              >註冊</button>\n              <button\n                v-if=\"status==='登入'\"\n                @click=\"login()\"\n                class=\"swal2-confirm swal2-styled\"\n                style=\"display: inline-block; background-color: rgb(255, 87, 33); border-left-color: rgb(255, 87, 33); border-right-color: rgb(255, 87, 33);\"\n              >登入</button>\n              <button class=\"btn\"></button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </modal>\n  </nav>\n</template>\n\n<script>\nimport { db } from \"@/firebase/init\";\nimport \"firebase/auth\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\n\nconst Toast = Swal.mixin({\n  toast: true,\n  position: 'top-end',\n  showConfirmButton: true,\n  timer: 2000,\n  timerProgressBar: true,\n  onOpen: (toast) => {\n    toast.addEventListener('mouseenter', Swal.stopTimer)\n    toast.addEventListener('mouseleave', Swal.resumeTimer)\n  }\n})\n\nexport default {\n  data() {\n    return {\n      form: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        passwordComfirmation: \"\",\n        img: \"https://png2.pngtree.com/svg/20161215/9bc7bae28b.png\"\n      },\n      user: [],\n      status: \"\"\n    };\n  },\n  validations: {\n    form: {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      passwordComfirmation: \"\"\n    }\n  },\n  methods: {\n    reset() {\n      this.form.name = \"\";\n      this.form.email = \"\";\n      this.form.password = \"\";\n      this.form.passwordComfirmation = \"\";\n    },\n\n    //選擇類別\n    selectCat(cat) {\n      this.$store\n        .dispatch(\"courses/getCourses\", cat)\n        .then(_ => this.$router.push(\"/courses\"));\n    },\n\n    //註冊\n    handleRegister() {\n      this.$store\n        .dispatch(\"auth/signUp\", this.form)\n        .then(async user => {\n          await this.$store.dispatch(\"auth/createUserProfile\", {\n            uid: user.uid,\n            userProfile: {\n              fullName: this.form.fullName,\n              avatar: this.form.avatar,\n              user: user.uid,\n              credit: 50\n            }\n          });\n        })\n        .catch(errorMessage => {});\n    },\n\n    //登出\n    logOut() {\n      Toast.fire({\n            icon: \"success\",\n            title: \"成功登出\"\n          })\n      // this.$store\n      //   .dispatch(\"auth/signOut\")\n      //   .then(_ =>\n      //     Toast.fire({\n      //       icon: \"success\",\n      //       title: \"成功登出\"\n      //     })\n      //   )\n      //   .catch(err => {\n      //     console.error(err);\n      //     this.isLoggedOut = false;\n      //   });\n    },\n    //\n    signup() {\n      if (this.name && this.email && this.password) {\n        firebase\n          .auth()\n          .createUserWithEmailAndPassword(this.email, this.password)\n          .then(user => {\n            db.collection(\"users\")\n              .doc(user.user.uid)\n              .set({\n                //註冊資料\n                name: this.name,\n                email: this.email,\n                userId: user.user.uid,\n                userImg: this.img\n              });\n          })\n          .then(() => {\n            this.reset();\n            this.$modal.hide(\"logRegModal\");\n            Swal.fire({\n              type: \"success\",\n              title: `註冊成功！`,\n              showConfirmButton: false,\n              timer: 1500\n            });\n          })\n          .catch(err => {\n            console.log(err);\n            this.feedback = err.message;\n            //https://stackoverflow.com/questions/42439504/firebase-error-messages-in-different-languages\n          });\n      } else {\n        this.feedback = \"請輸入完整資料\";\n      }\n    },\n    login() {\n      if (this.password && this.email) {\n        firebase\n          .auth()\n          .signInWithEmailAndPassword(this.email, this.password)\n          .then(user => {\n            console.log(user);\n            this.reset();\n            this.$modal.hide(\"logRegModal\");\n            Swal.fire({\n              type: \"success\",\n              title: `登入成功！`,\n              showConfirmButton: false,\n              timer: 1500\n            });\n          })\n          .catch(err => {\n            // if ((err = \"auth/wrong-password\")) {\n            //   this.feedback = \"yoooo\";\n            // }\n\n            this.feedback = err.message;\n          });\n      } else {\n        this.feedback = \"請輸入完整資料\";\n      }\n    },\n\n    // logOut() {\n    //   firebase\n    //     .auth()\n    //     .signOut()\n    //     .then(() => {\n    //       this.$router.push({ name: \"home\" });\n    //     });\n    // },\n\n    show(status) {\n      this.$modal.show(\"logRegModal\");\n    },\n    hide() {\n      this.reset();\n      this.$modal.hide(\"logRegModal\");\n    }\n  },\n  created() {\n    // //確認登入狀態\n    // let user = fb.auth().currentUser;\n    // if (user) {\n    //   //登入時的user讀取資料中\n    //   this.user = user;\n    //   db.collection(\"users\")\n    //     .doc(user.uid)\n    //     .get()\n    //     .then(user => {\n    //       this.user = user.data();\n    //     });\n    // } else {\n    //   this.user = null;\n    // }\n  }\n};\n</script>"]}]}