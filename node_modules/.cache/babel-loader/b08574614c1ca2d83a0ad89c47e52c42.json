{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/frontend/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/frontend/Cart.vue","mtime":1584965838467},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport StepBar from '@/components/StepBar';\nexport default {\n  name: 'Cart',\n  components: {\n    StepBar: StepBar\n  },\n  data: function data() {\n    return {\n      status: 'cart',\n      coupon: false,\n      couponCode: null,\n      couponCourse: null\n    };\n  },\n  computed: {\n    user: function user() {\n      return this.$store.state.auth.user;\n    },\n    cartCourses: function cartCourses() {\n      return this.$store.state.cart.cart;\n    },\n    // 計算價格相關\n    total: function total() {\n      return this.$store.state.cart.total;\n    },\n    // 折扣訊息\n    feedback: function feedback() {\n      // 沒輸入折扣代碼\n      if (!this.couponCode) {\n        return null;\n      } // 錯的折扣代碼\n\n\n      if (this.couponCode !== 'LOVEFITTING') {\n        return '代碼不存在 請再次確認';\n      } // 有折扣代碼課程\n\n\n      if (this.total.totalDiscount !== 0) {\n        return '已成功套用優惠券';\n      } // 無折扣代碼課程\n\n\n      return '無符合活動優惠之課程';\n    },\n    // 是否成功使用優惠券狀態\n    discounted: function discounted() {\n      return this.$store.state.cart.coupon;\n    }\n  },\n  watch: {\n    // 輸入成功時就會送出折扣碼\n    couponCode: function couponCode() {\n      if (this.couponCode === 'LOVEFITTING') {\n        this.coupon = true;\n        this.$store.commit('cart/addCouponCode', this.coupon);\n      } // 計算總價\n\n\n      this.$store.commit('cart/total');\n    }\n  },\n  methods: {\n    // 移除課程\n    deleteCourse: function deleteCourse(course) {\n      this.$store.commit('cart/removeItem', course); // 計算總價\n\n      this.$store.commit('cart/total');\n    },\n    selectCat: function selectCat(cat) {\n      var _this = this;\n\n      this.$store.dispatch('courses/getCourses', cat).then(function () {\n        return _this.$router.push('/courses');\n      });\n    },\n    // 下一步\n    checkOut: function checkOut() {\n      if (this.user && this.cartCourses.length > 0) {\n        // 創建暫時訂單\n        this.$store.commit('checkout/setPayment', {\n          courses: this.cartCourses,\n          total: this.total\n        });\n        this.$router.push('/checkout');\n      } else {\n        this.$toasted.error('請先登入或註冊會員', {\n          duration: 3000\n        });\n      }\n    }\n  },\n  created: function created() {\n    // 初始設定coupon是false，離開頁面就折扣就會消失\n    this.$store.commit('cart/addCouponCode', this.coupon);\n    this.$store.commit('cart/total');\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <main class=\"courses-main\">\n      <div class=\"container\">\n        <step-bar :status=\"status\"></step-bar>\n        <div class=\"checkout\">\n          <div class=\"checkout__items\">\n            <div\n              class=\"heading-tertiary--dark mb-sm\"\n              v-if=\"cartCourses.length > 0\"\n            >\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中有 {{ cartCourses.length }} 門課程\n            </div>\n            <div class=\"heading-tertiary--dark mb-sm\" v-else>\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中尚無課程！\n              <button\n                class=\"btn heading-tertiary--dark\"\n                @click.prevent=\"selectCat('所有課程')\"\n              >\n                <u>速選購</u>\n              </button>\n              &#128170;\n            </div>\n            <ul class=\"checkout__list\">\n              <li\n                class=\"cart__item\"\n                v-for=\"course in cartCourses\"\n                :key=\"course.id\"\n              >\n                <div class=\"d-flex\">\n                  <img\n                    class=\"cart__img\"\n                    :src=\"course.imageUrl\"\n                    :alt=\"course.title\"\n                  />\n                </div>\n\n                <div class=\"cart__info\">\n                  <router-link\n                    class=\"cart__link\"\n                    :to=\"{\n                      name: 'CourseDetails',\n                      params: { course_id: course.id },\n                    }\"\n                  >\n                    <div class=\"cart__tag-box d-none-phone\">\n                      <div v-if=\"course.discount\" class=\"cart__tag\">\n                        精選課程\n                      </div>\n                      <span\n                        class=\"text-warning\"\n                        v-if=\"discounted && course.discount\"\n                        >已成功套用優惠券</span\n                      >\n                    </div>\n\n                    <div class=\"cart__title d-none-phone\">\n                      {{ course.title }}\n                    </div>\n                    <div class=\"d-flex\">\n                      <div class=\"cart__category\">\n                        {{ course.categorySelected }}｜\n                      </div>\n                      <div class=\"cart__coach\">{{ course.coach }}｜</div>\n                      <div class=\"cart__time\">\n                        {{ course.week }} {{ course.time }}\n                      </div>\n                    </div>\n                  </router-link>\n                  <div class=\"cart__handle\">\n                    <div class=\"cart__price\">\n                      <!-- 沒有使用優惠券時的價格（橘字） -->\n                      <div v-if=\"!discounted\" class=\"cart__price--origin\">\n                        {{ course.price | currency }}\n                      </div>\n                      <!-- 使用優惠券-->\n                      <template v-if=\"discounted\">\n                        <template v-if=\"course.discount\">\n                          <!-- 有優惠的課程(橘字) -->\n                          <div class=\"cart__price--origin\">\n                            {{ (course.price - 100) | currency }}\n                          </div>\n                          <!-- 原價（刪除線） -->\n                          <div class=\"cart__price--discount\">\n                            {{ course.price | currency }}\n                          </div>\n                        </template>\n                        <!-- 沒有優惠的課程 -->\n                        <template v-if=\"!course.discount\">\n                          <div class=\"cart__price--origin\">\n                            {{ course.price | currency }}\n                          </div>\n                        </template>\n                      </template>\n                    </div>\n                    <button\n                      class=\"cart__remove btn\"\n                      @click=\"deleteCourse(course)\"\n                    >\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"checkout__summary\">\n            <div class=\"checkout__summary-title heading-tertiary--dark\">\n              訂單明細\n            </div>\n\n            <div class=\"checkout__summary-price\">\n              <div>原價</div>\n              <div>{{ total.totalOrigin | currency }}</div>\n            </div>\n            <div class=\"checkout__summary-price\" v-if=\"discounted\">\n              <div>優惠券折扣</div>\n              <div>-{{ total.totalDiscount | currency }}</div>\n            </div>\n            <div class=\"checkout__summary-total\">\n              <div>總計</div>\n              <h3>{{ total.totalPrice | currency }}</h3>\n            </div>\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"form__label\">使用折扣代碼</div>\n                <input\n                  class=\"mb-sm form__input\"\n                  type=\"text\"\n                  v-model.trim=\"couponCode\"\n                  placeholder=\"請輸入優惠券\"\n                  :disabled=\"couponCode === 'LOVEFITTING'\"\n                />\n                <span class=\"text-warning\">{{ feedback }}</span>\n              </div>\n            </div>\n\n            <button\n              v-if=\"cartCourses.length > 0\"\n              class=\"btn btn-primary\"\n              @click=\"checkOut()\"\n            >\n              確定結帳\n            </button>\n            <button\n              v-else\n              class=\"btn btn-primary--cancel\"\n              style=\"margin:0\"\n              @click=\"selectCat('所有課程')\"\n            >\n              請先選購課程\n            </button>\n          </div>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport StepBar from '@/components/StepBar';\n\nexport default {\n  name: 'Cart',\n  components: {\n    StepBar,\n  },\n  data() {\n    return {\n      status: 'cart',\n      coupon: false,\n      couponCode: null,\n      couponCourse: null,\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.auth.user;\n    },\n    cartCourses() {\n      return this.$store.state.cart.cart;\n    },\n\n    // 計算價格相關\n    total() {\n      return this.$store.state.cart.total;\n    },\n\n    // 折扣訊息\n    feedback() {\n      // 沒輸入折扣代碼\n      if (!this.couponCode) {\n        return null;\n      }\n      // 錯的折扣代碼\n      if (this.couponCode !== 'LOVEFITTING') {\n        return '代碼不存在 請再次確認';\n      }\n      // 有折扣代碼課程\n      if (this.total.totalDiscount !== 0) {\n        return '已成功套用優惠券';\n      }\n      // 無折扣代碼課程\n      return '無符合活動優惠之課程';\n    },\n\n    // 是否成功使用優惠券狀態\n    discounted() {\n      return this.$store.state.cart.coupon;\n    },\n  },\n  watch: {\n    // 輸入成功時就會送出折扣碼\n    couponCode() {\n      if (this.couponCode === 'LOVEFITTING') {\n        this.coupon = true;\n        this.$store.commit('cart/addCouponCode', this.coupon);\n      }\n      // 計算總價\n      this.$store.commit('cart/total');\n    },\n  },\n  methods: {\n    // 移除課程\n    deleteCourse(course) {\n      this.$store.commit('cart/removeItem', course);\n      // 計算總價\n      this.$store.commit('cart/total');\n    },\n    selectCat(cat) {\n      this.$store\n        .dispatch('courses/getCourses', cat)\n        .then(() => this.$router.push('/courses'));\n    },\n\n    // 下一步\n    checkOut() {\n      if (this.user && this.cartCourses.length > 0) {\n        // 創建暫時訂單\n        this.$store.commit('checkout/setPayment', {\n          courses: this.cartCourses,\n          total: this.total,\n        });\n        this.$router.push('/checkout');\n      } else {\n        this.$toasted.error('請先登入或註冊會員', { duration: 3000 });\n      }\n    },\n  },\n\n  created() {\n    // 初始設定coupon是false，離開頁面就折扣就會消失\n    this.$store.commit('cart/addCouponCode', this.coupon);\n    this.$store.commit('cart/total');\n  },\n};\n</script>\n"],"sourceRoot":"src/views/frontend"}]}