{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/backend/Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/backend/Orders.vue","mtime":1584965825460},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nexport default {\n  name: 'Orders',\n  data: function data() {\n    return {\n      showDetail: false,\n      payment: null\n    };\n  },\n  computed: {\n    isLoading: function isLoading() {\n      return this.$store.state.isLoading;\n    },\n    payments: function payments() {\n      return this.$store.state.checkout.payments;\n    }\n  },\n  methods: {\n    time: function time(num) {\n      return moment(num).format('YYYY/MM/DD HH:mm');\n    },\n    show: function show(payment) {\n      this.payment = payment;\n      this.$modal.show('payment-detail');\n    },\n    hide: function hide() {\n      this.showDetail = false;\n      this.$modal.hide('payment-detail');\n    }\n  },\n  created: function created() {\n    this.$store.dispatch('checkout/getPayments');\n  }\n};",{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,QAAA;AACA;AANA,GARA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,GADA,EACA;AACA,aAAA,MAAA,CAAA,GAAA,CAAA,CAAA,MAAA,CAAA,kBAAA,CAAA;AACA,KAHA;AAIA,IAAA,IAJA,gBAIA,OAJA,EAIA;AACA,WAAA,OAAA,GAAA,OAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,gBAAA;AACA,KAPA;AAQA,IAAA,IARA,kBAQA;AACA,WAAA,UAAA,GAAA,KAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,gBAAA;AACA;AAXA,GAhBA;AA6BA,EAAA,OA7BA,qBA6BA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,sBAAA;AACA;AA/BA,CAAA","sourcesContent":["<template>\n  <div>\n    <loading\n      :active.sync=\"isLoading\"\n      :opacity=\"0.8\"\n      :background-color=\"'#000'\"\n      :color=\"'#ff5722'\"\n    ></loading>\n    <h2 class=\"heading-secondary\">訂單列表</h2>\n    <table class=\"admin-table\">\n      <thead>\n        <tr>\n          <th class=\"d-none-phone\">訂單成立</th>\n          <th>訂單編號</th>\n          <th class=\"d-none-phone\">姓名</th>\n          <th class=\"d-none-phone\">應付金額</th>\n          <th>狀態</th>\n          <th>詳情</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr\n          v-for=\"(payment, index) in payments\"\n          :class=\"{ 'lighten-row': index % 2 == 1 }\"\n          :key=\"payment.id\"\n        >\n          <td class=\"d-none-phone\">{{ time(payment.createdAt) }}</td>\n          <td style=\"text-align:left;padding-left:20px\">{{ payment.id }}</td>\n          <td class=\"d-none-phone\">{{ payment.user.name }}</td>\n          <td class=\"d-none-phone\">\n            {{ payment.total.totalPrice | currency }}\n          </td>\n          <td>\n            <template v-if=\"payment.status === '尚未付款'\">\n              <i class=\"fas fa-exclamation-triangle\" style=\"color:#ff5721\"></i>\n              尚未付款\n            </template>\n            <template v-if=\"payment.status === '付款完成'\">\n              <i class=\"fas fa-check-circle\" style=\"color:#0fc195\"></i> 付款完成\n            </template>\n          </td>\n          <td>\n            <button class=\"admin-btn btn\" @click=\"show(payment)\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- detail modal -->\n    <modal\n      v-if=\"payment\"\n      name=\"payment-detail\"\n      :resizable=\"true\"\n      :adaptive=\"true\"\n      height=\"auto\"\n      :maxWidth=\"600\"\n      :scrollable=\"true\"\n      :clickToClose=\"false\"\n    >\n      <div class=\"admin-panel\">\n        <p class=\"heading-tertiary--grey mb-sm\">訂單編號：{{ payment.id }}</p>\n        <div class=\"admin-order\">\n          <div>\n            <p>訂單成立： {{ time(payment.createdAt) }}</p>\n            <p>\n              付款時間：\n              <template v-if=\"payment.status === '付款完成'\">{{\n                time(payment.finishedAt)\n              }}</template>\n              <template v-else>\n                <i\n                  class=\"fas fa-exclamation-triangle\"\n                  style=\"color:#ff5721;margin-right:5px\"\n                ></i\n                >尚未付款\n              </template>\n            </p>\n            <p>聯絡人姓名：{{ payment.user.name }}</p>\n            <p>聯絡人信箱：{{ payment.user.email }}</p>\n            <p>聯絡人電話：{{ payment.user.phone }}</p>\n            <p>實付金額：{{ payment.total.totalPrice | currency }}</p>\n            <p>付款方式：{{ payment.user.payWay }}</p>\n            <p>聯絡人備註：{{ payment.user.remark || '無' }}</p>\n          </div>\n          <button class=\"btn detail-show-btn\" @click=\"showDetail = !showDetail\">\n            <template v-if=\"showDetail\">\n              <i class=\"fas fa-chevron-up\"></i> 收合內容\n            </template>\n            <template v-else>\n              <i class=\"fas fa-chevron-down\"></i> 查看詳細\n            </template>\n          </button>\n          <!-- 購買明細 -->\n          <transition name=\"fade\">\n            <div class=\"d-none-phone\" v-if=\"showDetail\">\n              <p>價格明細：</p>\n              <table class=\"checkout-table\">\n                <thead>\n                  <tr>\n                    <th>課程名稱</th>\n                    <th>購買方案</th>\n                    <th>原價</th>\n                    <th>售價</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"course in payment.courses\" :key=\"course.title\">\n                    <td>{{ course.title }}</td>\n                    <td>{{ course.plan }}</td>\n                    <td style=\"text-align:right\">\n                      {{ course.price | currency }}\n                    </td>\n                    <td style=\"text-align:right\">\n                      {{ course.sellingPrice | currency }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div class=\"checkout-payment__total\">\n                實付金額：\n                <b class=\"ml-sm\">{{ payment.total.totalPrice | currency }}</b>\n              </div>\n            </div>\n          </transition>\n          <!-- 購買明細mobile -->\n          <transition name=\"fade\">\n            <div class=\"d-block-phone\" v-if=\"showDetail\">\n              <p>價格明細：</p>\n              <table\n                class=\"checkout-table\"\n                v-for=\"course in payment.courses\"\n                :key=\"course.title\"\n              >\n                <tbody>\n                  <tr>\n                    <td>\n                      <b>課程名稱</b>\n                    </td>\n                    <td>{{ course.title }}</td>\n                  </tr>\n                  <tr>\n                    <td>\n                      <b>購買方案</b>\n                    </td>\n                    <td>{{ course.plan }}</td>\n                  </tr>\n                  <tr>\n                    <td>\n                      <b>原價</b>\n                    </td>\n                    <td>{{ course.price | currency }}</td>\n                  </tr>\n                  <tr>\n                    <td>\n                      <b>售價</b>\n                    </td>\n                    <td>{{ course.sellingPrice | currency }}</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div class=\"checkout-payment__total\">\n                實付金額：\n                <b class=\"ml-sm\">{{ payment.total.totalPrice | currency }}</b>\n              </div>\n            </div>\n          </transition>\n        </div>\n        <div class=\"btn-footer\">\n          <button\n            @click=\"hide\"\n            class=\"btn btn-primary mt-sm\"\n            style=\"width:120px; margin:auto;margin-bottom:-15px\"\n          >\n            確定\n          </button>\n        </div>\n      </div>\n    </modal>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\n\nexport default {\n  name: 'Orders',\n  data() {\n    return {\n      showDetail: false,\n      payment: null,\n    };\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    payments() {\n      return this.$store.state.checkout.payments;\n    },\n  },\n  methods: {\n    time(num) {\n      return moment(num).format('YYYY/MM/DD HH:mm');\n    },\n    show(payment) {\n      this.payment = payment;\n      this.$modal.show('payment-detail');\n    },\n    hide() {\n      this.showDetail = false;\n      this.$modal.hide('payment-detail');\n    },\n  },\n  created() {\n    this.$store.dispatch('checkout/getPayments');\n  },\n};\n</script>\n"],"sourceRoot":"src/views/backend"}]}