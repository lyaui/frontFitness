{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/thread-loader/dist/cjs.js!/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/views/frontend/Courses.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/views/frontend/Courses.vue","mtime":1584870829872},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport _toConsumableArray from \"/Users/huangpei-yu/Front-Gym/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport $ from \"jquery\";\nimport CourseCard from \"@/components/CourseCard\";\nimport CourseList from \"@/components/CourseList\";\nexport default {\n  name: \"Courses\",\n  props: [\"navbar\"],\n  components: {\n    CourseCard: CourseCard,\n    CourseList: CourseList\n  },\n  data: function data() {\n    return {\n      property: \"ratingOrder\",\n      order: false,\n      priceOrder: true,\n      ratingOrder: true,\n      searchShow: false,\n      searchWord: null,\n      keyWord: null,\n      showNavbar: true,\n      lastScrollPosition: 0,\n      count: 0,\n      infiniteData: [],\n      busy: false,\n      cates: []\n    };\n  },\n  computed: {\n    isLoading: function isLoading() {\n      return this.$store.state.isLoading;\n    },\n    //全部課程\n    courses: function courses() {\n      return this.$store.state.courses.courses.filter(function (course) {\n        return course.remainQuantity > 0 && course.discount;\n      });\n    },\n    //排序課程\n    coursesOrdered: function coursesOrdered() {\n      var _this = this;\n\n      var course = _toConsumableArray(this.$store.state.courses.courses).sort(function (a, b) {\n        return b[_this.property] - a[_this.property];\n      });\n\n      return this.order ? course : course.reverse();\n    },\n    //選取分類\n    cat: function cat() {\n      return this.$store.state.courses.cat;\n    }\n  },\n  methods: {\n    reset: function reset() {\n      this.searchShow = false;\n      this.searchWord = null;\n      this.count = 0;\n      this.infiniteData = [];\n    },\n    //選擇分類\n    selectCat: function selectCat(cat) {\n      //避免double click\n      if (this.cat !== cat) {\n        this.reset();\n        this.$store.dispatch(\"courses/getCourses\", cat);\n      }\n    },\n    //sub-nav滾動\n    scrollSubNav: function scrollSubNav() {\n      var currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;\n\n      if (currentScrollPosition < 0) {\n        return;\n      }\n\n      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {\n        return;\n      }\n\n      this.showNavbar = currentScrollPosition < this.lastScrollPosition;\n      this.lastScrollPosition = currentScrollPosition;\n    },\n    //往下滾動出現課程\n    loadMore: function loadMore() {\n      var _this2 = this;\n\n      var arrayShow = _toConsumableArray(this.coursesOrdered);\n\n      if (this.infiniteData.length <= arrayShow.length) {\n        this.busy = true;\n        setTimeout(function () {\n          for (var i = 0, j = 5; i < j; i++) {\n            if (_this2.count === arrayShow.length) {\n              break;\n            }\n\n            _this2.infiniteData.push(arrayShow[_this2.count++]);\n          }\n\n          _this2.busy = false;\n        }, 500);\n      }\n    },\n    //搜尋課程\n    searchCourse: function searchCourse() {\n      var _this3 = this;\n\n      //如果輸入框中有字\n      if (this.searchWord) {\n        this.keyWord = this.searchWord;\n        this.reset();\n        this.searchShow = true; //符合課程\n\n        this.$store.dispatch(\"courses/getCourses\", \"所有課程\").then(function (courses) {\n          var filteredCourses = courses.filter(function (course) {\n            return course.title.match(_this3.keyWord);\n          }) || [];\n\n          _this3.$store.commit(\"courses/setCourses\", filteredCourses);\n\n          _this3.loadMore();\n        });\n      } else {\n        this.$toasted.error(\"請輸入搜尋字詞\", {\n          duration: 3000\n        });\n      }\n    },\n    //排序課程\n    orderCourse: function orderCourse(property, order) {\n      this.property = property;\n      this.order = order;\n      this.count = 0;\n      this.infiniteData = [];\n      this.loadMore();\n    }\n  },\n  //scroll特效\n  mounted: function mounted() {\n    $(window).scroll(this.scrollSubNav);\n  },\n  created: function created() {\n    this.reset();\n\n    if (this.$store.state.courses.courses.length === 0) {\n      this.$store.dispatch(\"courses/getCourses\", \"所有課程\");\n    }\n  }\n};",{"version":3,"sources":["Courses.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <loading :active.sync=\"isLoading\" :opacity=\".8\" :background-color=\"'#000'\" :color=\"'#ff5722'\"></loading>\n\n    <!-- sub-nav -->\n    <nav class=\"sub-nav\" :class=\"{'sub-nav--hidden': !showNavbar}\">\n      <ul class=\"sub-nav__list\">\n        <li\n          v-for=\"cat in navbar\"\n          :key=\"cat.cat\"\n          class=\"sub-nav__item\"\n          @click.prevent=\"selectCat(cat.cat)\"\n        >\n          <a class=\"sub-nav__link\">\n            <i :class=\"`${cat.icon}`\"></i>\n            <p>{{cat.cat}}</p>\n          </a>\n        </li>\n      </ul>\n    </nav>\n    <main class=\"courses-main\" id=\"courseMain\">\n      <header class=\"courses-header\" v-if=\"!searchShow\">\n        <div class=\"container\">\n          <h2 class=\"courses-header__title\">{{cat}}</h2>\n          <p class=\"courses-header__text\">{{navbar.filter(intro=>intro.cat===cat)[0].des}}</p>\n        </div>\n      </header>\n      <div class=\"container\">\n        <!-- 精選課程區 -->\n        <section v-if=\"!searchShow\">\n          <div class=\"section-title\">\n            <h2 class=\"section-title__name\">精選{{cat}}</h2>\n          </div>\n          <transition name=\"slide-fade\">\n            <course-card v-if=\"courses.length>0\" :selectedCat=\"cat\" :course-card=\"courses\"></course-card>\n          </transition>\n        </section>\n\n        <!-- 全部課程區 -->\n        <section>\n          <div class=\"section-title\" v-if=\"!searchShow\">\n            <h2 class=\"section-title__name\">全部{{cat}}</h2>\n          </div>\n          <!-- 沒有課程結果 -->\n          <div class=\"search-result\" v-if=\"searchShow&&!isLoading\">\n            <div v-if=\"coursesOrdered.length===0\">\n              <p>\n                抱歉，我們找不到有關「{{keyWord}}」的任何結果\n                <br>請嘗試調整您的搜索。以下是幾點建議：\n              </p>\n              <ul>\n                <li>確保所有字詞拼寫正確。</li>\n                <li>嘗試不同的搜索詞。</li>\n                <li>嘗試更常見的搜索字詞。</li>\n              </ul>\n            </div>\n            <div v-else>關於「{{keyWord}}」的 {{coursesOrdered.length}} 筆结果：</div>\n          </div>\n          <!-- filter&search tool bar-->\n          <div class=\"courses-filter\">\n            <div class=\"courses-filter__list\">\n              <!-- 課程搜尋 -->\n              <div class=\"search\">\n                <input\n                  type=\"text\"\n                  class=\"search__input\"\n                  v-model.trim=\"searchWord\"\n                  placeholder=\"搜尋課程\"\n                  @keyup.enter=\"searchCourse()\"\n                >\n                <button class=\"search__btn btn\" @click=\"searchCourse()\">\n                  <div class=\"search__icon\">\n                    <i class=\"fas fa-search\"></i>\n                  </div>\n                </button>\n              </div>\n              <!-- 課程排序 -->\n              <div class=\"courses-filter__btn-group d-flex\">\n                <div class=\"courses-filter__item\">\n                  <button\n                    @click=\"priceOrder=!priceOrder;orderCourse('price',priceOrder)\"\n                    class=\"courses-filter__btn btn\"\n                  >\n                    <i v-if=\"priceOrder\" class=\"fas fa-chevron-down\"></i>\n                    <i v-else class=\"fas fa-chevron-up\"></i>\n                    價格\n                  </button>\n                </div>\n                <div class=\"courses-filter__item\">\n                  <button\n                    @click=\"ratingOrder=!ratingOrder;orderCourse('avgRating',ratingOrder)\"\n                    class=\"courses-filter__btn btn\"\n                  >\n                    <i v-if=\"ratingOrder\" class=\"fas fa-chevron-down\"></i>\n                    <i v-else class=\"fas fa-chevron-up\"></i>\n                    評等\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- 全部課程List -->\n        <section>\n          <course-list :courses-list=\"infiniteData\" v-if=\"infiniteData.length>0\"></course-list>\n          <div\n            class=\"ifinite-scroll\"\n            v-infinite-scroll=\"loadMore\"\n            infinite-scroll-disabled=\"busy\"\n            infinite-scroll-distance=\"15\"\n            infinite-scroll-immediate-check=\"false\"\n          >\n            <div v-if=\"busy&&infiniteData.length!==coursesOrdered.length\">\n              <i class=\"fas fa-spinner fa-spin\"></i>\n            </div>\n\n            <a class=\"gotop\" href=\"#courseMain\" v-if=\"infiniteData.length==coursesOrdered.length\">\n              <i class=\"fas fa-chevron-up\"></i> 返回頂部\n            </a>\n          </div>\n        </section>\n      </div>\n    </main>\n    <add-to-cart-modal></add-to-cart-modal>\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport CourseCard from \"@/components/CourseCard\";\nimport CourseList from \"@/components/CourseList\";\n\nexport default {\n  name: \"Courses\",\n  props: [\"navbar\"],\n  components: {\n    CourseCard,\n    CourseList\n  },\n  data() {\n    return {\n      property: \"ratingOrder\",\n      order: false,\n      priceOrder: true,\n      ratingOrder: true,\n      searchShow: false,\n      searchWord: null,\n      keyWord: null,\n      showNavbar: true,\n      lastScrollPosition: 0,\n      count: 0,\n      infiniteData: [],\n      busy: false,\n      cates: []\n    };\n  },\n  computed: {\n    isLoading() {\n      return this.$store.state.isLoading;\n    },\n    //全部課程\n    courses() {\n      return this.$store.state.courses.courses.filter(\n        course => course.remainQuantity > 0 && course.discount\n      );\n    },\n    //排序課程\n    coursesOrdered() {\n      const course = [...this.$store.state.courses.courses].sort(\n        (a, b) => b[this.property] - a[this.property]\n      );\n      return this.order ? course : course.reverse();\n    },\n    //選取分類\n    cat() {\n      return this.$store.state.courses.cat;\n    }\n  },\n\n  methods: {\n    reset() {\n      this.searchShow = false;\n      this.searchWord = null;\n      this.count = 0;\n      this.infiniteData = [];\n    },\n\n    //選擇分類\n    selectCat(cat) {\n      //避免double click\n      if (this.cat !== cat) {\n        this.reset();\n        this.$store.dispatch(\"courses/getCourses\", cat);\n      }\n    },\n\n    //sub-nav滾動\n    scrollSubNav() {\n      const currentScrollPosition =\n        window.pageYOffset || document.documentElement.scrollTop;\n      if (currentScrollPosition < 0) {\n        return;\n      }\n      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {\n        return;\n      }\n      this.showNavbar = currentScrollPosition < this.lastScrollPosition;\n      this.lastScrollPosition = currentScrollPosition;\n    },\n\n    //往下滾動出現課程\n    loadMore() {\n      let arrayShow = [...this.coursesOrdered];\n      if (this.infiniteData.length <= arrayShow.length) {\n        this.busy = true;\n        setTimeout(() => {\n          for (var i = 0, j = 5; i < j; i++) {\n            if (this.count === arrayShow.length) {\n              break;\n            }\n            this.infiniteData.push(arrayShow[this.count++]);\n          }\n          this.busy = false;\n        }, 500);\n      }\n    },\n\n    //搜尋課程\n    searchCourse() {\n      //如果輸入框中有字\n      if (this.searchWord) {\n        this.keyWord = this.searchWord;\n        this.reset();\n        this.searchShow = true;\n        //符合課程\n        this.$store.dispatch(\"courses/getCourses\", \"所有課程\").then(courses => {\n          const filteredCourses =\n            courses.filter(course => course.title.match(this.keyWord)) || [];\n          this.$store.commit(\"courses/setCourses\", filteredCourses);\n          this.loadMore();\n        });\n      } else {\n        this.$toasted.error(\"請輸入搜尋字詞\", { duration: 3000 });\n      }\n    },\n\n    //排序課程\n    orderCourse(property, order) {\n      this.property = property;\n      this.order = order;\n      this.count = 0;\n      this.infiniteData = [];\n      this.loadMore();\n    }\n  },\n  //scroll特效\n  mounted() {\n    $(window).scroll(this.scrollSubNav);\n  },\n\n  created() {\n    this.reset();\n    if (this.$store.state.courses.courses.length === 0) {\n      this.$store.dispatch(\"courses/getCourses\", \"所有課程\");\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/frontend"}]}