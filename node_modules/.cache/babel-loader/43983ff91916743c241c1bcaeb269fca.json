{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/components/NavBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/components/NavBar.vue","mtime":1584522498950},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/huangpei-yu/Front-Gym/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, email, sameAs } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"NavBar\",\n  props: [\"navbar\"],\n  data: function data() {\n    return {\n      form: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        passwordConfirm: \"\",\n        img: \"https://png2.pngtree.com/svg/20161215/9bc7bae28b.png\"\n      },\n      status: \"\",\n      showRwdNav: false\n    };\n  },\n  validations: {\n    form: {\n      name: {\n        required: required\n      },\n      email: {\n        required: required,\n        email: email\n      },\n      password: {\n        required: required\n      },\n      passwordConfirm: {\n        required: required,\n        sameAsPassword: sameAs(\"password\")\n      }\n    }\n  },\n  computed: {\n    //確認使用者狀態\n    user: function user() {\n      return this.$store.state.auth.user;\n    },\n    //註冊資料OK\n    isRegisterValid: function isRegisterValid() {\n      return !this.$v.form.name.$invalid && !this.$v.form.email.$invalid && !this.$v.form.password.$invalid && !this.$v.form.passwordConfirm.$invalid;\n    },\n    //登入資料OK\n    isLoginValid: function isLoginValid() {\n      return !this.$v.form.email.$invalid && !this.$v.form.password.$invalid;\n    },\n    //購物車課程數量\n    cartItem: function cartItem() {\n      return this.$store.state.cart.cart.length;\n    },\n    cat: function cat() {\n      return this.$store.state.courses.cat;\n    }\n  },\n  watch: {\n    //當類別或路徑變更時關閉RWD選單\n    cat: function cat() {\n      this.showRwdNav = false;\n    },\n    $route: function $route() {\n      this.showRwdNav = false;\n    }\n  },\n  methods: {\n    reset: function reset() {\n      this.form.name = \"\";\n      this.form.email = \"\";\n      this.form.password = \"\";\n      this.form.passwordConfirm = \"\";\n    },\n    //選擇類別\n    selectCat: function selectCat(cat) {\n      var _this = this;\n\n      this.$store.dispatch(\"courses/getCourses\", cat).then(function () {\n        return _this.$router.push(\"/courses\");\n      });\n    },\n    //註冊\n    handleRegister: function handleRegister() {\n      var _this2 = this;\n\n      this.$v.$touch();\n\n      if (this.isRegisterValid) {\n        this.$store.dispatch(\"auth/signUp\", this.form).then(\n        /*#__PURE__*/\n        function () {\n          var _ref = _asyncToGenerator(\n          /*#__PURE__*/\n          regeneratorRuntime.mark(function _callee(user) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return _this2.$store.dispatch(\"auth/createUserProfile\", {\n                      uid: user.uid,\n                      userProfile: {\n                        userId: user.uid,\n                        name: _this2.form.name,\n                        email: _this2.form.email,\n                        userImg: _this2.form.img\n                      }\n                    });\n\n                  case 2:\n                    _this2.$toasted.success(\"註冊成功\", {\n                      duration: 2000\n                    });\n\n                    _this2.hide();\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()).catch(function (error) {\n          return _this2.$toasted.error(error, {\n            duration: 3000\n          });\n        });\n      } else {\n        this.$toasted.error(\"請正確填寫必要資訊\", {\n          duration: 3000\n        });\n      }\n    },\n    //登入\n    handleLogin: function handleLogin() {\n      var _this3 = this;\n\n      this.$v.$touch();\n\n      if (this.isLoginValid) {\n        this.$store.dispatch(\"auth/signIn\", this.form).then(function () {\n          _this3.$toasted.success(\"登入成功\", {\n            duration: 2000\n          });\n\n          _this3.hide();\n        }).catch(function (error) {\n          return _this3.$toasted.error(error, {\n            duration: 2000\n          });\n        });\n      } else {\n        this.$toasted.error(\"請正確填寫必要資訊\", {\n          duration: 3000\n        });\n      }\n    },\n    //登出\n    logOut: function logOut() {\n      var _this4 = this;\n\n      this.$store.dispatch(\"auth/signOut\").then(function () {\n        _this4.$toasted.success(\"成功登出\", {\n          duration: 2000\n        });\n\n        _this4.$router.push({\n          name: \"home\"\n        });\n      });\n    },\n    //處窗處理\n    show: function show(status) {\n      this.$modal.show(\"logRegModal\");\n    },\n    hide: function hide() {\n      this.reset();\n      this.$modal.hide(\"logRegModal\");\n    }\n  }\n};",{"version":3,"sources":["NavBar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <nav class=\"navigation navigation-dark\">\n    <ul class=\"head-nav\">\n      <li class=\"head-nav__item\">\n        <router-link to=\"/\">\n          <div class=\"logo-box\">frontFitness</div>\n        </router-link>\n      </li>\n\n      <li class=\"head-nav__item d-none-phone\">\n        <div class=\"head-nav__link btn\" @click.prevent=\"selectCat('所有課程');\">\n          <i class=\"fas fa-th-large\"></i> 探索課程\n        </div>\n      </li>\n    </ul>\n    <ul class=\"head-nav\">\n      <!-- 購物車 -->\n      <li class=\"head-nav__item cart-btn d-none-phone\">\n        <router-link to=\"/cart\" class=\"head-nav__link head-nav__user btn\">\n          <i class=\"fas fa-shopping-cart fa-lg\"></i>\n          <div class=\"cart-qty\">{{cartItem}}</div>\n        </router-link>\n      </li>\n      <!-- 註冊 -->\n      <li class=\"head-nav__item d-none-phone\" v-if=\"!user\">\n        <div class=\"head-nav__link btn\" @click=\"show();status='註冊'\">註冊</div>\n      </li>\n      <!-- 登入 -->\n      <li class=\"head-nav__item d-none-phone\" v-if=\"!user\">\n        <div class=\"head-nav__link btn\" @click=\"show();status='登入'\">登入</div>\n      </li>\n      <!-- 頭像 -->\n      <li class=\"head-nav__item d-none-phone cart-btn\" v-if=\"user\">\n        <router-link to=\"/admin/profile\" class=\"head-nav__link head-nav__user btn\">\n          <img class=\"head-nav__user-img\" :src=\"user.profile.userImg\">\n          <span class=\"head-nav__user-name\">{{user.profile.name}}</span>\n        </router-link>\n      </li>\n      <!-- 登出 -->\n      <li class=\"head-nav__item d-none-phone\" v-if=\"user\">\n        <div class=\"head-nav__link btn\" @click=\"logOut()\">登出</div>\n      </li>\n\n      <!-- 手機版選單 -->\n      <li class=\"head-nav__item d-block-phone\">\n        <div class=\"res-nav res-nav\">\n          <!-- 開關圖示 -->\n          <button class=\"btn res-nav__button\" @click=\"showRwdNav=!showRwdNav\">\n            <i v-if=\"!showRwdNav\" class=\"fas fa-bars\"></i>\n            <i v-else class=\"fas fa-times\"></i>\n          </button>\n\n          <div class=\"res-nav__background\" :class=\"{'res-nav__background--active':showRwdNav}\"></div>\n          <nav class=\"res-nav__nav\" :class=\"{'res-nav__nav--active':showRwdNav}\">\n            <div class=\"res-nav__list\">\n              <!-- 上方登入/登出/會員頭像 -->\n              <div class=\"mb-sm d-flex\">\n                <div class=\"res-nav__link-logreg btn\" @click=\"show();status='註冊'\" v-if=\"!user\">\n                  <i class=\"fas fa-user-plus\"></i>\n                  <p>註冊</p>\n                </div>\n\n                <div class=\"res-nav__link-logreg btn\" @click=\"show();status='登入'\" v-if=\"!user\">\n                  <i class=\"fas fa-sign-in-alt\"></i>\n                  <p>登入</p>\n                </div>\n\n                <div class=\"cart-btn\" v-else>\n                  <router-link to=\"/admin/profile\" class=\"head-nav__user btn\">\n                    <img class=\"res-nav__user-img\" :src=\"user.profile.userImg\">\n                    <span class=\"res-nav__user-name\">{{user.profile.name}}</span>\n                  </router-link>\n                </div>\n              </div>\n              <!-- 課程+購物車 -->\n              <ul>\n                <li class=\"res-nav__item cart-btn\">\n                  <router-link to=\"/cart\" class=\"head-nav__user\">\n                    <i class=\"fas fa-shopping-cart fa-lg\"></i> 購物車\n                    <div class=\"cart-qty\">{{cartItem}}</div>\n                  </router-link>\n                </li>\n\n                <li\n                  v-for=\"cat in navbar\"\n                  :key=\"cat.cat\"\n                  class=\"res-nav__item\"\n                  @click.prevent=\"selectCat(cat.cat);\"\n                >\n                  <i :class=\"`${cat.icon}`\"></i>\n                  <p>{{`${cat.cat} ${cat.engCat}`}}</p>\n                </li>\n              </ul>\n            </div>\n            <div class=\"res-nav__link-logout\" v-if=\"user\" @click=\"logOut()\">\n              <i class=\"fas fa-sign-out-alt\"></i>\n            </div>\n          </nav>\n        </div>\n      </li>\n    </ul>\n\n    <!-- modal -->\n    <modal name=\"logRegModal\" width=\"330px\" height=\"auto\">\n      <div class=\"log-reg-modal\">\n        <div class=\"log-reg-modal__tab\">\n          <button\n            class=\"btn log-reg-modal__tab-btn\"\n            @click=\"status='註冊';reset()\"\n            :class=\"{'log-reg-modal__tab-btn--active':status==='註冊'}\"\n          >\n            <i class=\"fas fa-user-plus\"></i> 註冊會員\n          </button>\n          <button\n            class=\"btn log-reg-modal__tab-btn\"\n            @click=\"status='登入';reset()\"\n            :class=\"{'log-reg-modal__tab-btn--active':status==='登入'}\"\n          >\n            <i class=\"fas fa-sign-in-alt\"></i> 登入會員\n          </button>\n        </div>\n\n        <div class=\"log-reg-modal__panel mt-sm\">\n          <form>\n            <!-- 名稱 -->\n            <div class=\"form__row\" v-if=\"status==='註冊'\">\n              <div class=\"form__group\">\n                <div class=\"d-flex\">\n                  <label class=\"form__label\" for=\"reg-name\">\n                    <i class=\"fas fa-user\"></i>\n                  </label>\n                  <input\n                    class=\"form__input\"\n                    type=\"text\"\n                    placeholder=\"名稱 *\"\n                    v-model=\"form.name\"\n                    id=\"reg-name\"\n                    :class=\"{'form__input--warning': $v.form.name.$error}\"\n                    required\n                  >\n                </div>\n                <template v-if=\"$v.form.name.$dirty\">\n                  <span v-if=\"!$v.form.name.required\" class=\"text-warning\">名稱為必填欄位</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 電子信箱 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"d-flex\">\n                  <label class=\"form__label\" for=\"reg-email\">\n                    <i class=\"fas fa-envelope\"></i>\n                  </label>\n                  <input\n                    class=\"contact-form__input form__input\"\n                    type=\"text\"\n                    placeholder=\"電子信箱 *\"\n                    v-model=\"form.email\"\n                    id=\"reg-email\"\n                    required\n                    :class=\"{'form__input--warning': $v.form.email.$error}\"\n                  >\n                </div>\n                <template v-if=\"$v.form.email.$dirty\">\n                  <span v-if=\"!$v.form.email.required\" class=\"text-warning\">電子信箱為必填欄位</span>\n                  <span v-if=\"!$v.form.email.email\" class=\"text-warning\">請輸入正確的電子信箱格式</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 密碼 -->\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"d-flex\">\n                  <label class=\"form__label\" for=\"reg-password\">\n                    <i class=\"fas fa-lock\"></i>\n                  </label>\n                  <input\n                    class=\"contact-form__input form__input\"\n                    type=\"password\"\n                    placeholder=\"密碼 *\"\n                    v-model=\"form.password\"\n                    id=\"reg-password\"\n                    required\n                    :class=\"{'form__input--warning': $v.form.password.$error}\"\n                  >\n                </div>\n                <template v-if=\"$v.form.password.$dirty\">\n                  <span v-if=\"!$v.form.password.required\" class=\"text-warning\">密碼為必填欄位</span>\n                </template>\n              </div>\n            </div>\n\n            <!-- 密碼確認 -->\n            <div class=\"form__row\" v-if=\"status==='註冊'\">\n              <div class=\"form__group\">\n                <div class=\"d-flex\">\n                  <label class=\"form__label\" for=\"reg-password-confirm\">\n                    <i class=\"fas fa-unlock-alt\"></i>\n                  </label>\n                  <input\n                    class=\"contact-form__input form__input\"\n                    type=\"password\"\n                    placeholder=\"密碼確認 *\"\n                    v-model=\"form.passwordConfirm\"\n                    id=\"reg-password-confirm\"\n                    required\n                    :class=\"{'form__input--warning': $v.form.passwordConfirm.$error}\"\n                  >\n                </div>\n                <template v-if=\"$v.form.passwordConfirm.$dirty\">\n                  <span v-if=\"!$v.form.passwordConfirm.required\" class=\"text-warning\">密碼確認為必填欄位</span>\n                  <span\n                    v-if=\"!$v.form.passwordConfirm.sameAsPassword&&form.passwordConfirm!==''\"\n                    class=\"text-warning\"\n                  >與密碼不一致 請再確認</span>\n                </template>\n              </div>\n            </div>\n\n            <div class=\"form__row\" style=\"margin-top:20px\">\n              <div class=\"form__group\">\n                <button\n                  v-if=\"status==='註冊'\"\n                  @click.prevent=\"handleRegister()\"\n                  class=\"btn-primary btn\"\n                >註冊</button>\n                <button\n                  v-if=\"status==='登入'\"\n                  @click.prevent=\"handleLogin()\"\n                  class=\"btn-primary btn\"\n                >登入</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </modal>\n  </nav>\n</template>\n\n<script>\nimport { required, email, sameAs } from \"vuelidate/lib/validators\";\n\nexport default {\n  name: \"NavBar\",\n  props: [\"navbar\"],\n  data() {\n    return {\n      form: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        passwordConfirm: \"\",\n        img: \"https://png2.pngtree.com/svg/20161215/9bc7bae28b.png\"\n      },\n      status: \"\",\n      showRwdNav: false\n    };\n  },\n  validations: {\n    form: {\n      name: { required },\n      email: { required, email },\n      password: { required },\n      passwordConfirm: { required, sameAsPassword: sameAs(\"password\") }\n    }\n  },\n  computed: {\n    //確認使用者狀態\n    user() {\n      return this.$store.state.auth.user;\n    },\n    //註冊資料OK\n    isRegisterValid() {\n      return (\n        !this.$v.form.name.$invalid &&\n        !this.$v.form.email.$invalid &&\n        !this.$v.form.password.$invalid &&\n        !this.$v.form.passwordConfirm.$invalid\n      );\n    },\n    //登入資料OK\n    isLoginValid() {\n      return !this.$v.form.email.$invalid && !this.$v.form.password.$invalid;\n    },\n    //購物車課程數量\n    cartItem() {\n      return this.$store.state.cart.cart.length;\n    },\n    cat() {\n      return this.$store.state.courses.cat;\n    }\n  },\n  watch: {\n    //當類別或路徑變更時關閉RWD選單\n    cat() {\n      this.showRwdNav = false;\n    },\n    $route() {\n      this.showRwdNav = false;\n    }\n  },\n  methods: {\n    reset() {\n      this.form.name = \"\";\n      this.form.email = \"\";\n      this.form.password = \"\";\n      this.form.passwordConfirm = \"\";\n    },\n\n    //選擇類別\n    selectCat(cat) {\n      this.$store\n        .dispatch(\"courses/getCourses\", cat)\n        .then(() => this.$router.push(\"/courses\"));\n    },\n\n    //註冊\n    handleRegister() {\n      this.$v.$touch();\n      if (this.isRegisterValid) {\n        this.$store\n          .dispatch(\"auth/signUp\", this.form)\n          .then(async user => {\n            await this.$store.dispatch(\"auth/createUserProfile\", {\n              uid: user.uid,\n              userProfile: {\n                userId: user.uid,\n                name: this.form.name,\n                email: this.form.email,\n                userImg: this.form.img\n              }\n            });\n            this.$toasted.success(\"註冊成功\", {\n              duration: 2000\n            });\n            this.hide();\n          })\n          .catch(error => this.$toasted.error(error, { duration: 3000 }));\n      } else {\n        this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n      }\n    },\n\n    //登入\n    handleLogin() {\n      this.$v.$touch();\n      if (this.isLoginValid) {\n        this.$store\n          .dispatch(\"auth/signIn\", this.form)\n          .then(() => {\n            this.$toasted.success(\"登入成功\", {\n              duration: 2000\n            });\n            this.hide();\n          })\n          .catch(error => this.$toasted.error(error, { duration: 2000 }));\n      } else {\n        this.$toasted.error(\"請正確填寫必要資訊\", { duration: 3000 });\n      }\n    },\n\n    //登出\n    logOut() {\n      this.$store.dispatch(\"auth/signOut\").then(() => {\n        this.$toasted.success(\"成功登出\", {\n          duration: 2000\n        });\n        this.$router.push({ name: \"home\" });\n      });\n    },\n\n    //處窗處理\n    show(status) {\n      this.$modal.show(\"logRegModal\");\n    },\n    hide() {\n      this.reset();\n      this.$modal.hide(\"logRegModal\");\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n</style>"],"sourceRoot":"src/components"}]}