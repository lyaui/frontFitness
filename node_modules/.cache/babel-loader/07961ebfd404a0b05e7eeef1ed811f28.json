{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/src/store.js","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/store.js","mtime":1580976518946},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _JSON$stringify from \"/Users/huangpei-yu/Front-Gym/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.array.find\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { db } from \"@/firebase/init\";\nimport createPersistedState from 'vuex-persistedstate';\nVue.use(Vuex);\nvar cart = window.localStorage.getItem('cart');\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    categorySelected: \"所有課程\",\n    // isLoading: true,\n    courses: [],\n    coupon: false,\n    totalOrigin: 0,\n    discount: 100,\n    totalDiscount: 0,\n    total: 0,\n    cart: cart ? JSON.parse(cart) : []\n  },\n  actions: {\n    getData: function getData() {\n      db.collection(\"courses\").get().then(function (snapshot) {\n        console.log(snapshot);\n      });\n    }\n  },\n  mutations: {\n    //傳遞路徑\n    selectCat: function selectCat(state, test) {\n      state.categorySelected = test;\n      console.log('vuex', state.categorySelected);\n    },\n    //加入購物車\n    addToCart: function addToCart(state, item) {\n      var found = state.cart.find(function (course) {\n        return course.id === item.id;\n      });\n\n      if (found) {\n        alert('課程已在購物車');\n      } else {\n        state.cart.push(item);\n      }\n\n      this.commit('saveData');\n    },\n    //保存cart內項目\n    saveData: function saveData(state) {\n      window.localStorage.setItem('cart', _JSON$stringify(state.cart));\n    },\n    //移除購物車內容\n    removeItem: function removeItem(state, item) {\n      var index = state.cart.indexOf(item);\n      state.cart.splice(index, 1);\n      this.commit('totalPrice');\n      this.commit('saveData');\n    },\n    // 如果剩餘人數為零則歸0\n    changeRemains: function changeRemains(state, item) {\n      item.forEach(function (courseName) {\n        return state.cart.forEach(function (course) {\n          console.log(item);\n\n          if (course.title === courseName) {\n            course.remainQuantity = 0;\n          }\n        });\n      });\n    },\n    //計算總價格\n    totalPrice: function totalPrice(state) {\n      if (state.cart.length === 0) {\n        state.totalOrigin = 0;\n        state.total = 0;\n        state.totalDiscount = 0;\n      } else {\n        state.totalOrigin = state.cart.map(function (course) {\n          return course.price;\n        }).reduce(function (total, amount) {\n          return total + amount;\n        });\n        state.total = state.totalOrigin;\n        state.totalDiscount = state.cart.filter(function (course) {\n          return course.discount;\n        }).length * state.discount;\n      }\n    },\n    //加入購物券計算價格\n    addCouponCode: function addCouponCode(state, coupon) {\n      state.coupon = coupon;\n      state.coupon ? state.total = state.totalOrigin - state.totalDiscount : state.total = state.totalOrigin;\n    },\n    //結帳完成清空購物車\n    checkout: function checkout(state) {\n      state.courses = [];\n      state.coupon = false;\n      state.totalOrigin = 0;\n      state.totalDiscount = 0;\n      state.total = 0;\n      state.cart = [];\n    }\n  }\n});",{"version":3,"sources":["/Users/huangpei-yu/Front-Gym/src/store.js"],"names":["Vue","Vuex","db","createPersistedState","use","cart","window","localStorage","getItem","Store","plugins","state","categorySelected","courses","coupon","totalOrigin","discount","totalDiscount","total","JSON","parse","actions","getData","collection","get","then","snapshot","console","log","mutations","selectCat","test","addToCart","item","found","find","course","id","alert","push","commit","saveData","setItem","removeItem","index","indexOf","splice","changeRemains","forEach","courseName","title","remainQuantity","totalPrice","length","map","price","reduce","amount","filter","addCouponCode","checkout"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport {\n    db\n} from \"@/firebase/init\";\nimport createPersistedState from 'vuex-persistedstate'\nVue.use(Vuex)\n\nlet cart = window.localStorage.getItem('cart')\n\nexport default new Vuex.Store({\n    plugins: [createPersistedState()],\n    state: {\n        categorySelected: \"所有課程\",\n        // isLoading: true,\n        courses: [],\n        coupon: false,\n        totalOrigin: 0,\n        discount: 100,\n        totalDiscount: 0,\n        total: 0,\n        cart: cart ? JSON.parse(cart) : [],\n    },\n    actions: {\n        getData() {\n            db.collection(\"courses\")\n                .get()\n                .then(snapshot => {\n                    console.log(snapshot);\n                \n                })\n        }\n\n    },\n\n    mutations: {\n        //傳遞路徑\n        selectCat(state, test) {\n            state.categorySelected = test\n            console.log('vuex', state.categorySelected);\n\n        },\n\n\n        //加入購物車\n        addToCart(state, item) {\n            let found = state.cart.find(course => course.id === item.id);\n            if (found) {\n                alert('課程已在購物車')\n            } else {\n                state.cart.push(item);\n            }\n            this.commit('saveData')\n        },\n\n        //保存cart內項目\n        saveData(state) {\n            window.localStorage.setItem('cart', JSON.stringify(state.cart))\n        },\n\n        //移除購物車內容\n        removeItem(state, item) {\n            let index = state.cart.indexOf(item);\n            state.cart.splice(index, 1)\n            this.commit('totalPrice')\n            this.commit('saveData')\n        },\n\n        // 如果剩餘人數為零則歸0\n        changeRemains(state, item) {\n            item.forEach(courseName =>\n                state.cart.forEach(course => {\n                    console.log(item);\n                    if (course.title === courseName) {\n                        course.remainQuantity = 0\n                    }\n                })\n            )\n        },\n\n        //計算總價格\n        totalPrice(state) {\n            if (state.cart.length === 0) {\n                state.totalOrigin = 0\n                state.total = 0\n                state.totalDiscount = 0\n            } else {\n                state.totalOrigin = state.cart.map(course => course.price).reduce((total, amount) => total + amount);\n                state.total = state.totalOrigin;\n                state.totalDiscount = state.cart.filter(course => course.discount).length * state.discount\n            }\n\n        },\n\n        //加入購物券計算價格\n        addCouponCode(state, coupon) {\n            state.coupon = coupon;\n            state.coupon ? state.total = state.totalOrigin - state.totalDiscount : state.total = state.totalOrigin\n        },\n\n        //結帳完成清空購物車\n        checkout(state) {\n            state.courses = [];\n            state.coupon = false;\n            state.totalOrigin = 0;\n            state.totalDiscount = 0;\n            state.total = 0;\n            state.cart = [];\n        }\n    },\n}, )"]}]}