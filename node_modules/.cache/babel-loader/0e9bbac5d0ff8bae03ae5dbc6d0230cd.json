{"remainingRequest":"/Users/huangpei-yu/Front-Gym/node_modules/thread-loader/dist/cjs.js!/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js!/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangpei-yu/Front-Gym/src/components/Comments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangpei-yu/Front-Gym/src/components/Comments.vue","mtime":1584966628288},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangpei-yu/Front-Gym/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find\";\nimport _defineProperty from \"/Users/huangpei-yu/Front-Gym/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport StarRating from 'vue-star-rating';\nimport moment from 'moment';\nexport default {\n  name: 'Comments',\n  components: {\n    StarRating: StarRating\n  },\n  props: ['comments', 'currentUser', 'courseId'],\n  data: function data() {\n    return {\n      comment: {\n        comment: null,\n        rating: null\n      },\n      inputStatus: '新留言',\n      inputShow: true,\n      tempComment: null\n    };\n  },\n  computed: {\n    // 計算平均分數\n    avgRating: function avgRating() {\n      if (this.comments.length === 0) {\n        return 0;\n      }\n\n      var avg = this.comments.map(function (comment) {\n        return comment.rating;\n      }).reduce(function (acc, cur) {\n        return acc + cur;\n      }) / this.comments.length;\n      return parseFloat(avg.toFixed(1));\n    },\n    // 計算每個bar\n    ratingPercents: function ratingPercents() {\n      var percents = [0, 0, 0, 0, 0];\n\n      if (this.comments.length === 0) {\n        return percents;\n      }\n\n      var ratings = this.comments.map(function (item) {\n        return item.rating;\n      }); // [5,3,3]\n      // 計算每個rating出現比率\n\n      percents = percents.map( // eslint-disable-next-line no-return-assign\n      function (item, index) {\n        return (item = ratings.filter(function (rating) {\n          return rating === index + 1;\n        }).length) / ratings.length;\n      }); // 換算百分比\n\n      return percents.map(function (num) {\n        return parseFloat(num.toFixed(2)) * 100;\n      }).reverse();\n    }\n  },\n  watch: {\n    // 若平均評價改變則更新資料庫資料\n    avgRating: function avgRating() {\n      var course = _objectSpread({}, this.$store.state.courses.course);\n\n      course.avgRating = this.avgRating;\n      this.$store.dispatch('courses/updateCourse', {\n        id: this.courseId,\n        course: course\n      });\n    }\n  },\n  methods: {\n    time: function time(num) {\n      return moment(num).format('YYYY/MM/DD HH:mm');\n    },\n    alertLogReg: function alertLogReg() {\n      if (!this.currentUser) {\n        this.$toasted.info('請先 註冊/登入 以進行評價', {\n          duration: 2000\n        });\n      }\n    },\n    // 新增評價\n    addComment: function addComment() {\n      var _this = this;\n\n      if (this.comment.rating && this.comment.comment) {\n        this.comment.user = this.currentUser.profile.userId;\n        this.comment.toId = this.courseId;\n        this.$store.dispatch('comments/createComment', {\n          comment: this.comment,\n          user: this.currentUser\n        }).then(function () {\n          _this.$toasted.success('已收到您的評價', {\n            duration: 2000\n          });\n\n          _this.inputStatus = '新留言';\n          _this.inputShow = !_this.inputShow;\n        });\n      } else {\n        this.$toasted.error('請 選取分數 與 留下評論 再送出', {\n          duration: 2000\n        });\n      }\n    },\n    updateComment: function updateComment() {\n      var _this2 = this;\n\n      if (this.comment.rating && this.comment.comment) {\n        this.$store.dispatch('comments/updateComment', this.comment).then(function () {\n          _this2.$toasted.success('成功修改評價', {\n            duration: 2000\n          });\n\n          _this2.inputStatus = '新留言';\n          _this2.inputShow = !_this2.inputShow;\n        });\n      } else {\n        this.$toasted.error('請 選取分數 與 留下評論 再送出', {\n          duration: 2000\n        });\n      }\n    },\n    init: function init() {\n      var _this3 = this;\n\n      if (this.currentUser) {\n        // 確認使用者是否留過言\n        var checkArr = this.comments.find(function (comment) {\n          return comment.user.userId === _this3.currentUser.profile.userId;\n        }); // 若留過言\n\n        if (checkArr) {\n          // 不主動顯示輸入框，並讀入可編輯內容\n          this.inputShow = false;\n          this.comment = _objectSpread({}, checkArr);\n        }\n      }\n    }\n  },\n  created: function created() {\n    window.setTimeout(this.init, 3000);\n  }\n};",{"version":3,"sources":["Comments.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"course-rating\">\n    <!-- 評分顯示 -->\n    <section class=\"course-rating\">\n      <div class=\"heading-tertiary--dark mb-sm\">課程評分</div>\n      <div class=\"course-rating__box\">\n        <div class=\"course-rating__avg-rating\">\n          <div class=\"course-rating__rating-figure\">{{avgRating}}</div>\n          <div class=\"course-rating__user\">\n            <i class=\"fas fa-user\"></i>\n            <div>{{comments.length}}位學員評分</div>\n          </div>\n        </div>\n        <!-- bar -->\n        <div class=\"course-rating__rating-bars\">\n          <div class=\"course-rating__rating-bar\" v-for=\"(percent,i) in ratingPercents\" :key=\"i\">\n            <div class=\"course-rating__bar\">\n              <span class=\"course-rating__bar-progress\" :style=\"{width:percent+'%'}\"></span>\n            </div>\n            <div class=\"d-flex\" style=\"width:220px\">\n              <star-rating\n                :star-size=\"16\"\n                :read-only=\"true\"\n                :rounded-corners=\"true\"\n                :rating=\"(5-i)\"\n                :show-rating=\"false\"\n              ></star-rating>\n              <div class=\"course-rating__bar-num\">{{percent}} %</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <!-- 輸入評分區 -->\n    <section>\n      <div class=\"heading-tertiary--dark mb-sm\">評論</div>\n      <div class=\"user-comment\" v-if=\"inputShow\">\n        <div class=\"user-comment__img-box\">\n          <img class=\"user-comment__img\" :src=\"currentUser.profile.userImg\" v-if=\"currentUser\" />\n          <img\n            class=\"user-comment__img\"\n            src=\"https://png2.pngtree.com/svg/20161215/9bc7bae28b.png\"\n            v-else\n          />\n        </div>\n        <div class=\"user-comment__content\">\n          <div class=\"user-comment__info\">\n            <div v-if=\"currentUser\">\n              <i class=\"fas fa-user\"></i>\n              {{currentUser.profile.name}}\n            </div>\n            <star-rating\n              class=\"user-comment__rating\"\n              v-model=\"comment.rating\"\n              :star-size=\"20\"\n              :rounded-corners=\"true\"\n              :show-rating=\"false\"\n              :read-only=\"!currentUser\"\n            ></star-rating>\n          </div>\n          <!-- 輸入欄 -->\n          <form>\n            <div class=\"form__row\">\n              <div class=\"form__group\" style=\"margin-right:0px\">\n                <textarea\n                  class=\"user-comment__textarea\"\n                  v-model=\"comment.comment\"\n                  :readonly=\"!currentUser\"\n                  placeholder=\"請開始你的表演\"\n                  @click.prevent=\"alertLogReg\"\n                ></textarea>\n              </div>\n            </div>\n\n            <div class=\"form__group\">\n              <!-- 按鈕組 -->\n              <div class=\"btn-footer\" v-if=\"currentUser\">\n                <button\n                  class=\"btn btn-primary\"\n                  style=\"width:100px\"\n                  v-if=\"inputStatus==='新留言'\"\n                  @click.prevent=\"addComment\"\n                >送出</button>\n                <button\n                  class=\"btn btn-primary\"\n                  style=\"width:100px\"\n                  v-if=\"inputStatus==='編輯留言'\"\n                  @click.prevent=\"updateComment\"\n                >確認</button>\n                <button\n                  class=\"btn btn-primary--cancel\"\n                  style=\"width:100px\"\n                  v-if=\"inputStatus==='編輯留言'\"\n                  @click.prevent=\"inputStatus = '新留言';\n                  inputShow = !inputShow;comment.comment=tempComment\"\n                >取消</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </section>\n\n    <!-- 評論 -->\n    <section>\n      <div class=\"d-flex-column\">\n        <div\n          class=\"user-comment\"\n          v-for=\"comment in comments\"\n          :class=\"{'user-first':!!currentUser&&comment.user.userId=== currentUser.profile.userId,\n          'd-none':inputStatus!=='新留言'&&comment.user.userId===currentUser.profile.userId\n          }\"\n          :key=\"comment.user.userId\"\n        >\n          <div class=\"d-flex\">\n            <div class=\"user-comment__img-box\">\n              <img class=\"user-comment__img\" :src=\"comment.user.userImg\" />\n            </div>\n            <!-- 手機排版 -->\n            <div class=\"user-comment__info d-block-phone\">\n              <div class=\"d-flex\">\n                <div style=\"margin-right:10px\">\n                  <i class=\"fas fa-user\"></i>\n                  {{comment.user.name}}\n                </div>\n                <star-rating\n                  :rating=\"comment.rating\"\n                  :star-size=\"18\"\n                  :read-only=\"true\"\n                  :rounded-corners=\"true\"\n                  :show-rating=\"false\"\n                ></star-rating>\n              </div>\n              <div>\n                <i class=\"far fa-clock\"></i>\n                {{time(comment.timestamp)}}\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"user-comment__content\"\n            :class=\"{'user-current':!!currentUser&&comment.user.userId\n            === currentUser.profile.userId}\"\n          >\n            <!-- 桌機排版 -->\n            <div class=\"user-comment__info d-none-phone\">\n              <div>\n                <i class=\"fas fa-user\"></i>\n                {{comment.user.name}}\n                <i class=\"far fa-clock\"></i>\n                {{time(comment.timestamp)}}\n              </div>\n\n              <star-rating\n                :rating=\"comment.rating\"\n                :star-size=\"20\"\n                :read-only=\"true\"\n                :rounded-corners=\"true\"\n                :show-rating=\"false\"\n              ></star-rating>\n            </div>\n            <p>{{comment.comment}}</p>\n            <div class=\"btn-footer\">\n              <button\n                class=\"btn btn-primary\"\n                style=\"width:100px\"\n                v-if=\"!!currentUser&&comment.user.userId=== currentUser.profile.userId\"\n                @click=\"inputShow =!inputShow;inputStatus='編輯留言';tempComment=comment.comment\"\n              >修改</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport StarRating from 'vue-star-rating';\nimport moment from 'moment';\n\nexport default {\n  name: 'Comments',\n  components: {\n    StarRating,\n  },\n  props: ['comments', 'currentUser', 'courseId'],\n  data() {\n    return {\n      comment: {\n        comment: null,\n        rating: null,\n      },\n      inputStatus: '新留言',\n      inputShow: true,\n      tempComment: null,\n    };\n  },\n  computed: {\n    // 計算平均分數\n    avgRating() {\n      if (this.comments.length === 0) {\n        return 0;\n      }\n      const avg = this.comments\n        .map((comment) => comment.rating)\n        .reduce((acc, cur) => acc + cur) / this.comments.length;\n      return parseFloat(avg.toFixed(1));\n    },\n    // 計算每個bar\n    ratingPercents() {\n      let percents = [0, 0, 0, 0, 0];\n      if (this.comments.length === 0) {\n        return percents;\n      }\n      const ratings = this.comments.map((item) => item.rating); // [5,3,3]\n      // 計算每個rating出現比率\n      percents = percents.map(\n        // eslint-disable-next-line no-return-assign\n        (item, index) => (item = ratings.filter((rating) => rating === index + 1).length)\n          / ratings.length,\n      );\n      // 換算百分比\n      return percents.map((num) => parseFloat(num.toFixed(2)) * 100).reverse();\n    },\n  },\n  watch: {\n    // 若平均評價改變則更新資料庫資料\n    avgRating() {\n      const course = { ...this.$store.state.courses.course };\n      course.avgRating = this.avgRating;\n      this.$store.dispatch('courses/updateCourse', {\n        id: this.courseId,\n        course,\n      });\n    },\n  },\n  methods: {\n    time(num) {\n      return moment(num).format('YYYY/MM/DD HH:mm');\n    },\n    alertLogReg() {\n      if (!this.currentUser) {\n        this.$toasted.info('請先 註冊/登入 以進行評價', {\n          duration: 2000,\n        });\n      }\n    },\n\n    // 新增評價\n    addComment() {\n      if (this.comment.rating && this.comment.comment) {\n        this.comment.user = this.currentUser.profile.userId;\n        this.comment.toId = this.courseId;\n        this.$store\n          .dispatch('comments/createComment', {\n            comment: this.comment,\n            user: this.currentUser,\n          })\n          .then(() => {\n            this.$toasted.success('已收到您的評價', {\n              duration: 2000,\n            });\n            this.inputStatus = '新留言';\n            this.inputShow = !this.inputShow;\n          });\n      } else {\n        this.$toasted.error('請 選取分數 與 留下評論 再送出', {\n          duration: 2000,\n        });\n      }\n    },\n\n    updateComment() {\n      if (this.comment.rating && this.comment.comment) {\n        this.$store\n          .dispatch('comments/updateComment', this.comment)\n          .then(() => {\n            this.$toasted.success('成功修改評價', {\n              duration: 2000,\n            });\n            this.inputStatus = '新留言';\n            this.inputShow = !this.inputShow;\n          });\n      } else {\n        this.$toasted.error('請 選取分數 與 留下評論 再送出', {\n          duration: 2000,\n        });\n      }\n    },\n    init() {\n      if (this.currentUser) {\n        // 確認使用者是否留過言\n        const checkArr = this.comments.find(\n          (comment) => comment.user.userId === this.currentUser.profile.userId,\n        );\n        // 若留過言\n        if (checkArr) {\n          // 不主動顯示輸入框，並讀入可編輯內容\n          this.inputShow = false;\n          this.comment = { ...checkArr };\n        }\n      }\n    },\n  },\n  created() {\n    window.setTimeout(this.init, 3000);\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}