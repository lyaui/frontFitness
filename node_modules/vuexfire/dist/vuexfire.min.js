/*!
  * vuexfire v3.2.1
  * (c) 2019 Eduardo San Martin Morote
  * @license MIT
  */
/*!
  * vuexfire v3.2.1
  * (c) 2019 Eduardo San Martin Morote
  * @license MIT
  */
var Vuexfire=function(e){"use strict";var t="vuexfire/SET_VALUE",n="vuexfire/ARRAY_ADD",r="vuexfire/ARRAY_REMOVE";function o(e,t){return t.split(".").reduce((function(e,t){return e[t]}),e)}function i(e){return e&&"object"==typeof e}function a(e){return e&&e.onSnapshot}function c(e,t){for(var n=0;n<e.length;n++)if(e[n][".key"]===t)return n;return-1}var u={reset:!0,serialize:function(e){var t=e.val(),n=i(t)?t:Object.defineProperty({},".value",{value:t});return Object.defineProperty(n,".key",{value:e.key}),n},wait:!1};function f(e,t,n){var r=[{},{}],o=Object.keys(n).reduce((function(e,t){var r=n[t];return e[r.path]=r.data(),e}),{});return function e(t,n,r,c){n=n||{};var u=c[0],f=c[1];for(var s in Object.getOwnPropertyNames(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);n&&!n.enumerable&&Object.defineProperty(u,e,n)})),t){var l=t[s];if(null==l||l instanceof Date||l.toDate||l.longitude&&l.latitude)u[s]=l;else if(a(l))u[s]="object"==typeof n&&s in n?n[s]:l.path,f[r+s]=l;else if(Array.isArray(l)){u[s]=Array(l.length);for(var v=0;v<l.length;v++){var d=l[v];d.path in o&&(u[s][v]=o[d.path])}e(l,u[s],r+s+".",[u[s],f])}else i(l)?(u[s]={},e(l,n[s],r+s+".",[u[s],f])):u[s]=l}}(e,t,"",r),r}var s,l={maxRefDepth:2,reset:!0,serialize:function(e){return Object.defineProperty(e.data()||{},"id",{value:e.id})},wait:!1};function v(e){for(var t in e)e[t].unsub()}function d(e,t,n,r,i,a,c,u){var s=f(e.serialize(r),o(t,n),i),l=s[0],v=s[1];a.set(t,n,l),h(e,t,n,i,v,a,c,u)}function p(e,t){var n=e.ref,r=e.target,o=e.path,i=e.depth,a=e.resolve,c=e.ops,u=Object.create(null),f=n.onSnapshot((function(e){e.exists?d(t,r,o,e,u,c,i,a):(c.set(r,o,null),a())}));return function(){f(),v(u)}}function h(e,t,n,r,i,a,c,u){var f=Object.keys(i);if(Object.keys(r).filter((function(e){return f.indexOf(e)<0})).forEach((function(e){r[e].unsub(),delete r[e]})),!f.length||++c>e.maxRefDepth)return u(n);var s=0,l=f.length,v=Object.create(null);function d(e){e in v&&++s>=l&&u(n)}f.forEach((function(u){var f=r[u],s=i[u],l=n+"."+u;if(v[l]=!0,f){if(f.path===s.path)return;f.unsub()}r[u]={data:function(){return o(t,l)},unsub:p({ref:s,target:t,path:l,depth:c,ops:a,resolve:d.bind(null,l)},e),path:s.path}}))}var b=((s={})[t]=function(e,t){var n=t.path;!function(e,t,n){var r=(""+t).split("."),o=r.pop(),i=r.reduce((function(e,t){return e[t]}),e);Array.isArray(i)?i.splice(Number(o),1,n):i[o]=n}(t.target,n,t.data)},s[n]=function(e,t){var n=t.newIndex,r=t.data;t.target.splice(n,0,r)},s[r]=function(e,t){var n=t.oldIndex;return t.target.splice(n,1)[0]},s),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g={root:!0},m=new WeakMap;
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */function j(e,t,n,r,o,i){var a=m.get(t);return a||(a=Object.create(null),m.set(t,a)),n in a&&O(t,n,i&&i.reset),new Promise((function(t,f){a[n]=Array.isArray(e[n])?function(e,t){var n=e.vm,r=e.key,o=e.collection,i=e.resolve,a=e.reject,f=e.ops;void 0===t&&(t=u);var s=Object.assign({},u,t),l=s.wait?[]:f.set(n,r,[]),v=o.on("child_added",(function(e,t){var n=t?c(l,t)+1:0;f.add(l,n,s.serialize(e))}),a),d=o.on("child_removed",(function(e){f.remove(l,c(l,e.key))}),a),p=o.on("child_changed",(function(e){f.set(l,c(l,e.key),s.serialize(e))}),a),h=o.on("child_moved",(function(e,t){var n=c(l,e.key),r=f.remove(l,n)[0],o=t?c(l,t)+1:0;f.add(l,o,r)}),a);return o.once("value",(function(e){s.wait&&f.set(n,r,l),i(e)})),function(e){if(o.off("child_added",v),o.off("child_changed",p),o.off("child_removed",d),o.off("child_moved",h),!1!==e){var t="function"==typeof e?e():[];f.set(n,r,t)}}}({vm:e,key:n,collection:r,ops:o,resolve:t,reject:f},i):function(e,t){var n=e.vm,r=e.key,o=e.document,i=e.resolve,a=e.reject,c=e.ops;void 0===t&&(t=u);var f=Object.assign({},u,t),s=o.on("value",(function(e){c.set(n,r,f.serialize(e))}),a);return o.once("value",i),function(e){if(o.off("value",s),!1!==e){var t="function"==typeof e?e():null;c.set(n,r,t)}}}({vm:e,key:n,document:r,ops:o,resolve:t,reject:f},i)}))}function O(e,t,n){var r=m.get(e);r&&r[t]&&(r[t](n),delete r[t])}var w={root:!0},x=new WeakMap;function k(e,t,n,r,i,a){var c=x.get(t);return c||(c=Object.create(null),x.set(t,c)),n in c&&A(t,n,a.wait?"function"==typeof a.reset&&a.reset:a.reset),new Promise((function(t,u){c[n]="where"in r?function(e,t){var n=e.vm,r=e.key,o=e.collection,i=e.ops,a=e.resolve,c=e.reject;void 0===t&&(t=l);var u,s=Object.assign({},l,t),d=s.wait?[]:i.set(n,r,[]),p=a,b=[],y={added:function(e){var t=e.newIndex,n=e.doc;b.splice(t,0,Object.create(null));var r=b[t],o=f(s.serialize(n),void 0,r),c=o[0],u=o[1];i.add(d,t,c),h(s,d,t,r,u,i,0,a.bind(null,n))},modified:function(e){var t=e.oldIndex,n=e.newIndex,r=e.doc,o=b[t],c=d[t],u=f(s.serialize(r),c,o),l=u[0],v=u[1];b.splice(n,0,o),i.remove(d,t),i.add(d,n,l),h(s,d,n,o,v,i,0,a)},removed:function(e){var t=e.oldIndex;i.remove(d,t),v(b.splice(t,1)[0])}},g=o.onSnapshot((function(e){var t="function"==typeof e.docChanges?e.docChanges():e.docChanges;if(!u&&t.length){u=!0;for(var o=0,c=t.length,f=Object.create(null),l=0;l<c;l++)f[t[l].doc.id]=!0;a=function(e){e.id in f&&++o>=c&&(s.wait&&i.set(n,r,d),p(n[r]),a=function(){})}}t.forEach((function(e){y[e.type](e)})),t.length||(s.wait&&i.set(n,r,d),a(d))}),c);return function(e){if(g(),!1!==e){var t="function"==typeof e?e():[];i.set(n,r,t)}b.forEach(v)}}({vm:e,key:n,collection:r,ops:i,resolve:t,reject:u},a):function(e,t){var n=e.vm,r=e.key,i=e.document,a=e.resolve,c=e.reject,u=e.ops;void 0===t&&(t=l);var f,s,p,h=Object.assign({},l,t),b=Object.create(null);f=a,s=function(){return o(n,r)},p=!1,a=function(){if(!p)return p=!0,f(s())};var y=i.onSnapshot((function(e){e.exists?d(h,n,r,e,b,u,0,a):(u.set(n,r,null),a(null))}),c);return function(e){if(y(),!1!==e){var t="function"==typeof e?e():null;u.set(n,r,t)}v(b)}}({vm:e,key:n,document:r,ops:i,resolve:t,reject:u},a)}))}function A(e,t,n){var r=x.get(e);r&&r[t]&&(r[t](n),delete r[t])}return e.firebaseAction=function(e){return function(o,i){var a=o.state,c=o.commit,f={set:function(e,n,r){return c(t,{path:n,target:e,data:r},g),r},add:function(e,t,r){return c(n,{target:e,newIndex:t,data:r},g)},remove:function(e,t){var n=e[t];return c(r,{target:e,oldIndex:t},g),[n]}};return e.call(this,y(y({},o),{bindFirebaseRef:function(e,t,n){return j(a,c,e,t,f,Object.assign({},u,n))},unbindFirebaseRef:function(e,t){return O(c,e,t)}}),i)}},e.firestoreAction=function(e){return function(o,i){var a=o.state,c=o.commit,u={set:function(e,n,r){return c(t,{path:n,target:e,data:r},w),r},add:function(e,t,r){return c(n,{target:e,newIndex:t,data:r},w)},remove:function(e,t){var n=e[t];return c(r,{target:e,oldIndex:t},w),[n]}};return e.call(this,y(y({},o),{bindFirestoreRef:function(e,t,n){return k(a,c,e,t,u,Object.assign({},l,n))},unbindFirestoreRef:function(e,t){return A(c,e,t)}}),i)}},e.firestoreOptions=l,e.rtdbOptions=u,e.vuexfireMutations=b,e}({});
