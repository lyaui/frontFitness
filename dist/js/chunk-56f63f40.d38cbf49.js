(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56f63f40"],{"581a":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-bar"},[s("ul",{staticClass:"step-bar__list"},[s("li",{staticClass:"step-bar__item step-bar__item--first"},[s("div",{staticClass:"step-bar__circle",class:{"step-bar__circle--active":"cart"===t.status,"step-bar__circle--done":"checkout"===t.status||"success"===t.status}},[s("span",[t._v("1")])]),s("div",{staticClass:"step-bar__line"}),t._m(0)]),s("li",{staticClass:"step-bar__item step-bar__item--secondary"},[s("div",{staticClass:"step-bar__circle",class:{"step-bar__circle--active":"checkout"===t.status,"step-bar__circle--done":"success"===t.status}},[s("span",[t._v("2")])]),s("div",{staticClass:"step-bar__line"}),t._m(1)]),s("li",{staticClass:"step-bar__item step-bar__item--last"},[s("div",{staticClass:"step-bar__circle",class:{"step-bar__circle--done":"success"===t.status}},[s("span",[t._v("3")])]),t._m(2)])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-bar__title"},[s("span",{staticClass:"spacing-adjust"},[t._v("購物車")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-bar__title"},[s("span",{staticClass:"spacing-adjust"},[t._v("結帳")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-bar__title"},[s("span",{staticClass:"spacing-adjust"},[t._v("購買完成")])])}],i={name:"StepBar",props:["status"]},n=i,c=s("2877"),o=Object(c["a"])(n,a,r,!1,null,null,null);e["a"]=o.exports},b7c8:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("main",{staticClass:"courses-main"},[s("div",{staticClass:"container"},[s("step-bar",{attrs:{status:t.status}}),s("div",{staticClass:"checkout"},[s("div",{staticClass:"checkout__info mb-sm"},[s("div",{staticClass:"checkout-form checkout-payment__courses mb-sm"},[t._m(0),s("table",{staticClass:"checkout-table"},[t._m(1),s("tbody",t._l(t.courses,function(e){return s("tr",{key:e.title},[s("td",[t._v(t._s(e.title))]),s("td",{staticClass:"d-none-phone"},[e.discount&&t.total.totalDiscount>0?[t._v("精選優惠")]:[t._v("課程售價")]],2),s("td",{staticClass:"d-none-phone",staticStyle:{"text-align":"right"}},[t._v("\n                    "+t._s(t._f("currency")(e.price))+"\n                  ")]),s("td",{staticStyle:{"text-align":"right"}},[0!==t.total.totalDiscount&&e.discount?[t._v(t._s(t._f("currency")(e.price-100)))]:[t._v(t._s(t._f("currency")(e.price)))]],2)])}),0)]),s("div",{staticClass:"checkout-payment__total"},[t._v("\n              實付金額\n              "),s("b",{staticClass:"ml-sm"},[t._v(t._s(t._f("currency")(t.total.totalPrice)))])])]),s("div",{staticClass:"checkout-form mb-sm"},[t._m(2),s("div",{staticClass:"form__row"},[s("div",{staticClass:"form__group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.payWay,expression:"userInfo.payWay"}],staticClass:"form__input",class:{"form__input--warning":t.$v.userInfo.payWay.$error},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.userInfo,"payWay",e.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("--請選擇付款方式--")]),s("option",{attrs:{value:"信用卡"}},[t._v("信用卡")]),s("option",{attrs:{value:"ATM轉帳"}},[t._v("ATM轉帳")]),s("option",{attrs:{value:"超商付款"}},[t._v("超商付款")])]),t.$v.userInfo.payWay.$dirty?[t.$v.userInfo.payWay.required?t._e():s("span",{staticClass:"text-warning"},[t._v("請選擇付款方式")])]:t._e()],2)])]),s("div",{staticClass:"checkout-form"},[t._m(3),t._m(4),s("form",{staticClass:"checkout-form__form"},[s("div",{staticClass:"form__row"},[s("div",{staticClass:"form__group"},[t._m(5),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.userInfo.name,expression:"userInfo.name",modifiers:{trim:!0}}],staticClass:"form__input",class:{"form__input--warning":t.$v.userInfo.name.$error},attrs:{id:"paymentName",placeholder:"請填入真實姓名",type:"text"},domProps:{value:t.userInfo.name},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.userInfo.name.$dirty?[t.$v.userInfo.name.required?t._e():s("span",{staticClass:"text-warning"},[t._v("姓名為必填欄位")])]:t._e()],2),s("div",{staticClass:"form__group"},[t._m(6),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.userInfo.email,expression:"userInfo.email",modifiers:{trim:!0}}],staticClass:"form__input",class:{"form__input--warning":t.$v.userInfo.email.$error},attrs:{id:"paymentMail",placeholder:"請填入電子信箱",type:"email"},domProps:{value:t.userInfo.email},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.userInfo.email.$dirty?[t.$v.userInfo.email.required?t._e():s("span",{staticClass:"text-warning"},[t._v("信箱為必填欄位")]),t.$v.userInfo.email.email?t._e():s("span",{staticClass:"text-warning"},[t._v("請輸入正確信箱格式")])]:t._e()],2)]),s("div",{staticClass:"form__row"},[s("div",{staticClass:"form__group"},[t._m(7),s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.userInfo.phone,expression:"userInfo.phone",modifiers:{trim:!0,number:!0}}],staticClass:"form__input",class:{"form__input--warning":t.$v.userInfo.phone.$error},attrs:{id:"paymentPhone",placeholder:"請填入聯絡電話",type:"tel"},domProps:{value:t.userInfo.phone},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"phone",t._n(e.target.value.trim()))},blur:function(e){return t.$forceUpdate()}}}),t.$v.userInfo.phone.$dirty?[t.$v.userInfo.phone.required?t._e():s("span",{staticClass:"text-warning"},[t._v("電話為必填欄位")]),t.$v.userInfo.phone.numeric?t._e():s("span",{staticClass:"text-warning"},[t._v("電話號碼必為數字")])]:t._e()],2)]),s("div",{staticClass:"form__row"},[s("div",{staticClass:"form__group"},[s("label",{staticClass:"form__label",attrs:{for:"paymentRemark"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.remark,expression:"userInfo.remark"}],staticClass:"form__input",staticStyle:{height:"100px"},attrs:{id:"paymentRemark",placeholder:"如有任何備註事項請註明",cols:"30",rows:"20"},domProps:{value:t.userInfo.remark},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"remark",e.target.value)}}})])])])])]),s("div",{staticClass:"checkout__summary"},[s("div",{staticClass:"checkout__summary-title heading-tertiary--dark"},[t._v("\n            訂單明細\n          ")]),s("div",{staticClass:"checkout__summary-price"},[s("div",[t._v("原價")]),s("div",[t._v(t._s(t._f("currency")(t.total.totalOrigin)))])]),s("div",{staticClass:"checkout__summary-price"},[s("div",[t._v("優惠券折扣")]),s("div",[t._v("-"+t._s(t._f("currency")(t.total.totalDiscount)))])]),s("div",{staticClass:"checkout__summary-total"},[s("div",[t._v("總計")]),s("h3",[t._v(t._s(t._f("currency")(t.total.totalPrice)))])]),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.checkOut()}}},[t._v("\n            確認送出\n          ")])])])],1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heading-tertiary--dark mb-sm"},[s("i",{staticClass:"fas fa-money-check fa-lg"}),t._v(" 結帳金額\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("課程名稱")]),s("th",{staticClass:"d-none-phone"},[t._v("購買方案")]),s("th",{staticClass:"d-none-phone"},[t._v("原價")]),s("th",[t._v("售價")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heading-tertiary--dark mb-sm"},[s("i",{staticClass:"far fa-credit-card fa-lg"}),t._v("\n              付款方式\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heading-tertiary--dark mb-sm"},[s("i",{staticClass:"fas fa-cash-register fa-lg"}),t._v("\n              發票選項\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"checkout-form__text mb-sm"},[t._v("\n              以下資訊只用於開立發票，不會在其他頁面顯示。發票開立後不可更改，請確認資訊是否都填寫正確！\n              "),s("br"),t._v("（ "),s("span",{staticClass:"text-highlight"},[t._v("*")]),t._v(" 為必填欄位）\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"form__label",attrs:{for:"paymentName"}},[t._v("\n                    姓名\n                    "),s("span",{staticClass:"text-highlight"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"form__label",attrs:{for:"paymentMail"}},[t._v("\n                    聯絡電子信箱\n                    "),s("span",{staticClass:"text-highlight"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"form__label",attrs:{for:"paymentPhone"}},[t._v("\n                    聯絡電話\n                    "),s("span",{staticClass:"text-highlight"},[t._v("*")])])}],i=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),n=s("581a"),c=s("b5ae");function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach(function(e){Object(i["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var u={name:"Checkout",components:{StepBar:n["a"]},data:function(){return{status:"checkout",paymentId:null,userInfo:{payWay:null,name:null,email:null,phone:null,remark:null}}},validations:{userInfo:{payWay:{required:c["required"]},name:{required:c["required"]},email:{required:c["required"],email:c["email"]},phone:{required:c["required"],numeric:c["numeric"]}}},computed:{user:function(){var t=this;return t.$store.state.auth.user},total:function(){var t=this;return t.$store.state.checkout.payment.total},courses:function(){var t=this;return t.$store.state.checkout.payment.courses},path:function(){var t=this;return t.$store.state.checkout.payment.id}},watch:{path:function(){var t=this;t.$router.push("/checkout/".concat(t.path))}},methods:{checkOut:function(){var t=this;if(t.$v.$touch(),t.$v.$invalid)t.$toasted.error("請正確填寫必要資訊",{duration:3e3});else{var e=t.courses.map(function(e){return{id:e.id,title:e.title,plan:e.discount&&t.total.totalDiscount>0?"精選優惠":"課程售價",price:e.price,sellingPrice:e.discount&&t.total.totalDiscount>0?e.price-t.$store.state.cart.discount:e.price}}),s={courses:e,user:l({userId:t.user.uid},t.userInfo),total:t.total};t.$store.dispatch("checkout/createPayment",s).then(function(){t.$toasted.success("訂單建立成功 請儘快付款",{duration:3e3}),t.$store.commit("cart/clearCart")})}}},created:function(){var t=this;t.userInfo.name=t.user.profile.name,t.userInfo.email=t.user.profile.email}},_=u,m=s("2877"),p=Object(m["a"])(_,a,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-56f63f40.d38cbf49.js.map