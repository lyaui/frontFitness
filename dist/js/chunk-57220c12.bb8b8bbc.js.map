{"version":3,"sources":["webpack:///./src/views/frontend/Cart.vue?b0a1","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?b128","webpack:///./src/views/frontend/Cart.vue","webpack:///./src/components/StepBar.vue?d2e9","webpack:///src/components/StepBar.vue","webpack:///./src/components/StepBar.vue?7d14","webpack:///./src/components/StepBar.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","status","cartCourses","length","_v","_s","on","click","$event","preventDefault","selectCat","_l","course","key","id","src","imageUrl","alt","title","to","name","params","course_id","_e","discounted","discount","categorySelected","coach","week","time","_f","price","deleteCourse","total","totalOrigin","totalDiscount","totalPrice","directives","rawName","value","expression","modifiers","trim","type","placeholder","disabled","couponCode","domProps","input","target","composing","blur","$forceUpdate","feedback","checkOut","staticStyle","margin","staticRenderFns","Cartvue_type_script_lang_js_","components","StepBar","data","coupon","couponCourse","computed","user","vm","$store","state","auth","cart","watch","commit","methods","cat","dispatch","then","$router","push","courses","$toasted","error","duration","logRegStatus","show","$modal","created","frontend_Cartvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","class","step-bar__circle--active","step-bar__circle--done","_m","StepBarvue_type_script_lang_js_","props","components_StepBarvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-57220c12.bb8b8bbc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('main',{staticClass:\"courses-main\"},[_c('div',{staticClass:\"container\"},[_c('step-bar',{attrs:{\"status\":_vm.status}}),_c('div',{staticClass:\"checkout\"},[_c('div',{staticClass:\"checkout__items\"},[(_vm.cartCourses.length > 0)?_c('div',{staticClass:\"heading-tertiary--dark mb-sm\"},[_c('i',{staticClass:\"fas fa-shopping-cart fa-lg\"}),_vm._v(\"\\n            購物車中有 \"+_vm._s(_vm.cartCourses.length)+\" 門課程\\n          \")]):_c('div',{staticClass:\"heading-tertiary--dark mb-sm\"},[_c('i',{staticClass:\"fas fa-shopping-cart fa-lg\"}),_vm._v(\"\\n            購物車中尚無課程！\\n            \"),_c('button',{staticClass:\"btn heading-tertiary--dark\",on:{\"click\":function($event){$event.preventDefault();return _vm.selectCat('所有課程')}}},[_c('u',[_vm._v(\"速選購\")])]),_vm._v(\"\\n            💪\\n          \")]),_c('ul',{staticClass:\"checkout__list\"},_vm._l((_vm.cartCourses),function(course){return _c('li',{key:course.id,staticClass:\"cart__item\"},[_c('div',{staticClass:\"d-flex\"},[_c('img',{staticClass:\"cart__img\",attrs:{\"src\":course.imageUrl,\"alt\":course.title}})]),_c('div',{staticClass:\"cart__info\"},[_c('router-link',{staticClass:\"cart__link\",attrs:{\"to\":{\n                    name: 'CourseDetails',\n                    params: { course_id: course.id },\n                  }}},[_c('div',{staticClass:\"cart__tag-box d-none-phone\"},[(course.discount)?_c('div',{staticClass:\"cart__tag\"},[_vm._v(\"\\n                      精選課程\\n                    \")]):_vm._e(),(_vm.discounted && course.discount)?_c('span',{staticClass:\"text-warning\"},[_vm._v(\"已成功套用優惠券\")]):_vm._e()]),_c('div',{staticClass:\"cart__title d-none-phone\"},[_vm._v(\"\\n                    \"+_vm._s(course.title)+\"\\n                  \")]),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"cart__category\"},[_vm._v(_vm._s(course.categorySelected)+\"｜\")]),_c('div',{staticClass:\"cart__coach\"},[_vm._v(_vm._s(course.coach)+\"｜\")]),_c('div',{staticClass:\"cart__time\"},[_vm._v(_vm._s(course.week)+\" \"+_vm._s(course.time))])])]),_c('div',{staticClass:\"cart__handle\"},[_c('div',{staticClass:\"cart__price\"},[(!_vm.discounted)?_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(\"\\n                      \"+_vm._s(_vm._f(\"currency\")(course.price))+\"\\n                    \")]):_vm._e(),(_vm.discounted)?[(course.discount)?[_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(\"\\n                          \"+_vm._s(_vm._f(\"currency\")((course.price - 100)))+\"\\n                        \")]),_c('div',{staticClass:\"cart__price--discount\"},[_vm._v(\"\\n                          \"+_vm._s(_vm._f(\"currency\")(course.price))+\"\\n                        \")])]:_vm._e(),(!course.discount)?[_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(\"\\n                          \"+_vm._s(_vm._f(\"currency\")(course.price))+\"\\n                        \")])]:_vm._e()]:_vm._e()],2),_c('button',{staticClass:\"cart__remove btn\",on:{\"click\":function($event){return _vm.deleteCourse(course)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})])])],1)])}),0)]),_c('div',{staticClass:\"checkout__summary\"},[_c('div',{staticClass:\"checkout__summary-title heading-tertiary--dark\"},[_vm._v(\"\\n            訂單明細\\n          \")]),_c('div',{staticClass:\"checkout__summary-price\"},[_c('div',[_vm._v(\"原價\")]),_c('div',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.total.totalOrigin)))])]),(_vm.discounted)?_c('div',{staticClass:\"checkout__summary-price\"},[_c('div',[_vm._v(\"優惠券折扣\")]),_c('div',[_vm._v(\"-\"+_vm._s(_vm._f(\"currency\")(_vm.total.totalDiscount)))])]):_vm._e(),_c('div',{staticClass:\"checkout__summary-total\"},[_c('div',[_vm._v(\"總計\")]),_c('h3',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.total.totalPrice)))])]),_c('div',{staticClass:\"form__row\"},[_c('div',{staticClass:\"form__group\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(\"使用折扣代碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.couponCode),expression:\"couponCode\",modifiers:{\"trim\":true}}],staticClass:\"mb-sm form__input\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠券\",\"disabled\":_vm.couponCode === 'LOVEFITTING'},domProps:{\"value\":(_vm.couponCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.couponCode=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"text-warning\"},[_vm._v(_vm._s(_vm.feedback))])])]),(_vm.cartCourses.length > 0)?_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.checkOut()}}},[_vm._v(\"\\n            會員結帳\\n          \")]):_c('button',{staticClass:\"btn btn-primary--cancel\",staticStyle:{\"margin\":\"0\"},on:{\"click\":function($event){return _vm.selectCat('所有課程')}}},[_vm._v(\"\\n            請先選購課程\\n          \")])])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <main class=\"courses-main\">\n      <div class=\"container\">\n        <step-bar :status=\"status\"></step-bar>\n        <div class=\"checkout\">\n          <div class=\"checkout__items\">\n            <div class=\"heading-tertiary--dark mb-sm\" v-if=\"cartCourses.length > 0\">\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中有 {{ cartCourses.length }} 門課程\n            </div>\n            <div class=\"heading-tertiary--dark mb-sm\" v-else>\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中尚無課程！\n              <button class=\"btn heading-tertiary--dark\" @click.prevent=\"selectCat('所有課程')\">\n                <u>速選購</u>\n              </button>\n              &#128170;\n            </div>\n            <ul class=\"checkout__list\">\n              <li class=\"cart__item\" v-for=\"course in cartCourses\" :key=\"course.id\">\n                <div class=\"d-flex\">\n                  <img class=\"cart__img\" :src=\"course.imageUrl\" :alt=\"course.title\" />\n                </div>\n\n                <div class=\"cart__info\">\n                  <router-link\n                    class=\"cart__link\"\n                    :to=\"{\n                      name: 'CourseDetails',\n                      params: { course_id: course.id },\n                    }\"\n                  >\n                    <div class=\"cart__tag-box d-none-phone\">\n                      <div v-if=\"course.discount\" class=\"cart__tag\">\n                        精選課程\n                      </div>\n                      <span class=\"text-warning\" v-if=\"discounted && course.discount\">已成功套用優惠券</span>\n                    </div>\n\n                    <div class=\"cart__title d-none-phone\">\n                      {{ course.title }}\n                    </div>\n                    <div class=\"d-flex\">\n                      <div class=\"cart__category\">{{ course.categorySelected }}｜</div>\n                      <div class=\"cart__coach\">{{ course.coach }}｜</div>\n                      <div class=\"cart__time\">{{ course.week }} {{ course.time }}</div>\n                    </div>\n                  </router-link>\n                  <div class=\"cart__handle\">\n                    <div class=\"cart__price\">\n                      <!-- 沒有使用優惠券時的價格（橘字） -->\n                      <div v-if=\"!discounted\" class=\"cart__price--origin\">\n                        {{ course.price | currency }}\n                      </div>\n                      <!-- 使用優惠券-->\n                      <template v-if=\"discounted\">\n                        <template v-if=\"course.discount\">\n                          <!-- 有優惠的課程(橘字) -->\n                          <div class=\"cart__price--origin\">\n                            {{ (course.price - 100) | currency }}\n                          </div>\n                          <!-- 原價（刪除線） -->\n                          <div class=\"cart__price--discount\">\n                            {{ course.price | currency }}\n                          </div>\n                        </template>\n                        <!-- 沒有優惠的課程 -->\n                        <template v-if=\"!course.discount\">\n                          <div class=\"cart__price--origin\">\n                            {{ course.price | currency }}\n                          </div>\n                        </template>\n                      </template>\n                    </div>\n                    <button class=\"cart__remove btn\" @click=\"deleteCourse(course)\">\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"checkout__summary\">\n            <div class=\"checkout__summary-title heading-tertiary--dark\">\n              訂單明細\n            </div>\n\n            <div class=\"checkout__summary-price\">\n              <div>原價</div>\n              <div>{{ total.totalOrigin | currency }}</div>\n            </div>\n            <div class=\"checkout__summary-price\" v-if=\"discounted\">\n              <div>優惠券折扣</div>\n              <div>-{{ total.totalDiscount | currency }}</div>\n            </div>\n            <div class=\"checkout__summary-total\">\n              <div>總計</div>\n              <h3>{{ total.totalPrice | currency }}</h3>\n            </div>\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"form__label\">使用折扣代碼</div>\n                <input class=\"mb-sm form__input\" type=\"text\" v-model.trim=\"couponCode\" placeholder=\"請輸入優惠券\" :disabled=\"couponCode === 'LOVEFITTING'\" />\n                <span class=\"text-warning\">{{ feedback }}</span>\n              </div>\n            </div>\n\n            <button v-if=\"cartCourses.length > 0\" class=\"btn btn-primary\" @click=\"checkOut()\">\n              會員結帳\n            </button>\n            <button v-else class=\"btn btn-primary--cancel\" style=\"margin: 0;\" @click=\"selectCat('所有課程')\">\n              請先選購課程\n            </button>\n          </div>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport StepBar from '@/components/StepBar.vue';\n\nexport default {\n  name: 'Cart',\n  components: {\n    StepBar,\n  },\n  data() {\n    return {\n      status: 'cart',\n      coupon: false,\n      couponCode: null,\n      couponCourse: null,\n    };\n  },\n  computed: {\n    user() {\n      const vm = this;\n      return vm.$store.state.auth.user;\n    },\n    cartCourses() {\n      const vm = this;\n      return vm.$store.state.cart.cart;\n    },\n\n    // 計算價格相關\n    total() {\n      const vm = this;\n      return vm.$store.state.cart.total;\n    },\n\n    // 折扣訊息\n    feedback() {\n      const vm = this;\n      // 沒輸入折扣代碼\n      if (!vm.couponCode) {\n        return null;\n      }\n      // 錯的折扣代碼\n      if (vm.couponCode !== 'LOVEFITTING') {\n        return '代碼不存在 請再次確認';\n      }\n      // 有折扣代碼課程\n      if (vm.total.totalDiscount !== 0) {\n        return '已成功套用優惠券';\n      }\n      // 無折扣代碼課程\n      return '無符合活動優惠之課程';\n    },\n\n    // 是否成功使用優惠券狀態\n    discounted() {\n      const vm = this;\n      return vm.$store.state.cart.coupon;\n    },\n  },\n  watch: {\n    // 輸入成功時就會送出折扣碼\n    couponCode() {\n      const vm = this;\n      if (vm.couponCode === 'LOVEFITTING') {\n        vm.coupon = true;\n        vm.$store.commit('cart/addCouponCode', vm.coupon);\n      }\n      // 計算總價\n      vm.$store.commit('cart/total');\n    },\n  },\n  methods: {\n    deleteCourse(course) {\n      const vm = this;\n      vm.$store.commit('cart/removeItem', course);\n      // 計算總價\n      vm.$store.commit('cart/total');\n    },\n    selectCat(cat) {\n      const vm = this;\n      vm.$store.dispatch('courses/getCourses', cat).then(() => vm.$router.push('/courses'));\n    },\n\n    // 下一步\n    checkOut() {\n      const vm = this;\n      if (vm.user && vm.cartCourses.length > 0) {\n        // 創建暫時訂單\n        vm.$store.commit('checkout/setPayment', {\n          courses: vm.cartCourses,\n          total: vm.total,\n        });\n        vm.$router.push('/checkout');\n      } else {\n        vm.$toasted.error('請先登入或註冊會員', { duration: 3000 });\n        vm.logRegStatus('登入');\n      }\n    },\n    logRegStatus(status) {\n      const vm = this;\n      vm.$store.commit('auth/setStatus', status);\n      vm.show();\n    },\n    show() {\n      const vm = this;\n      vm.$modal.show('logRegModal');\n    },\n  },\n\n  created() {\n    const vm = this;\n    // 初始設定coupon是false，離開頁面就折扣就會消失\n    vm.$store.commit('cart/addCouponCode', vm.coupon);\n    vm.$store.commit('cart/total');\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=4fb34b95&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar\"},[_c('ul',{staticClass:\"step-bar__list\"},[_c('li',{staticClass:\"step-bar__item step-bar__item--first\"},[_c('div',{staticClass:\"step-bar__circle\",class:{\n          'step-bar__circle--active': _vm.status === 'cart',\n          'step-bar__circle--done': _vm.status === 'checkout' || _vm.status === 'success',\n        }},[_c('span',[_vm._v(\"1\")])]),_c('div',{staticClass:\"step-bar__line\"}),_vm._m(0)]),_c('li',{staticClass:\"step-bar__item step-bar__item--secondary\"},[_c('div',{staticClass:\"step-bar__circle\",class:{\n          'step-bar__circle--active': _vm.status === 'checkout',\n          'step-bar__circle--done': _vm.status === 'success',\n        }},[_c('span',[_vm._v(\"2\")])]),_c('div',{staticClass:\"step-bar__line\"}),_vm._m(1)]),_c('li',{staticClass:\"step-bar__item step-bar__item--last\"},[_c('div',{staticClass:\"step-bar__circle\",class:{ 'step-bar__circle--done': _vm.status === 'success' }},[_c('span',[_vm._v(\"3\")])]),_vm._m(2)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"購物車\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"結帳\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"購買完成\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"step-bar\">\n    <ul class=\"step-bar__list\">\n      <li class=\"step-bar__item step-bar__item--first\">\n        <div\n          class=\"step-bar__circle\"\n          :class=\"{\n            'step-bar__circle--active': status === 'cart',\n            'step-bar__circle--done': status === 'checkout' || status === 'success',\n          }\"\n        >\n          <span>1</span>\n        </div>\n        <div class=\"step-bar__line\"></div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">購物車</span>\n        </div>\n      </li>\n      <li class=\"step-bar__item step-bar__item--secondary\">\n        <div\n          class=\"step-bar__circle\"\n          :class=\"{\n            'step-bar__circle--active': status === 'checkout',\n            'step-bar__circle--done': status === 'success',\n          }\"\n        >\n          <span>2</span>\n        </div>\n        <div class=\"step-bar__line\"></div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">結帳</span>\n        </div>\n      </li>\n      <li class=\"step-bar__item step-bar__item--last\">\n        <div class=\"step-bar__circle\" :class=\"{ 'step-bar__circle--done': status === 'success' }\">\n          <span>3</span>\n        </div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">購買完成</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StepBar',\n  props: ['status'],\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StepBar.vue?vue&type=template&id=b3f2ef40&\"\nimport script from \"./StepBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StepBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}