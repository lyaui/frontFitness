(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-393828af"],{"1fb5":function(e,t,r){},"2fdb":function(e,t,r){"use strict";var s=r("5ca1"),a=r("d2c8"),i="includes";s(s.P+s.F*r("5147")(i),"String",{includes:function(e){return!!~a(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},5147:function(e,t,r){var s=r("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[s]=!1,!"/./"[e](t)}catch(a){}}return!0}},6762:function(e,t,r){"use strict";var s=r("5ca1"),a=r("c366")(!0);s(s.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},"7a3c":function(e,t,r){"use strict";var s=r("1fb5"),a=r.n(s);a.a},a238:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",{staticClass:"heading-secondary"},[e._v(e._s(e.status))]),r("div",{staticClass:"admin-panel mb-md"},[r("form",[r("div",{staticClass:"edit-form"},[r("div",{staticClass:"cover-upload"},[r("div",[r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("輸入封面網址")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.course.imageUrl,expression:"course.imageUrl"}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.imageUrl.$error},attrs:{type:"text",placeholder:"https://unsplash..."},domProps:{value:e.course.imageUrl},on:{input:function(t){t.target.composing||e.$set(e.course,"imageUrl",t.target.value)}}}),e.$v.course.imageUrl.$dirty?[e.$v.course.imageUrl.required?e._e():r("span",{staticClass:"text-warning"},[e._v("封面網址為必填欄位")]),e.$v.course.imageUrl.url?e._e():r("span",{staticClass:"text-warning"},[e._v("請輸入正確格式網址")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("\n                  或 選擇封面檔案\n                  "),e.updateCover?r("i",{staticClass:"fas fa-spinner fa-spin"}):e._e()]),r("input",{staticClass:"form__input",attrs:{type:"file"},on:{change:e.uploadImage}})])])]),e.course.imageUrl?r("img",{staticClass:"form__img",attrs:{src:e.course.imageUrl}}):r("img",{staticClass:"form__img",attrs:{src:"https://fakeimg.pl/250x150/?retina=1&text=請上傳封面&font=noto"}})]),r("div",{staticClass:"content-edit"},[r("div",{},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程名稱（標題上限25字元）")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.course.title,expression:"course.title",modifiers:{trim:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.title.$error},attrs:{placeholder:"請填入課程名稱",type:"text",maxlength:e.titleMax},domProps:{value:e.course.title},on:{input:function(t){t.target.composing||e.$set(e.course,"title",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("div",{staticClass:"form__counter"},[r("span",[e._v(e._s(e.titleMax-e.course.title.length))])]),e.$v.course.title.$dirty?[e.$v.course.title.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程名稱為必填欄位")]),e.$v.course.title.maxLength?e._e():r("span",{staticClass:"text-warning"},[e._v("超過上限25字元 請刪減標題長度")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程簡介（簡介上限80字元）")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.course.intro,expression:"course.intro",modifiers:{trim:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.intro.$error},staticStyle:{"padding-right":"40px"},attrs:{placeholder:"請填入課程簡介",type:"textarea",maxlength:e.introMax},domProps:{value:e.course.intro},on:{input:function(t){t.target.composing||e.$set(e.course,"intro",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("div",{staticClass:"form__counter"},[r("span",[e._v(e._s(e.introMax-e.course.intro.length))])]),e.$v.course.intro.$dirty?[e.$v.course.intro.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程簡介為必填欄位")]),e.$v.course.intro.maxLength?e._e():r("span",{staticClass:"text-warning"},[e._v("超過上限80字元 請刪減簡介長度")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("div",{staticClass:"form__tag-case"},[r("label",{staticClass:"form__label"},[e._v("標籤")]),e._l(e.course.tags,function(t,s){return r("div",{key:s,staticClass:"form__tag"},[e._v("\n                  "+e._s(t)+"\n                  "),r("i",{staticClass:"fas fa-times-circle",on:{click:function(t){return e.deleteTag(s)}}})])})],2),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.tag,expression:"tag",modifiers:{trim:!0}}],staticClass:"form__input",attrs:{type:"text",placeholder:"請填入標籤並以enter隔開"},domProps:{value:e.tag},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addTags()},input:function(t){t.target.composing||(e.tag=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程類別")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.course.categorySelected,expression:"course.categorySelected"}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.categorySelected.$error},attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.course,"categorySelected",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("請選擇課程類別")]),e._l(e.category,function(t,s){return r("option",{key:s,domProps:{value:t}},[e._v(e._s(t))])})],2),e.$v.course.categorySelected.$dirty?[e.$v.course.categorySelected.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程類別為必選欄位")])]:e._e()],2),r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程教練")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.course.coach,expression:"course.coach"}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.coach.$error},attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.course,"coach",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("請選擇課程教練")]),e._l(e.coaches,function(t,s){return r("option",{key:s,domProps:{value:t}},[e._v(e._s(t))])})],2),e.$v.course.coach.$dirty?[e.$v.course.coach.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程教練為必選欄位")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程星期")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.course.week,expression:"course.week"}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.week.$error},attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.course,"week",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("請選擇課程星期")]),e._l(e.week,function(t){return r("option",{key:t},[e._v(e._s(t))])})],2),e.$v.course.week.$dirty?[e.$v.course.week.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程星期為必選欄位")])]:e._e()],2),r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程時間")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.course.time,expression:"course.time"}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.time.$error},attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.course,"time",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("請選擇課程時間")]),e._m(0),e._m(1),e._m(2)]),e.$v.course.time.$dirty?[e.$v.course.time.required?e._e():r("span",{staticClass:"text-warning"},[e._v("課程時間為必選欄位")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("滿班人數")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.course.quantity,expression:"course.quantity",modifiers:{number:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.quantity.$error},attrs:{placeholder:"請填入人數",type:"number"},domProps:{value:e.course.quantity},on:{input:function(t){t.target.composing||e.$set(e.course,"quantity",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.$v.course.quantity.$dirty?[e.$v.course.quantity.required?e._e():r("span",{staticClass:"text-warning"},[e._v("滿班人數為必填欄位")]),e.$v.course.quantity.minValue?e._e():r("span",{staticClass:"text-warning"},[e._v("人數至少0人")])]:e._e()],2),r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("可報名人數")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.course.remainQuantity,expression:"course.remainQuantity",modifiers:{number:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.remainQuantity.$error},attrs:{placeholder:"請填入人數",type:"number"},domProps:{value:e.course.remainQuantity},on:{input:function(t){t.target.composing||e.$set(e.course,"remainQuantity",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.$v.course.remainQuantity.$dirty?[e.$v.course.remainQuantity.required?e._e():r("span",{staticClass:"text-warning"},[e._v("可報名人數為必填欄位")]),e.$v.course.remainQuantity.minValue?e._e():r("span",{staticClass:"text-warning"},[e._v("人數至少0人")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("原價")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.course.originPrice,expression:"course.originPrice",modifiers:{number:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.originPrice.$error},attrs:{placeholder:"請填入價格",type:"number"},domProps:{value:e.course.originPrice},on:{input:function(t){t.target.composing||e.$set(e.course,"originPrice",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.$v.course.originPrice.$dirty?[e.$v.course.originPrice.required?e._e():r("span",{staticClass:"text-warning"},[e._v("原價為必填欄位")]),e.$v.course.originPrice.minValue?e._e():r("span",{staticClass:"text-warning"},[e._v("價格必大於0")])]:e._e()],2),r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("售價")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.course.price,expression:"course.price",modifiers:{number:!0}}],staticClass:"form__input",class:{"form__input--warning":e.$v.course.price.$error},attrs:{placeholder:"請填入價格",type:"number"},domProps:{value:e.course.price},on:{input:function(t){t.target.composing||e.$set(e.course,"price",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.$v.course.price.$dirty?[e.$v.course.price.required?e._e():r("span",{staticClass:"text-warning"},[e._v("售價為必填欄位")]),e.$v.course.price.minValue?e._e():r("span",{staticClass:"text-warning"},[e._v("價格必大於0")])]:e._e()],2)]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group d-flex",staticStyle:{"align-items":"center"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.course.discount,expression:"course.discount"}],staticClass:"form__checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.course.discount)?e._i(e.course.discount,null)>-1:e.course.discount},on:{change:function(t){var r=e.course.discount,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.course,"discount",r.concat([i])):o>-1&&e.$set(e.course,"discount",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.course,"discount",a)}}}),r("label",{staticClass:"form__label"},[e._v("精選課程（優惠）")])])]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group"},[r("label",{staticClass:"form__label"},[e._v("課程內容")]),r("VueEditor",{attrs:{id:"editor",placeholder:"請填入詳細課程內容"},model:{value:e.course.desc,callback:function(t){e.$set(e.course,"desc",t)},expression:"course.desc"}})],1)])])])]),r("div",{staticClass:"form__row"},[r("div",{staticClass:"form__group btn-footer"},["新增課程"===e.status?r("button",{staticClass:"btn btn-primary",staticStyle:{width:"100px"},on:{click:e.addCourse}},[e._v("新增")]):e._e(),"編輯課程"===e.status?r("button",{staticClass:"btn btn-primary",staticStyle:{width:"100px"},on:{click:function(t){return e.updateCourse(e.course.id)}}},[e._v("修改")]):e._e(),r("button",{staticClass:"btn btn-primary--cancel",staticStyle:{width:"100px"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])])])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("optgroup",{attrs:{label:"上午"}},[r("option",{attrs:{value:"上午09:00~10:00",default:"",selected:""}},[e._v("09:00~10:00")]),r("option",{attrs:{value:"上午10:00~11:00"}},[e._v("10:00~11:00")]),r("option",{attrs:{value:"上午11:00~12:00"}},[e._v("11:00~12:00")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("optgroup",{attrs:{label:"中午"}},[r("option",{attrs:{value:"中午14:00~15:00"}},[e._v("14:00~15:00")]),r("option",{attrs:{value:"中午15:00~16:00"}},[e._v("15:00~16:00")]),r("option",{attrs:{value:"中午16:00~17:00"}},[e._v("16:00~17:00")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("optgroup",{attrs:{label:"晚上"}},[r("option",{attrs:{value:"晚上18:00~19:00"}},[e._v("18:00~19:00")]),r("option",{attrs:{value:"晚上19:00~20:00"}},[e._v("19:00~20:00")]),r("option",{attrs:{value:"晚上20:00~21:00"}},[e._v("20:00~21:00")])])}],i=(r("8e6e"),r("ac6a"),r("456d"),r("6762"),r("2fdb"),r("bd86")),o=r("b5ae"),n=r("5873");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l={name:"CourseNewEdit",components:{VueEditor:n["a"]},data:function(){return{prevRoute:!1,updateCover:!1,week:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],category:["有氧課程","瑜珈課程","游泳課程","飛輪課程","其他課程"],coaches:["Amy珊珊","CICI","Danny","Papaya","Peco","Ryan","小惠","張三豐","強森","海德","阿Ni","阿壯"],courseNew:{title:"",intro:"",tags:[],categorySelected:"",coach:"",week:"",time:"",quantity:null,remainQuantity:null,originPrice:null,price:null,discount:!1,imageUrl:"",avgRating:0},course:null,tag:null,modal:null,titleMax:25,introMax:80}},validations:{course:{title:{required:o["required"],maxLength:Object(o["maxLength"])(24)},intro:{required:o["required"],maxLength:Object(o["maxLength"])(79)},categorySelected:{required:o["required"]},coach:{required:o["required"]},week:{required:o["required"]},time:{required:o["required"]},originPrice:{required:o["required"],minValue:Object(o["minValue"])(0)},price:{required:o["required"],minValue:Object(o["minValue"])(0)},quantity:{required:o["required"],minValue:Object(o["minValue"])(0)},remainQuantity:{required:o["required"],minValue:Object(o["minValue"])(0)},imageUrl:{required:o["required"],url:o["url"]}}},computed:{isLoading:function(){return this.$store.state.isLoading},status:function(){return this.$store.state.courses.status},getCourse:function(){return this.$store.state.courses.course},getDownloadURL:function(){return this.$store.state.downloadURL}},watch:{status:function(){"新增課程"===this.status&&(this.course=u({},this.courseNew))},getDownloadURL:function(){this.getDownloadURL&&(this.course.imageUrl=this.getDownloadURL,this.updateCover=!1)}},methods:{addCourse:function(){var e=this;this.$v.$touch(),this.$v.$invalid?this.$toasted.error("請正確填寫必要資訊",{duration:3e3}):this.$store.dispatch("courses/createCourse",u({},this.course)).then(function(){e.$toasted.success("成功新增課程",{duration:2e3}),e.$router.push({name:"coursesAdmin"})}).catch(function(e){return console.error(e.message)})},updateCourse:function(e){var t=this;this.$v.$touch(),this.updateCover||(this.$v.$invalid?this.$toasted.error("請正確填寫必要資訊",{duration:3e3}):this.$store.dispatch("courses/updateCourse",{id:e,course:this.course}).then(function(){t.$toasted.success("更新成功!!",{duration:2e3}),t.$router.push({name:"coursesAdmin"})}))},addTags:function(){this.tag&&this.course.tags.push(this.tag),this.tag=""},deleteTag:function(e){this.course.tags.splice(e,1)},uploadImage:function(e){var t=e.target.files[0];t.type.includes("image")?(this.updateCover=!0,this.$store.dispatch("updateFile",{file:t,place:"courses/"})):this.$toasted.error("請上傳圖片檔案",{duration:3e3})}},created:function(){this.$store.commit("setDownloadUrl",null),"編輯課程"===this.status?this.course=u({},this.getCourse):this.course=u({},this.courseNew)}},d=l,m=(r("7a3c"),r("2877")),_=Object(m["a"])(d,s,a,!1,null,null,null);t["default"]=_.exports},aae3:function(e,t,r){var s=r("d3f4"),a=r("2d95"),i=r("2b4c")("match");e.exports=function(e){var t;return s(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},d2c8:function(e,t,r){var s=r("aae3"),a=r("be13");e.exports=function(e,t,r){if(s(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(e))}}}]);
//# sourceMappingURL=chunk-393828af.c742d9b6.js.map