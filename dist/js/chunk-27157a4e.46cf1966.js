(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27157a4e"],{"2a65":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.isLoading,opacity:.8,"background-color":"#000",color:"#ff5722"},on:{"update:active":function(s){t.isLoading=s}}}),e("nav",{staticClass:"sub-nav",class:{"sub-nav--hidden":!t.showNavbar}},[e("ul",{staticClass:"sub-nav__list"},t._l(t.navbar,function(s){return e("li",{key:s.cat,staticClass:"sub-nav__item",on:{click:function(e){return e.preventDefault(),t.selectCat(s.cat)}}},[e("a",{staticClass:"sub-nav__link"},[e("i",{class:""+s.icon}),e("p",[t._v(t._s(s.cat))])])])}),0)]),e("main",{staticClass:"courses-main",attrs:{id:"courseMain"}},[t.searchShow?t._e():e("header",{staticClass:"courses-header"},[e("div",{staticClass:"container"},[e("h2",{staticClass:"courses-header__title"},[t._v(t._s(t.cat))]),e("p",{staticClass:"courses-header__text"},[t._v("\n          "+t._s(t.navbar.filter(function(s){return s.cat===t.cat})[0].des)+"\n        ")])])]),e("div",{staticClass:"container"},[t.searchShow?t._e():e("section",[e("h2",{staticClass:"heading-tertiary--dark"},[t._v("精選"+t._s(t.cat))]),e("transition",{attrs:{name:"slide-fade"}},[t.courses.length>0?e("course-card",{attrs:{selectedCat:t.cat,"course-card":t.courses}}):t._e()],1)],1),e("section",[t.searchShow?t._e():e("h2",{staticClass:"heading-tertiary--dark mb-sm"},[t._v("全部"+t._s(t.cat))]),t.searchShow&&!t.isLoading?e("div",{staticClass:"search-result"},[0===t.coursesOrdered.length?e("div",[e("p",[t._v("\n              抱歉，我們找不到有關「"+t._s(t.keyWord)+"」的任何結果\n              "),e("br"),t._v("請嘗試調整您的搜索。以下是幾點建議：\n            ")]),t._m(0)]):e("div",[t._v("\n            關於「"+t._s(t.keyWord)+"」的 "+t._s(t.coursesOrdered.length)+" 筆结果：\n          ")])]):t._e(),e("div",{staticClass:"courses-filter"},[e("div",{staticClass:"courses-filter__list"},[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchWord,expression:"searchWord",modifiers:{trim:!0}}],staticClass:"search__input",attrs:{type:"text",placeholder:"搜尋課程"},domProps:{value:t.searchWord},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchCourse()},input:function(s){s.target.composing||(t.searchWord=s.target.value.trim())},blur:function(s){return t.$forceUpdate()}}}),e("button",{staticClass:"search__btn btn",on:{click:function(s){return t.searchCourse()}}},[t._m(1)])]),e("div",{staticClass:"courses-filter__btn-group d-flex"},[e("div",{staticClass:"courses-filter__item"},[e("button",{staticClass:"courses-filter__btn btn",on:{click:function(s){t.priceOrder=!t.priceOrder,t.orderCourse("price",t.priceOrder)}}},[t.priceOrder?e("i",{staticClass:"fas fa-chevron-down"}):e("i",{staticClass:"fas fa-chevron-up"}),t._v("\n                  價格\n                ")])]),e("div",{staticClass:"courses-filter__item"},[e("button",{staticClass:"courses-filter__btn btn",on:{click:function(s){t.ratingOrder=!t.ratingOrder,t.orderCourse("avgRating",t.ratingOrder)}}},[t.ratingOrder?e("i",{staticClass:"fas fa-chevron-down"}):e("i",{staticClass:"fas fa-chevron-up"}),t._v("\n                  評等\n                ")])])])])])]),e("section",[t.infiniteData.length>0?e("course-list",{attrs:{"courses-list":t.infiniteData}}):t._e(),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"ifinite-scroll",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"15","infinite-scroll-immediate-check":"false"}},[t.busy&&t.infiniteData.length!==t.coursesOrdered.length?e("div",[e("i",{staticClass:"fas fa-spinner fa-spin"})]):t._e(),t.infiniteData.length==t.coursesOrdered.length?e("a",{staticClass:"gotop",attrs:{href:"#courseMain"}},[e("i",{staticClass:"fas fa-chevron-up"}),t._v(" 返回頂部\n          ")]):t._e()])],1)])]),e("add-to-cart-modal")],1)},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("確保所有字詞拼寫正確。")]),e("li",[t._v("嘗試不同的搜索詞。")]),e("li",[t._v("嘗試更常見的搜索字詞。")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search__icon"},[e("i",{staticClass:"fas fa-search"})])}],a=(e("4917"),e("75fc")),n=(e("55dd"),e("1157")),c=e.n(n),o=e("8f57"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.coursesList.length>0?e("div",{staticClass:"courses-list"},t._l(t.remainCourse,function(s){return e("router-link",{key:s.id,staticClass:"course-list__course",attrs:{to:{name:"CourseDetails",params:{course_id:s.id}}}},[e("div",{staticClass:"course-list__header"},[s.discount?e("div",{staticClass:"course-list__hot-tag"},[e("div",{staticClass:"course-list__hot-tag-text"},[t._v("精選")])]):t._e(),e("img",{staticClass:"course-list__img",attrs:{src:s.imageUrl,alt:""}})]),e("div",{staticClass:"course-list__content"},[e("div",{staticClass:"course-list__info"},[e("div",{staticClass:"course-list__title heading-tertiary--dark"},[t._v("\n          "+t._s(t.textLimit(s.title,20))+"\n        ")]),e("div",{staticClass:"d-flex d-none-phone"},[e("div",{staticClass:"course-list__category"},[t._v("\n            "+t._s(s.categorySelected)+"｜\n          ")]),e("div",{staticClass:"course-list__coach"},[t._v(t._s(s.coach)+"｜")]),e("div",{staticClass:"course-list__time"},[t._v("\n            "+t._s(s.week)+" "+t._s(s.time)+"\n          ")])]),e("div",{staticClass:"course-list__time"}),e("div",{staticClass:"course-list__intro d-none-phone"},[t._v("\n          "+t._s(t.textLimit(s.intro,50))+"\n        ")])]),e("div",{staticClass:"course-list__price"},[e("div",{staticClass:"course-list__price-info"},[e("div",{staticClass:"course-list__price--discount"},[t._v("\n            "+t._s(t._f("currency")(s.price))+"\n          ")]),e("div",{staticClass:"course-list__price--origin"},[t._v("\n            "+t._s(t._f("currency")(s.originPrice))+"\n          ")]),e("star-rating",{staticStyle:{"margin-left":"auto"},attrs:{rating:s.avgRating,increment:.1,"star-size":17,"read-only":!0}})],1),e("add-to-cart",{staticClass:"d-none-tab-p",staticStyle:{width:"140px","margin-top":"auto"},attrs:{course:s}})],1)])])}),1):t._e()},u=[],d=e("c1da"),h=e.n(d),f=e("5769"),_={name:"CourseList",props:["coursesList"],components:{StarRating:h.a,AddToCart:f["default"]},computed:{remainCourse:function(){return this.coursesList.filter(function(t){return t.remainQuantity>0})}},methods:{textLimit:function(t,s){return t.length>s&&(t="".concat(t.substring(0,s-1),"...")),t}}},v=_,C=e("2877"),p=Object(C["a"])(v,l,u,!1,null,null,null),m=p.exports,g={name:"Courses",props:["navbar"],components:{CourseCard:o["a"],CourseList:m},data:function(){return{property:"ratingOrder",order:!1,priceOrder:!0,ratingOrder:!0,searchShow:!1,searchWord:null,keyWord:null,showNavbar:!0,lastScrollPosition:0,count:0,infiniteData:[],busy:!1,cates:[]}},computed:{isLoading:function(){return this.$store.state.isLoading},courses:function(){return this.$store.state.courses.courses.filter(function(t){return t.remainQuantity>0&&t.discount})},coursesOrdered:function(){var t=this,s=Object(a["a"])(this.$store.state.courses.courses).sort(function(s,e){return e[t.property]-s[t.property]});return this.order?s:s.reverse()},cat:function(){return this.$store.state.courses.cat}},methods:{reset:function(){this.searchShow=!1,this.searchWord=null,this.count=0,this.infiniteData=[]},selectCat:function(t){this.cat!==t&&(this.reset(),this.$store.dispatch("courses/getCourses",t))},scrollSubNav:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t<0||Math.abs(t-this.lastScrollPosition)<60||(this.showNavbar=t<this.lastScrollPosition,this.lastScrollPosition=t)},loadMore:function(){var t=this,s=Object(a["a"])(this.coursesOrdered);this.infiniteData.length<=s.length&&(this.busy=!0,setTimeout(function(){for(var e=0,i=5;e<i;e++){if(t.count===s.length)break;t.infiniteData.push(s[t.count++])}t.busy=!1},500))},searchCourse:function(){var t=this;this.searchWord?(this.keyWord=this.searchWord,this.reset(),this.searchShow=!0,this.$store.dispatch("courses/getCourses","所有課程").then(function(s){var e=s.filter(function(s){return s.title.match(t.keyWord)})||[];t.$store.commit("courses/setCourses",e),t.loadMore()})):this.$toasted.error("請輸入搜尋字詞",{duration:3e3})},orderCourse:function(t,s){this.property=t,this.order=s,this.count=0,this.infiniteData=[],this.loadMore()}},mounted:function(){c()(window).scroll(this.scrollSubNav)},created:function(){this.reset(),0===this.$store.state.courses.courses.length&&this.$store.dispatch("courses/getCourses","所有課程")}},b=g,y=Object(C["a"])(b,i,r,!1,null,null,null);s["default"]=y.exports},"2f21":function(t,s,e){"use strict";var i=e("79e5");t.exports=function(t,s){return!!t&&i(function(){s?t.call(null,function(){},1):t.call(null)})}},4917:function(t,s,e){"use strict";var i=e("cb7c"),r=e("9def"),a=e("0390"),n=e("5f1b");e("214f")("match",1,function(t,s,e,c){return[function(e){var i=t(this),r=void 0==e?void 0:e[s];return void 0!==r?r.call(e,i):new RegExp(e)[s](String(i))},function(t){var s=c(e,t,this);if(s.done)return s.value;var o=i(t),l=String(this);if(!o.global)return n(o,l);var u=o.unicode;o.lastIndex=0;var d,h=[],f=0;while(null!==(d=n(o,l))){var _=String(d[0]);h[f]=_,""===_&&(o.lastIndex=a(l,r(o.lastIndex),u)),f++}return 0===f?null:h}]})},"55dd":function(t,s,e){"use strict";var i=e("5ca1"),r=e("d8e8"),a=e("4bf8"),n=e("79e5"),c=[].sort,o=[1,2,3];i(i.P+i.F*(n(function(){o.sort(void 0)})||!n(function(){o.sort(null)})||!e("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(a(this)):c.call(a(this),r(t))}})}}]);
//# sourceMappingURL=chunk-27157a4e.46cf1966.js.map