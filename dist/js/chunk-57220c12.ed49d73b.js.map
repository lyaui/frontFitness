{"version":3,"sources":["webpack:///./src/views/frontend/Cart.vue?632b","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?8466","webpack:///./src/views/frontend/Cart.vue","webpack:///./src/components/StepBar.vue?dc37","webpack:///src/components/StepBar.vue","webpack:///./src/components/StepBar.vue?ee9e","webpack:///./src/components/StepBar.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","status","cartCourses","length","_v","_s","on","click","$event","preventDefault","selectCat","_l","course","key","id","src","imageUrl","alt","title","to","name","params","course_id","_e","discounted","discount","categorySelected","coach","week","time","_f","price","deleteCourse","total","totalOrigin","totalDiscount","totalPrice","directives","rawName","value","expression","modifiers","trim","type","placeholder","disabled","couponCode","domProps","input","target","composing","blur","$forceUpdate","feedback","checkOut","staticStyle","margin","staticRenderFns","Cartvue_type_script_lang_js_","components","StepBar","data","coupon","couponCourse","computed","user","$store","state","auth","cart","watch","commit","methods","cat","_this","dispatch","then","$router","push","courses","$toasted","error","duration","created","frontend_Cartvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","class","step-bar__circle--active","step-bar__circle--done","_m","StepBarvue_type_script_lang_js_","props","components_StepBarvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-57220c12.ed49d73b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('main',{staticClass:\"courses-main\"},[_c('div',{staticClass:\"container\"},[_c('step-bar',{attrs:{\"status\":_vm.status}}),_c('div',{staticClass:\"checkout\"},[_c('div',{staticClass:\"checkout__items\"},[(_vm.cartCourses.length>0)?_c('div',{staticClass:\"heading-tertiary--dark mb-sm\"},[_c('i',{staticClass:\"fas fa-shopping-cart fa-lg\"}),_vm._v(\"\\n            購物車中有 \"+_vm._s(_vm.cartCourses.length)+\" 門課程\\n          \")]):_c('div',{staticClass:\"heading-tertiary--dark mb-sm\"},[_c('i',{staticClass:\"fas fa-shopping-cart fa-lg\"}),_vm._v(\"\\n            購物車中尚無課程！\\n            \"),_c('button',{staticClass:\"btn heading-tertiary--dark\",on:{\"click\":function($event){$event.preventDefault();return _vm.selectCat('所有課程')}}},[_c('u',[_vm._v(\"速選購\")])]),_vm._v(\" 💪\\n          \")]),_c('ul',{staticClass:\"checkout__list\"},_vm._l((_vm.cartCourses),function(course){return _c('li',{key:course.id,staticClass:\"cart__item\"},[_c('div',{staticClass:\"d-flex\"},[_c('img',{staticClass:\"cart__img\",attrs:{\"src\":course.imageUrl,\"alt\":course.title}})]),_c('div',{staticClass:\"cart__info\"},[_c('router-link',{staticClass:\"cart__link\",attrs:{\"to\":{name:'CourseDetails',params:{course_id:course.id}}}},[_c('div',{staticClass:\"cart__tag-box d-none-phone\"},[(course.discount)?_c('div',{staticClass:\"cart__tag\"},[_vm._v(\"精選課程\")]):_vm._e(),(_vm.discounted&&course.discount)?_c('span',{staticClass:\"text-warning\"},[_vm._v(\"已成功套用優惠券\")]):_vm._e()]),_c('div',{staticClass:\"cart__title d-none-phone\"},[_vm._v(_vm._s(course.title))]),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"cart__category\"},[_vm._v(_vm._s(course.categorySelected)+\"｜\")]),_c('div',{staticClass:\"cart__coach\"},[_vm._v(_vm._s(course.coach)+\"｜\")]),_c('div',{staticClass:\"cart__time\"},[_vm._v(_vm._s(course.week)+\" \"+_vm._s(course.time))])])]),_c('div',{staticClass:\"cart__handle\"},[_c('div',{staticClass:\"cart__price\"},[(!_vm.discounted)?_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(_vm._s(_vm._f(\"currency\")(course.price)))]):_vm._e(),(_vm.discounted)?[(course.discount)?[_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(_vm._s(_vm._f(\"currency\")(course.price-100)))]),_c('div',{staticClass:\"cart__price--discount\"},[_vm._v(_vm._s(_vm._f(\"currency\")(course.price)))])]:_vm._e(),(!course.discount)?[_c('div',{staticClass:\"cart__price--origin\"},[_vm._v(_vm._s(_vm._f(\"currency\")(course.price)))])]:_vm._e()]:_vm._e()],2),_c('button',{staticClass:\"cart__remove btn\",on:{\"click\":function($event){return _vm.deleteCourse(course)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})])])],1)])}),0)]),_c('div',{staticClass:\"checkout__summary\"},[_c('div',{staticClass:\"checkout__summary-title heading-tertiary--dark\"},[_vm._v(\"訂單明細\")]),_c('div',{staticClass:\"checkout__summary-price\"},[_c('div',[_vm._v(\"原價\")]),_c('div',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.total.totalOrigin)))])]),(_vm.discounted)?_c('div',{staticClass:\"checkout__summary-price\"},[_c('div',[_vm._v(\"優惠券折扣\")]),_c('div',[_vm._v(\"-\"+_vm._s(_vm._f(\"currency\")(_vm.total.totalDiscount)))])]):_vm._e(),_c('div',{staticClass:\"checkout__summary-total\"},[_c('div',[_vm._v(\"總計\")]),_c('h3',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.total.totalPrice)))])]),_c('div',{staticClass:\"form__row\"},[_c('div',{staticClass:\"form__group\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(\"使用折扣代碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.couponCode),expression:\"couponCode\",modifiers:{\"trim\":true}}],staticClass:\"mb-sm form__input\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠券\",\"disabled\":_vm.couponCode==='LOVEFITTING'},domProps:{\"value\":(_vm.couponCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.couponCode=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"text-warning\"},[_vm._v(_vm._s(_vm.feedback))])])]),(_vm.cartCourses.length>0)?_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.checkOut()}}},[_vm._v(\"確定結帳\")]):_c('button',{staticClass:\"btn btn-primary--cancel\",staticStyle:{\"margin\":\"0\"},on:{\"click\":function($event){return _vm.selectCat('所有課程')}}},[_vm._v(\"請先選購課程\")])])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <main class=\"courses-main\">\n      <div class=\"container\">\n        <step-bar :status=\"status\"></step-bar>\n        <div class=\"checkout\">\n          <div class=\"checkout__items\">\n            <div class=\"heading-tertiary--dark mb-sm\" v-if=\"cartCourses.length>0\">\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中有 {{cartCourses.length}} 門課程\n            </div>\n            <div class=\"heading-tertiary--dark mb-sm\" v-else>\n              <i class=\"fas fa-shopping-cart fa-lg\"></i>\n              購物車中尚無課程！\n              <button\n                class=\"btn heading-tertiary--dark\"\n                @click.prevent=\"selectCat('所有課程')\"\n              >\n                <u>速選購</u>\n              </button> &#128170;\n            </div>\n            <ul class=\"checkout__list\">\n              <li class=\"cart__item\" v-for=\"course in cartCourses\" :key=\"course.id\">\n                <div class=\"d-flex\">\n                  <img class=\"cart__img\" :src=\"course.imageUrl\" :alt=\"course.title\">\n                </div>\n\n                <div class=\"cart__info\">\n                  <router-link\n                    class=\"cart__link\"\n                    :to=\"{name:'CourseDetails',params:{course_id:course.id}}\"\n                  >\n                    <div class=\"cart__tag-box d-none-phone\">\n                      <div v-if=\"course.discount\" class=\"cart__tag\">精選課程</div>\n                      <span class=\"text-warning\" v-if=\"discounted&&course.discount\">已成功套用優惠券</span>\n                    </div>\n\n                    <div class=\"cart__title d-none-phone\">{{course.title}}</div>\n                    <div class=\"d-flex\">\n                      <div class=\"cart__category\">{{course.categorySelected}}｜</div>\n                      <div class=\"cart__coach\">{{course.coach}}｜</div>\n                      <div class=\"cart__time\">{{course.week}} {{course.time}}</div>\n                    </div>\n                  </router-link>\n                  <div class=\"cart__handle\">\n                    <div class=\"cart__price\">\n                      <!-- 沒有使用優惠券時的價格（橘字） -->\n                      <div v-if=\"!discounted\" class=\"cart__price--origin\">{{course.price|currency}}</div>\n                      <!-- 使用優惠券-->\n                      <template v-if=\"discounted\">\n                        <template v-if=\"course.discount\">\n                          <!-- 有優惠的課程(橘字) -->\n                          <div class=\"cart__price--origin\">{{course.price-100|currency}}</div>\n                          <!-- 原價（刪除線） -->\n                          <div class=\"cart__price--discount\">{{course.price|currency}}</div>\n                        </template>\n                        <!-- 沒有優惠的課程 -->\n                        <template v-if=\"!course.discount\">\n                          <div class=\"cart__price--origin\">{{course.price|currency}}</div>\n                        </template>\n                      </template>\n                    </div>\n                    <button class=\"cart__remove btn\" @click=\"deleteCourse(course)\">\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"checkout__summary\">\n            <div class=\"checkout__summary-title heading-tertiary--dark\">訂單明細</div>\n\n            <div class=\"checkout__summary-price\">\n              <div>原價</div>\n              <div>{{total.totalOrigin|currency}}</div>\n            </div>\n            <div class=\"checkout__summary-price\" v-if=\"discounted\">\n              <div>優惠券折扣</div>\n              <div>-{{total.totalDiscount|currency}}</div>\n            </div>\n            <div class=\"checkout__summary-total\">\n              <div>總計</div>\n              <h3>{{total.totalPrice|currency}}</h3>\n            </div>\n            <div class=\"form__row\">\n              <div class=\"form__group\">\n                <div class=\"form__label\">使用折扣代碼</div>\n                <input\n                  class=\"mb-sm form__input\"\n                  type=\"text\"\n                  v-model.trim=\"couponCode\"\n                  placeholder=\"請輸入優惠券\"\n                  :disabled=\"couponCode==='LOVEFITTING'\"\n                >\n                <span class=\"text-warning\">{{feedback}}</span>\n              </div>\n            </div>\n\n            <button v-if=\"cartCourses.length>0\" class=\"btn btn-primary\" @click=\"checkOut()\">確定結帳</button>\n            <button\n              v-else\n              class=\"btn btn-primary--cancel\"\n              style=\"margin:0\"\n              @click=\"selectCat('所有課程')\"\n            >請先選購課程</button>\n          </div>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport StepBar from \"@/components/StepBar\";\n\nexport default {\n  name: \"Cart\",\n  components: {\n    StepBar\n  },\n  data() {\n    return {\n      status: \"cart\",\n      coupon: false,\n      couponCode: null,\n      couponCourse: null\n    };\n  },\n  computed: {\n    //使用者登入狀態\n    user() {\n      return this.$store.state.auth.user;\n    },\n\n    //購物車課程數\n    cartCourses() {\n      return this.$store.state.cart.cart;\n    },\n\n    //計算價格相關\n    total() {\n      return this.$store.state.cart.total;\n    },\n\n    //折扣訊息\n    feedback() {\n      //沒輸入折扣代碼\n      if (!this.couponCode) {\n        return null;\n      } else {\n        //錯的折扣代碼\n        if (this.couponCode !== \"LOVEFITTING\") {\n          return \"代碼不存在 請再次確認\";\n        } else {\n          //有折扣代碼課程\n          if (this.total.totalDiscount !== 0) {\n            return \"已成功套用優惠券\";\n          } else {\n            //無折扣代碼課程\n            return \"無符合活動優惠之課程\";\n          }\n        }\n      }\n    },\n\n    //是否成功使用優惠券狀態\n    discounted() {\n      return this.$store.state.cart.coupon;\n    }\n  },\n  watch: {\n    //輸入成功時就會送出折扣碼\n    couponCode() {\n      if (this.couponCode === \"LOVEFITTING\") {\n        this.coupon = true;\n        this.$store.commit(\"cart/addCouponCode\", this.coupon);\n      }\n      //計算總價\n      this.$store.commit(\"cart/total\");\n    }\n  },\n  methods: {\n    //移除課程\n    deleteCourse(course) {\n      this.$store.commit(\"cart/removeItem\", course);\n      //計算總價\n      this.$store.commit(\"cart/total\");\n    },\n    selectCat(cat) {\n      this.$store\n        .dispatch(\"courses/getCourses\", cat)\n        .then(() => this.$router.push(\"/courses\"));\n    },\n\n    //下一步\n    checkOut() {\n      if (this.user && this.cartCourses.length > 0) {\n        //創建暫時訂單\n        this.$store.commit(\"checkout/setPayment\", {\n          courses: this.cartCourses,\n          total: this.total\n        });\n        this.$router.push(\"/checkout\");\n      } else {\n        this.$toasted.error(\"請先登入或註冊會員\", { duration: 3000 });\n      }\n    }\n  },\n\n  created() {\n    //初始設定coupon是false，離開頁面就折扣就會消失\n    this.$store.commit(\"cart/addCouponCode\", this.coupon);\n    this.$store.commit(\"cart/total\");\n  }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=784838f5&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar\"},[_c('ul',{staticClass:\"step-bar__list\"},[_c('li',{staticClass:\"step-bar__item step-bar__item--first\"},[_c('div',{staticClass:\"step-bar__circle\",class:{'step-bar__circle--active':_vm.status==='cart','step-bar__circle--done':_vm.status==='checkout'|| _vm.status==='success'}},[_c('span',[_vm._v(\"1\")])]),_c('div',{staticClass:\"step-bar__line\"}),_vm._m(0)]),_c('li',{staticClass:\"step-bar__item step-bar__item--secondary\"},[_c('div',{staticClass:\"step-bar__circle\",class:{'step-bar__circle--active':_vm.status==='checkout','step-bar__circle--done':_vm.status==='success'}},[_c('span',[_vm._v(\"2\")])]),_c('div',{staticClass:\"step-bar__line\"}),_vm._m(1)]),_c('li',{staticClass:\"step-bar__item step-bar__item--last\"},[_c('div',{staticClass:\"step-bar__circle\",class:{'step-bar__circle--done':_vm.status==='success'}},[_c('span',[_vm._v(\"3\")])]),_vm._m(2)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"購物車\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"結帳\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-bar__title\"},[_c('span',{staticClass:\"spacing-adjust\"},[_vm._v(\"購買完成\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"step-bar\">\n    <ul class=\"step-bar__list\">\n      <li class=\"step-bar__item step-bar__item--first\">\n        <div\n          class=\"step-bar__circle\"\n          :class=\"{'step-bar__circle--active':status==='cart','step-bar__circle--done':status==='checkout'|| status==='success'}\"\n        >\n          <span>1</span>\n        </div>\n        <div class=\"step-bar__line\"></div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">購物車</span>\n        </div>\n      </li>\n      <li class=\"step-bar__item step-bar__item--secondary\">\n        <div\n          class=\"step-bar__circle\"\n          :class=\"{'step-bar__circle--active':status==='checkout','step-bar__circle--done':status==='success'}\"\n        >\n          <span>2</span>\n        </div>\n        <div class=\"step-bar__line\"></div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">結帳</span>\n        </div>\n      </li>\n      <li class=\"step-bar__item step-bar__item--last\">\n        <div class=\"step-bar__circle\" :class=\"{'step-bar__circle--done':status==='success'}\">\n          <span>3</span>\n        </div>\n        <div class=\"step-bar__title\">\n          <span class=\"spacing-adjust\">購買完成</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"StepBar\",\n  props: [\"status\"]\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StepBar.vue?vue&type=template&id=74193848&\"\nimport script from \"./StepBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StepBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}